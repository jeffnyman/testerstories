<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="profile" href="http://gmpg.org/xfn/11">
				<link rel="pingback" href="/xmlrpc.php">
				<title>Reading Memory in Grue &#8211; Stories from a Software Tester</title>
<meta name="robots" content="max-image-preview:large">
 <style type="text/css" class="darkmysite_inline_css">:root { --darkmysite_dark_mode_bg: #0f0f0f; --darkmysite_dark_mode_secondary_bg: #171717; --darkmysite_dark_mode_text_color: #bebebe; --darkmysite_dark_mode_link_color: #ffffff; --darkmysite_dark_mode_link_hover_color: #cccccc; --darkmysite_dark_mode_input_bg: #2d2d2d; --darkmysite_dark_mode_input_text_color: #bebebe; --darkmysite_dark_mode_input_placeholder_color: #989898; --darkmysite_dark_mode_border_color: #4a4a4a; --darkmysite_dark_mode_btn_bg: #2d2d2d; --darkmysite_dark_mode_btn_text_color: #bebebe; }</style> <style type="text/css" class="darkmysite_inline_css">.darkmysite_dark_mode_enabled::-webkit-scrollbar { background: #29292a !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-track { background: #29292a !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-thumb { background-color: #52565a !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-corner { background-color: #52565a !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-button { background-color: transparent !important; background-repeat: no-repeat !important; background-size: contain !important; background-position: center !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-button:start { background-image: url(/wp-content/plugins/darkmysite/assets/img/others/scroll_arrow_up.svg) !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-button:end { background-image: url(/wp-content/plugins/darkmysite/assets/img/others/scroll_arrow_down.svg) !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-button:start:horizontal { background-image: url(/wp-content/plugins/darkmysite/assets/img/others/scroll_arrow_left.svg) !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-button:end:horizontal { background-image: url(/wp-content/plugins/darkmysite/assets/img/others/scroll_arrow_right.svg) !important; }</style> <script type="text/javascript" class="darkmysite_inline_js">var darkmysite_switch_unique_id = "1077814156"; var darkmysite_is_this_admin_panel = "0"; var darkmysite_enable_default_dark_mode = "0"; var darkmysite_enable_os_aware = "1"; var darkmysite_enable_keyboard_shortcut = "1"; var darkmysite_enable_time_based_dark = "0"; var darkmysite_time_based_dark_start = "19:00"; var darkmysite_time_based_dark_stop = "07:00"; var darkmysite_alternative_dark_mode_switch = ""; var darkmysite_enable_low_image_brightness = "1"; var darkmysite_image_brightness_to = "80"; var darkmysite_enable_image_grayscale = "0"; var darkmysite_image_grayscale_to = "80"; var darkmysite_enable_bg_image_darken = "1"; var darkmysite_bg_image_darken_to = "60"; var darkmysite_enable_invert_inline_svg = "0"; var darkmysite_enable_low_video_brightness = "1"; var darkmysite_video_brightness_to = "80"; var darkmysite_enable_video_grayscale = "0"; var darkmysite_video_grayscale_to = "80"; var darkmysite_disallowed_elements = ".darkmysite_ignore, .darkmysite_ignore *, .darkmysite_switch, .darkmysite_switch *, .wp-block-button__link, .wp-block-button__link *";</script><link rel="dns-prefetch" href="//static.addtoany.com">
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="alternate" type="application/rss+xml" title="Stories from a Software Tester &raquo; Feed" href="/feed/">
<link rel="alternate" type="application/rss+xml" title="Stories from a Software Tester &raquo; Comments Feed" href="/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Stories from a Software Tester &raquo; Reading Memory in Grue Comments Feed" href="/2023/05/reading-memory-in-grue/feed/">
<script type="text/javascript">
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.2.2"}};
/*! This file is auto-generated */
!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){p.clearRect(0,0,i.width,i.height),p.fillText(e,0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(t,0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(p&&p.fillText)switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s("üè≥Ô∏è‚Äç‚ößÔ∏è","üè≥Ô∏è‚Äã‚ößÔ∏è")?!1:!s("üá∫üá≥","üá∫‚Äãüá≥")&&!s("üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø","üè¥‚ÄãÛ†Åß‚ÄãÛ†Å¢‚ÄãÛ†Å•‚ÄãÛ†ÅÆ‚ÄãÛ†Åß‚ÄãÛ†Åø");case"emoji":return!s("ü´±üèª‚Äçü´≤üèø","ü´±üèª‚Äãü´≤üèø")}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(e=t.source||{}).concatemoji?c(e.concatemoji):e.wpemoji&&e.twemoji&&(c(e.twemoji),c(e.wpemoji)))}(window,document,window._wpemojiSettings);
</script>
<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}</style>
	<link rel="stylesheet" id="urvanov_syntax_highlighter-css" href="/wp-content/plugins/urvanov-syntax-highlighter/css/min/urvanov_syntax_highlighter.min.css?ver=2.8.33" type="text/css" media="all">
<link rel="stylesheet" id="crayon-theme-classic-css" href="/wp-content/plugins/urvanov-syntax-highlighter/themes/classic/classic.css?ver=2.8.33" type="text/css" media="all">
<link rel="stylesheet" id="crayon-font-monaco-css" href="/wp-content/plugins/urvanov-syntax-highlighter/fonts/monaco.css?ver=2.8.33" type="text/css" media="all">
<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css?ver=6.2.2" type="text/css" media="all">
<style id="wp-block-library-theme-inline-css" type="text/css">.wp-block-audio figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-audio figcaption{color:hsla(0,0%,100%,.65)}.wp-block-audio{margin:0 0 1em}.wp-block-code{border:1px solid #ccc;border-radius:4px;font-family:Menlo,Consolas,monaco,monospace;padding:.8em 1em}.wp-block-embed figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-embed figcaption{color:hsla(0,0%,100%,.65)}.wp-block-embed{margin:0 0 1em}.blocks-gallery-caption{color:#555;font-size:13px;text-align:center}.is-dark-theme .blocks-gallery-caption{color:hsla(0,0%,100%,.65)}.wp-block-image figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-image figcaption{color:hsla(0,0%,100%,.65)}.wp-block-image{margin:0 0 1em}.wp-block-pullquote{border-bottom:4px solid;border-top:4px solid;color:currentColor;margin-bottom:1.75em}.wp-block-pullquote cite,.wp-block-pullquote footer,.wp-block-pullquote__citation{color:currentColor;font-size:.8125em;font-style:normal;text-transform:uppercase}.wp-block-quote{border-left:.25em solid;margin:0 0 1.75em;padding-left:1em}.wp-block-quote cite,.wp-block-quote footer{color:currentColor;font-size:.8125em;font-style:normal;position:relative}.wp-block-quote.has-text-align-right{border-left:none;border-right:.25em solid;padding-left:0;padding-right:1em}.wp-block-quote.has-text-align-center{border:none;padding-left:0}.wp-block-quote.is-large,.wp-block-quote.is-style-large,.wp-block-quote.is-style-plain{border:none}.wp-block-search .wp-block-search__label{font-weight:700}.wp-block-search__button{border:1px solid #ccc;padding:.375em .625em}:where(.wp-block-group.has-background){padding:1.25em 2.375em}.wp-block-separator.has-css-opacity{opacity:.4}.wp-block-separator{border:none;border-bottom:2px solid;margin-left:auto;margin-right:auto}.wp-block-separator.has-alpha-channel-opacity{opacity:1}.wp-block-separator:not(.is-style-wide):not(.is-style-dots){width:100px}.wp-block-separator.has-background:not(.is-style-dots){border-bottom:none;height:1px}.wp-block-separator.has-background:not(.is-style-wide):not(.is-style-dots){height:2px}.wp-block-table{margin:0 0 1em}.wp-block-table td,.wp-block-table th{word-break:normal}.wp-block-table figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-table figcaption{color:hsla(0,0%,100%,.65)}.wp-block-video figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-video figcaption{color:hsla(0,0%,100%,.65)}.wp-block-video{margin:0 0 1em}.wp-block-template-part.has-background{margin-bottom:0;margin-top:0;padding:1.25em 2.375em}</style>
<link rel="stylesheet" id="classic-theme-styles-css" href="/wp-includes/css/classic-themes.min.css?ver=6.2.2" type="text/css" media="all">
<style id="global-styles-inline-css" type="text/css">body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}</style>
<link rel="stylesheet" id="darkmysite-client-main-css" href="/wp-content/plugins/darkmysite/assets/css/client_main.css?ver=1.2.6" type="text/css" media="all">
<link rel="stylesheet" id="plyr-css-css" href="/wp-content/plugins/easy-video-player/lib/plyr.css?ver=6.2.2" type="text/css" media="all">
<link rel="stylesheet" id="acuarela-fonts-css" href="https://fonts.googleapis.com/css?family=Lato%3A300italic%2C400italic%2C700italic%2C300%2C400%2C700%7CArima+Madurai%3A700%2C800%7CInconsolata%3A400%2C700&#038;subset=latin%2Clatin-ext&#038;ver=20190802" type="text/css" media="all">
<link rel="stylesheet" id="genericons-css" href="/wp-content/themes/acuarela/genericons/genericons.css?ver=3.4.1" type="text/css" media="all">
<link rel="stylesheet" id="animate-css" href="/wp-content/themes/acuarela/css/animate.css?ver=3.7.2" type="text/css" media="all">
<link rel="stylesheet" id="acuarela-style-css" href="/wp-content/themes/acuarela/style.css?ver=6.2.2" type="text/css" media="all">
<link rel="stylesheet" id="addtoany-css" href="/wp-content/plugins/add-to-any/addtoany.min.css?ver=1.16" type="text/css" media="all">
<script type="text/javascript" src="/wp-includes/js/jquery/jquery.min.js?ver=3.6.4" id="jquery-core-js"></script>
<script type="text/javascript" src="/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.4.0" id="jquery-migrate-js"></script>
<script type="text/javascript" id="urvanov_syntax_highlighter_js-js-extra">
/* <![CDATA[ */
var UrvanovSyntaxHighlighterSyntaxSettings = {"version":"2.8.33","is_admin":"0","ajaxurl":"\/wp-admin\/admin-ajax.php","prefix":"urvanov-syntax-highlighter-","setting":"urvanov-syntax-highlighter-setting","selected":"urvanov-syntax-highlighter-setting-selected","changed":"urvanov-syntax-highlighter-setting-changed","special":"urvanov-syntax-highlighter-setting-special","orig_value":"data-orig-value","debug":""};
var UrvanovSyntaxHighlighterSyntaxStrings = {"copy":"Copied to the clipboard","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/plugins/urvanov-syntax-highlighter/js/min/urvanov_syntax_highlighter.min.js?ver=2.8.33" id="urvanov_syntax_highlighter_js-js"></script>
<script type="text/javascript" id="addtoany-core-js-before">window.a2a_config=window.a2a_config||{};a2a_config.callbacks=[];a2a_config.overlays=[];a2a_config.templates={};</script>
<script type="text/javascript" async src="https://static.addtoany.com/menu/page.js" id="addtoany-core-js"></script>
<script type="text/javascript" async src="/wp-content/plugins/add-to-any/addtoany.min.js?ver=1.1" id="addtoany-jquery-js"></script>
<script type="text/javascript" src="/wp-content/plugins/darkmysite/assets/js/client_main.js?ver=1.2.6" id="darkmysite-client-main-js"></script>
<script type="text/javascript" id="plyr-js-js-extra">
/* <![CDATA[ */
var easy_video_player = {"plyr_iconUrl":"\/wp-content\/plugins\/easy-video-player\/lib\/plyr.svg","plyr_blankVideo":"\/wp-content\/plugins\/easy-video-player\/lib\/blank.mp4"};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/plugins/easy-video-player/lib/plyr.js?ver=6.2.2" id="plyr-js-js"></script>
<link rel="https://api.w.org/" href="/wp-json/">
<link rel="alternate" type="application/json" href="/wp-json/wp/v2/posts/4814">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml">
<meta name="generator" content="WordPress 6.2.2">
<link rel="canonical" href="/2023/05/reading-memory-in-grue/">
<link rel="shortlink" href="/?p=4814">
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2F%2F2023%2F05%2Freading-memory-in-grue%2F">
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2F%2F2023%2F05%2Freading-memory-in-grue%2F#038;format=xml">
<link type="text/css" rel="stylesheet" href="/wp-content/plugins/category-specific-rss-feed-menu/wp_cat_rss_style.css">
<!--Custom Styling-->
<style media="screen" type="text/css">.site-description { color: #222222}
.site-title, .entry-title, .post-title, .widget-title, .posts-navigation .nav-links { font-family: Arima Madurai}
 body { font-family: Lato}</style>
	<style id="acuarela-header-css" type="text/css"></style>
<style type="text/css" id="custom-background-css">body.custom-background { background-image: url("/wp-content/uploads/2020/10/low_contrast_linen.png"); background-position: left top; background-size: cover; background-repeat: no-repeat; background-attachment: fixed; }</style>
			<style type="text/css" id="wp-custom-css">@font-face {
  font-family: "Open Sans";
  font-weight: 400;
  font-style: normal;
  src: local("Open Sans Regular"), local("OpenSans-Regular"), url("/fonts/OpenSans-Regular.woff") format("woff");
}

@font-face {
  font-family: "Open Sans Bold";
  font-weight: 700;
  font-style: normal;
  src: local("Open Sans Bold"), local("OpenSans-Bold"), url("/fonts/OpenSans-Bold.woff") format("woff");
}

@font-face {
  font-family: "Open Sans Italic";
  font-weight: 400;
  font-style: normal;
  src: local("Open Sans Italic"), local("OpenSans-Italic"), url("/fonts/OpenSans-Italic.woff") format("woff");
}

:root{
	--primary: #01408e;
	--secondary: #3c5d5c;
	--initialLine: #ad2271;
	--drop: #903;
	--paraIndent: 1.25em;
	--note: #4d5b7c;
	--bq-color: #555555;
	--bq-back: #ededed;
	--sans: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
	--mono: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
    "Courier New", monospace;
}
/* For the top menu bar. */
.site-navigation a {
	padding: 0.9em 1.5em;
}

:where(html, body) {
	overscroll-behavior-y: none;
	cursor: url("/cursors/default.cur"), auto;
}

:where(p, h1, h2, h3, h4, h5, h6, blockquote, figcaption) {
	cursor: url("/cursors/text-select.cur"), auto;
}

:where(ul, ol) {
	margin: 1em 1em;
	text-align: justify;
	text-justify: inter-word;
	cursor: url("/cursors/text-select.cur"), auto;
}

:where(aside, article) a {
	cursor: url("/cursors/link-select.cur"), auto;
}

select, button, input,
.wp-element-button,
.darkmysite_switch,
.site-title,
.site-description {
	cursor: url("/cursors/link-select.cur"), auto;
}

::selection {
  color: #fff;
  background: rgba(0, 0, 0, 0.99);
}

main,
header {
	font-size: 1rem;
}

main {
	/*From here: https://fluidtypography.com/#app-get-started*/
	/* Settings: 414-1280; 16-20; 1.6-1.3*/
	font-size: clamp(1rem, 0.462vw + 0.88rem, 1.25rem);
line-height: clamp(1.6rem, 0.046vw + 1.588rem, 1.625rem);
}

article {
	font-family: var(--sans);
	line-height: 1.6;
  word-spacing: 0.16em;
}

h1:not(.site-title) {
  font-size: 2.5em;
  margin: 0.67em 0;
  text-align: center;
}

:where(h1, h2, h3, h4) {
	text-rendering: optimizeLegibility;
	line-height: 1.4em;
}

article :where(h2, h3) {
	margin-bottom: 0.7em;
}

p {
	font-size: 1.2em;
	text-align: justify;
	text-justify: inter-word;
}

p:first-of-type:first-line {
	color: var(--initialLine);
}

li {
  margin-bottom: 0.5em;
}

/* This makes sure the first line of blockquotes are not colored since in Wordpress, a blockquote content has a paragraph tag applied to it. */
:where(blockquote, footer, .comments-area) p:first-of-type:first-line {
	color: inherit;
}
:where(p, blockquote, img, pre, ul, ol) + p:not(.note) {
  text-indent: var(--paraIndent);
}
section > h3 + p::first-letter,
section > h2 + p::first-letter,
div.entry-content > p:not(.nostyle):first-child::first-letter {
	color: var(--drop);
  border-left: 2px solid var(--drop);
  border-top: 2px solid var(--drop);
  float: left;
  font-family: Georgia;
  font-size: 65px;
  line-height: 60px;
  padding-top: 4px;
  padding-right: 12px;
  padding-left: 3px;
}

:where(aside, article) a {
	color: var(--primary);
	text-underline-position: under;
	text-decoration: underline 2px;
	transition: all 0.3s linear;
  background: linear-gradient(to right, #00d1b1 0%, #278fc6 98%);
  background-size: 0px 2px;
  background-repeat: no-repeat;
  background-position: left 10%;
  text-shadow: 0;
}

article a:hover {
  background-size: 100% 2px;
  color: var(--secondary);
}

article a:focus {
  color: var(--secondary);
}

/* Handling external links to show an icon after them, but excluding links that are part of the TesterStories site. */

a[href*="http"]::after,
a[href*="https"]::after {
  content: "";
  width: 16px;
  height: 16px;
  margin-left: 4px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z'/%3E%3Cpath fill-rule='evenodd' d='M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z'/%3E%3C/svg%3E");
  background-position: center;
  background-repeat: no-repeat;
  background-size: contain;
  display: inline-block;
}

a[href^="https://www.linkedin.com/"]::after {
  content: none;
}

a[href^="https://testerstories.com/"]::after {
  display: none !important;
}

img.framed {
  --b: 10px;
  margin: 0 auto;
  padding: var(--b);
  border: calc(2 * var(--b)) solid #0000;
  border-radius: 25px;
  outline: 1px solid #000;
  outline-offset: calc(-1 * var(--b));
  background: conic-gradient(from 90deg at 1px 1px, #0000 90deg, #000 0);
}

img.backframed {
  margin: 0 auto;
  border: 3px solid black;
  box-shadow: -50px -50px 0 -40px #555555, 50px 50px 0 -40px #555555;
}

.note {
  border: 1px solid rgb(107, 113, 177);
  color: var(--note);
  border-radius: 16px;
  padding: 0.5em 0.8em;
  margin: 1.9em;
}

.post {
	background-color: white;
}

.entry-content li {
	font-size: 1.2em;
}

.simplequote {
	background: #fff url(/2023/05/reading-memory-in-grue/images/box_quote.png) no-repeat;
	padding: 5px;
	margin-top: 20px; margin-bottom: 20px;
	margin-left: 50px; margin-right: 50px;
	border: 3px solid #cecece;
	text-indent: 25px;
}

p.example {
	padding: 1ex;
	margin-right: 50px; margin-left: 50px;
	border: .5ex solid #808080;
	color: #000000;
	line-height: 1.2;
	text-indent: 0em;
}

#headquote blockquote {
	text-align: left;
	margin: 0 auto 20px auto;
	color: #555;
	background: #eee url(/2023/05/reading-memory-in-grue/images/quote_top.gif) no-repeat top left;
}

#headquote blockquote {
	width: 370px;
	font-size: 110%;
	letter-spacing: -1px;
	line-height: 1.2em;
}

#headquote #quote {
	margin-left: 40px;
	padding: 20px 20px 10px 20px;
	background: url(/2023/05/reading-memory-in-grue/images/quote_bottom.gif) no-repeat right bottom;
}

#headquote #author {
	margin: 0;
	text-align: center;
	padding: 0 0 10px 0;
	color: #999;
	font-size: 95%;
}

#headquote blockquote strong {
	color: #000;
	font-weight: normal;
}

/* Center images. */

img {
	display: block;
  margin: 0 auto;
}

img.smaller {
  width: 200px;
}

img.even-smaller {
  width: 100px;
}

table td.code {
  font-family: "Courier New", courier, monospace;
  font-size: 11.5px;
}

p.box {
	font-family: Georgia, "Times New Roman", Times, serif;
	text-align: justify;
	padding-top: 25px;
	margin: 0;
	line-height: 1.2;
}

pre.box {
	white-space: pre-wrap;
	background-color: white;
	border: 1px solid;
}

p.tip {
	padding-bottom: 10px; padding-top: 10px;
	padding-right: 10px; padding-left: 10px;
	border: 1px solid;
}

div.aside {
	padding-bottom: 10px; padding-top: 10px;
	padding-right: 10px; padding-left: 10px;
	margin-right: 50px; margin-left: 50px;
	border: 1px dotted;
}

div.aside pre {
	white-space: pre-wrap;
}

pre.view {
	font-family: "Courier New", Courier, monospace;
        //font-size: 16px;
	padding-bottom: 10px; padding-top: 10px;
	padding-right: 10px; padding-left: 10px;
	white-space: pre-wrap;
	background: rgb(255,255,255); /* Old browsers */
	background: -moz-linear-gradient(top,  rgba(255,255,255,1) 0%, rgba(229,229,229,1) 100%); /* FF3.6+ */
	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(100%,rgba(229,229,229,1))); /* Chrome,Safari4+ */
	background: -webkit-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(229,229,229,1) 100%); /* Chrome10+,Safari5.1+ */
	background: -o-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(229,229,229,1) 100%); /* Opera 11.10+ */
	background: -ms-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(229,229,229,1) 100%); /* IE10+ */
	background: linear-gradient(to bottom,  rgba(255,255,255,1) 0%,rgba(229,229,229,1) 100%); /* W3C */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e5e5e5',GradientType=0 ); /* IE6-9 */
	border: 1px solid;
	text-align: justify;
}

pre.view .string {
	color: #3366CC;
}

pre.view .sub {
        color: #8333FF;
}

pre.view .comment {
	color: #009900;
}

pre.view .highlight {
	background-color: #FFFF00;
	border: 1px solid;
	border-style: dotted;
}

pre.output .highlight {
	background-color: rgb(255,255,255);
	color: red;
	border: 1px solid;
	border-style: dotted;
}

pre.output {
	font-family: "Courier New", Courier, monospace;
        //font-size: 16px;
	padding-bottom: 10px; padding-top: 10px;
	padding-right: 10px; padding-left: 10px;
	white-space: pre-wrap;
	background: black;
	color: white;
}

blockquote {
  position: relative;
  width: 80%;
  margin: 50px auto;
  padding: 1.2em 30px 1.2em 55px;
  color: var(--bq-color);
  background-color: var(--bq-back);
  border-left: 8px solid #78c0a8;
  text-align: justify;
}

blockquote::before {
  position: absolute;
	left: 5px;
	top: -10px;
	/* Line height needed here to avoid the quote appearing out of place due to calculated line heights for the article. */
	line-height: 1.6;
	content: "\201C";
	color: #78c0a8;
	font-size: 4em;
}

blockquote::after {
	content: "";
}

blockquote span {
	display: block;
	color: #333333;
	font-style: normal;
  font-weight: bold;
  margin-top: 1em;
}

img.frame {
  --b: 10px;
  padding: var(--b);
  border: calc(2 * var(--b)) solid #0000;
  outline: 1px solid #000;
  outline-offset: calc(-1 * var(--b));
  border-radius: 25px;
  background: conic-gradient(from 90deg at 1px 1px, #0000 90deg, #000 0);
  display: block;
  margin: auto;
  margin-bottom: 1rem;
}

code {
  font-size: 0.9em;
  padding: 0.0625rem 0.5rem;
  border-radius: 0.125rem;
  border: 1px solid #d33a2c;
  box-shadow: 1px 1px #d33a2c, 2px 2px #d33a2c;
  margin: 0 0.25rem;
  color: #d33a2c;
  font-family: monospace;
}

pre {
  font-family: var(--mono);
  max-width: 100%;
	padding: 0;
}

pre code {
  word-spacing: normal;
  letter-spacing: normal;
  font-family: var(--mono);
  padding-left: 10px;
  color: #e9e9f4;
  background: #282936;
  display: block;
  max-width: 100%;
  overflow-x: scroll;
  /*font-size: 0.8em;*/

  border: 1px solid #282936;
  border-radius: 10px;
  box-shadow: 1px 1px #282936, 2px 2px #282936;
}

pre code::-webkit-scrollbar {
  -webkit-appearance: none;
  appearance: none;
}

pre code::-webkit-scrollbar:vertical {
  width: 11px;
}

pre code::-webkit-scrollbar:horizontal {
  height: 11px;
}

pre code::-webkit-scrollbar-thumb {
  border-radius: 8px;
  border: 2px solid white;
  background-color: rgba(0, 0, 0, 0.5);
}

/* The div part is only needed for long-form content that is pre-formatted. */

pre code div {
	line-height: 1.5em;
}

/* This would be for prefromatted material that is not literally from a game or simulation but is meant to indicate something about the details of the game or simulation. */

pre p {
  border: 2px solid grey;
  border-radius: 5px;
  padding: 0.8em;
	padding-top: 0;
	margin: 0;
}</style>
			</head>
	<body class="post-template-default single single-post postid-4814 single-format-standard custom-background wp-embed-responsive custom-background-image">
		<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-dark-grayscale"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0 0.49803921568627"></fefuncr><fefuncg type="table" tablevalues="0 0.49803921568627"></fefuncg><fefuncb type="table" tablevalues="0 0.49803921568627"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-grayscale"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0 1"></fefuncr><fefuncg type="table" tablevalues="0 1"></fefuncg><fefuncb type="table" tablevalues="0 1"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-purple-yellow"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0.54901960784314 0.98823529411765"></fefuncr><fefuncg type="table" tablevalues="0 1"></fefuncg><fefuncb type="table" tablevalues="0.71764705882353 0.25490196078431"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-blue-red"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0 1"></fefuncr><fefuncg type="table" tablevalues="0 0.27843137254902"></fefuncg><fefuncb type="table" tablevalues="0.5921568627451 0.27843137254902"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-midnight"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0 0"></fefuncr><fefuncg type="table" tablevalues="0 0.64705882352941"></fefuncg><fefuncb type="table" tablevalues="0 1"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-magenta-yellow"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0.78039215686275 1"></fefuncr><fefuncg type="table" tablevalues="0 0.94901960784314"></fefuncg><fefuncb type="table" tablevalues="0.35294117647059 0.47058823529412"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-purple-green"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0.65098039215686 0.40392156862745"></fefuncr><fefuncg type="table" tablevalues="0 1"></fefuncg><fefuncb type="table" tablevalues="0.44705882352941 0.4"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-blue-orange"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0.098039215686275 1"></fefuncr><fefuncg type="table" tablevalues="0 0.66274509803922"></fefuncg><fefuncb type="table" tablevalues="0.84705882352941 0.41960784313725"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg>		<div id="container" class="site container">
	<header id="masthead" class="site-header animated fadeInDown" role="banner">

	<a class="screen-reader-text skip-link" href="#main-content">Skip to content</a>
	<a class="screen-reader-text skip-link" href="#sidebar-widget-area">Skip to sidebar</a>
	<a class="screen-reader-text skip-link" href="#page-footer">Skip to footer</a>
	<div id="site-identity" class="site-identity">
		<a href="/" class="home-link animated fadeIn" title="Stories from a Software Tester" rel="home">
			<div class="title-description">
				<h1 class="site-title">Stories from a Software Tester</h1>
				<h2 class="site-description">Twice upon a time, in another space, no distance in any direction from here &#8230;</h2>
			</div>
		</a> 

	</div>
<!--/site-identity-->

	<nav id="nav-menu" class="site-navigation main-navigation" role="navigation" aria-label="Main Navigation">
		<button id="nav-button" class="menu-toggle" role="button">
			<span class="screen-reader-text">Menu</span>
			<span class="genericon" aria-hidden="true"></span>
		</button>
		<ul id="primary-menu" class="primary-menu">
<li id="menu-item-3923" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-3923"><a href="/">Home</a></li>
<li id="menu-item-2051" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2051"><a href="/about-tester-stories/">About Tester Stories</a></li>
<li id="menu-item-2050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2050"><a href="/who-am-i/">Who Am I</a></li>
<li id="menu-item-2048" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2048"><a href="/just-for-fun/">Just For Fun</a></li>
</ul>	</nav><!--/navigation-->


<form role="search" method="get" class="search-form" action="https://testerstories.com/">
	<label>
		<span class="screen-reader-text">Search for:</span>
		<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:">
	</label>
	<button type="submit" class="search-submit"><span class="genericon genericon-search" aria-hidden="true"></span><span class="screen-reader-text">Search</span></button>
</form>
</header><!--/header-->

<main id="main-content" class="main-content" role="main">
<article id="post-4814" class="post-4814 post type-post status-publish format-standard hentry category-zmachine">
<header class="entry-header">
	<span class="entry-meta"><span class="cat-links"><span class="screen-reader-text">Published in</span><span class="genericon genericon-category" aria-hidden="true"></span><a href="/category/zmachine/" rel="category tag">Z-Machine</a></span></span><h1 class="entry-title">Reading Memory in Grue</h1>	<span class="byline">
	Written by <a href="/author/administrator/" class="entry-author" rel="author">Jeff Nyman</a>	</span><!-- .byline -->
	<span class="entry-meta">
	<span class="genericon genericon-time" aria-hidden="true"></span><a href="/2023/05/31/" rel="bookmark" class="entry-date"><time datetime="2023-05-31T03:45:40-05:00">31 May 2023</time></a>		<span class="comments-link">
			<span class="genericon genericon-comment" aria-hidden="true"></span>
			<a href="/2023/05/reading-memory-in-grue/#respond">Leave a comment</a>		</span>
		</span><!-- .entry-meta -->
</header><!-- .entry-header -->

	<div class="entry-content">
		<p>We have to talk about how to access memory so we can read values from it. And to do that I have to talk a little about a Z-Machine area of memory called the header. With that, I&#8217;ll show you some helper methods you&#8217;ll want to have in place. Then we&#8217;ll deep dive into the memory considerations and, finally, we&#8217;ll come up for air by showing how to represent some of the Z-Machine memory in Grue.</p>
<p><span id="more-4814"></span></p>
<h2>A Little on the Header</h2>
<p>First, let&#8217;s talk about that header part. The Z-Machine specification says:</p>
<blockquote><p>
By tradition, the first 64 bytes are known as the ‚Äúheader‚Äù.
</p></blockquote>
<p>A later part says:</p>
<blockquote><p>
The header table summarises those locations in the Z-machine‚Äôs header which an interpreter must deal with.
</p></blockquote>
<p>I&#8217;ll likely have quite a bit to say on the header as we go on. But for now just know that you will want to read some information from this header in your Z-Machine implementation. That means reading from memory. In this case, I&#8217;m referring to the zcode memory or the &#8220;story state&#8221; that we talked about in the <a href="/2023/05/memory-and-state-in-grue/">previous post</a>.</p>
<h2>Reading from Memory</h2>
<p>The specification says:</p>
<blockquote><p>
There are three kinds of address in the Z-machine, all of which can be stored in a 2-byte number: byte addresses, word addresses and packed addresses.
</p></blockquote>
<p>What you&#8217;ll need are helper methods to read each of those address types. Here is how I represent those on the Memory class:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f3e352c8d1006409974" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Python</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
class Memory:
    def __init__(self, data: bytes) -&gt; None:
        self.data: bytes = data

    def read_byte(self, address: int) -&gt; int:
        return self.data[address]

    def read_bytes(self, address: int, length: int) -&gt; bytes:
        return self.data[address : address + length]

    def read_word(self, address: int) -&gt; int:
        return (self.data[address] &lt;&lt; 8) | self.data[address + 1]

    def read_packed(self, address: int, is_routine: bool) -&gt; int:
        if self.version &lt; 4:
            return 2 * address

        if self.version &lt; 6:
            return 4 * address

        if self.version &lt; 8 and is_routine:
            return 4 * address + (8 * self.routine_offset)

        if self.version &lt; 8:
            return 4 * address + (8 * self.strings_offset)

        return 8 * address</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-14">14</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-15">15</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-16">16</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-17">17</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-18">18</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-19">19</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-20">20</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-21">21</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-22">22</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-23">23</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-24">24</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-25">25</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-26">26</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d1006409974-27">27</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-1">
<span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Memory</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-2">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">bytes</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-3">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">data</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">bytes</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">data</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-4">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-5">
<span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">read_byte</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-6">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">data</span><span class="crayon-sy">[</span><span class="crayon-v">address</span><span class="crayon-sy">]</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-7">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-8">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">read_bytes</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">length</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">bytes</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-9">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">data</span><span class="crayon-sy">[</span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">length</span><span class="crayon-sy">]</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-10">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-11">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">read_word</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-12">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">data</span><span class="crayon-sy">[</span><span class="crayon-v">address</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">&lt;&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">8</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">data</span><span class="crayon-sy">[</span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-13">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-14">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">read_packed</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">is_routine</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">bool</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-15">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">version</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-16">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-e">address</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-17">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-18">
<span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">version</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-19">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-e">address</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-20">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-21">
<span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">version</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">8</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">is_routine</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-22">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">8</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">routine_offset</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-23">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-24">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">version</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">8</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-25">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">8</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">strings_offset</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-26">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d1006409974-27">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-cn">8</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-v">address</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0016 seconds] -->
<p></p>
<p>You can see <code>self.data</code> contains the binary data of a zcode program so each of those methods is reading from that binary data. The packed address part will require a bit more explanation but, for now, we can hold off on that.</p>
<h2>Read from the Header</h2>
<p>Let&#8217;s consider what I might read from memory:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f3e352c8d7392407734" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Python</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
def __init__(self, data: bytes) -&gt; None:
    self.data: bytes = data

    self.version: int = self.read_byte(0x00)
    self.release_number: int = self.read_word(0x2)
    self.serial_code: bytes = self.read_bytes(0x12, 6)</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d7392407734-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d7392407734-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d7392407734-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d7392407734-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d7392407734-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d7392407734-6">6</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d7392407734-1">
<span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">bytes</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d7392407734-2">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">data</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">bytes</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">data</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d7392407734-3">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d7392407734-4">
<span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">version</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">read_byte</span><span class="crayon-sy">(</span><span class="crayon-cn">0x00</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d7392407734-5">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">release_number</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">read_word</span><span class="crayon-sy">(</span><span class="crayon-cn">0x2</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d7392407734-6">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">serial_code</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">bytes</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">read_bytes</span><span class="crayon-sy">(</span><span class="crayon-cn">0x12</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-sy">)</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p></p>
<p>The specification says:</p>
<blockquote><p>
The first byte of any story file, and so the byte at memory address 0, always contains the <strong>version number</strong> of the Z-machine to be used.
</p></blockquote>
<p>So that&#8217;s what&#8217;s being queried above and stored in <code>self.version</code>. The specification also says:</p>
<blockquote><p>
Story files are mechanically best identified by their release number and serial code, which are written into the header information at the bottom of Z-machine memory. The release number can be anything between 0¬†and 65535 but is usually between 1¬†and 100. The serial code can consist of any six textual characters but is usually the date of compilation, arranged YYMMDD: thus 970619 refers to June 19th, 1997.
</p></blockquote>
<p>Those values are what I&#8217;m getting in the <code>self.release_number</code> and <code>self.serial_code</code> instance variables.</p>
<p>I do have some tests in place to check this stuff.</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f3e352c8d8908921078" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Python</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
def test_determine_zcode_version(zork1_z3) -&gt; None:
    from grue.__main__ import Loader, Memory

    data = Loader.load(str(zork1_z3))

    memory = Memory(data)

    expect(memory.version).to(equal(3))


def test_determine_zcode_release_number(zork1_z3) -&gt; None:
    from grue.__main__ import Loader, Memory

    data = Loader.load(str(zork1_z3))

    memory = Memory(data)

    expect(memory.release_number).to(equal(88))


def test_determine_zcode_serial_code(zork1_z3) -&gt; None:
    from grue.__main__ import Loader, Memory

    data = Loader.load(str(zork1_z3))

    memory = Memory(data)

    expect(int(memory.serial_code.decode("utf-8"))).to(equal(840726))</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-14">14</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-15">15</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-16">16</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-17">17</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-18">18</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-19">19</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-20">20</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-21">21</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-22">22</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-23">23</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-24">24</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-25">25</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-26">26</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-27">27</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8d8908921078-28">28</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-1">
<span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">test_determine_zcode_version</span><span class="crayon-sy">(</span><span class="crayon-v">zork1_z3</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-2">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">grue</span><span class="crayon-sy">.</span><span class="crayon-k ">__main__</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">Loader</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">Memory</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-3">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-4">
<span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Loader</span><span class="crayon-sy">.</span><span class="crayon-e">load</span><span class="crayon-sy">(</span><span class="crayon-k ">str</span><span class="crayon-sy">(</span><span class="crayon-v">zork1_z3</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-5">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-6">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">memory</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Memory</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-7">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-8">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">memory</span><span class="crayon-sy">.</span><span class="crayon-v">version</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">to</span><span class="crayon-sy">(</span><span class="crayon-e">equal</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-9">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-10">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-11">
<span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">test_determine_zcode_release_number</span><span class="crayon-sy">(</span><span class="crayon-v">zork1_z3</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-12">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">grue</span><span class="crayon-sy">.</span><span class="crayon-k ">__main__</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">Loader</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">Memory</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-13">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-14">
<span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Loader</span><span class="crayon-sy">.</span><span class="crayon-e">load</span><span class="crayon-sy">(</span><span class="crayon-k ">str</span><span class="crayon-sy">(</span><span class="crayon-v">zork1_z3</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-15">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-16">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">memory</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Memory</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-17">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-18">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">memory</span><span class="crayon-sy">.</span><span class="crayon-v">release_number</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">to</span><span class="crayon-sy">(</span><span class="crayon-e">equal</span><span class="crayon-sy">(</span><span class="crayon-cn">88</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-19">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-20">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-21">
<span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">test_determine_zcode_serial_code</span><span class="crayon-sy">(</span><span class="crayon-v">zork1_z3</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-22">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">grue</span><span class="crayon-sy">.</span><span class="crayon-k ">__main__</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">Loader</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">Memory</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-23">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-24">
<span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Loader</span><span class="crayon-sy">.</span><span class="crayon-e">load</span><span class="crayon-sy">(</span><span class="crayon-k ">str</span><span class="crayon-sy">(</span><span class="crayon-v">zork1_z3</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-25">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-26">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">memory</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Memory</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-27">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8d8908921078-28">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-k ">int</span><span class="crayon-sy">(</span><span class="crayon-v">memory</span><span class="crayon-sy">.</span><span class="crayon-v">serial_code</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">"utf-8"</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">to</span><span class="crayon-sy">(</span><span class="crayon-e">equal</span><span class="crayon-sy">(</span><span class="crayon-cn">840726</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0009 seconds] -->
<p></p>
<p>Those tests rely on the following fixture:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f3e352c8da810000855" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Python</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
@pytest.fixture()
def zork1_z3(pytestconfig) -&gt; Path:
    tests_dir = pytestconfig.rootdir / "tests"
    fixtures_dir = tests_dir / "fixtures"
    return fixtures_dir / "zork1.z3"</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8da810000855-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8da810000855-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8da810000855-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8da810000855-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8da810000855-5">5</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8da810000855-1">
<span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8da810000855-2">
<span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">zork1_z3</span><span class="crayon-sy">(</span><span class="crayon-v">pytestconfig</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">Path</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8da810000855-3">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tests_dir</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pytestconfig</span><span class="crayon-sy">.</span><span class="crayon-v">rootdir</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-s">"tests"</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8da810000855-4">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">fixtures_dir</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tests_dir</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-s">"fixtures"</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8da810000855-5">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">fixtures_dir</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-s">"zork1.z3"</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p></p>
<p>This is running against one of my reference implementation zcode binaries. And, sure enough, if I open that reference program in a Z-Machine interpreter, I see:</p>
<p><img decoding="async" src="/grue/zork1-z3-info.png"></p>
<p>So this tells me my overall logic is sound on how to develop and test. It also shows me that I&#8217;m correctly reading memory. Let&#8217;s talk a little more about this memory that we&#8217;re reading. And this is where we have to do the deep dive I promised earlier.</p>
<h2>Memory Considerations</h2>
<p>The specification, referring to zcode programs back in the late 1970s and early 1980s, says:</p>
<blockquote><p>
They were still perhaps 100K long, too large for the memory of the home computers of their day, and the Z-machine seems to have made the first usage of virtual memory on a microcomputer.
</p></blockquote>
<p>That &#8220;first usage&#8221; bit is wrong. In fact, the concept of virtual memory was known at that time. Virtual memory first saw use in an early supercomputer developed at the University of Manchester called the <a href="https://en.wikipedia.org/wiki/Atlas_(computer)">Atlas</a>, officially commissioned in 1962. As a side note, perhaps, it&#8217;s also worth noting that even in 1979, when the Z-Machine first came to be, the idea of a virtual machine was not unheard of. There are two relevant bits of history here.</p>
<ul>
<li>Between 1965 and 1967, a team at IBM had worked in close partnership with MIT&#8217;s Lincoln Laboratory to create an operating system called <a href="https://en.wikipedia.org/wiki/IBM_CP-40">CP-40</a>. This operating system simulated the operations of an IBM mainframe entirely in software. CP-40 eventually became the basis of the appropriately named <a href="https://en.wikipedia.org/wiki/VM_(operating_system)">VM operating system</a>, which was first released by IBM in 1972.</li>
</ul>
<ul>
<li>Not only that, but in 1978, a Pascal implementation known as <a href="https://en.wikipedia.org/wiki/UCSD_Pascal">UCSD Pascal</a> introduced something called the <a href="https://en.wikipedia.org/wiki/P-code_machine">P-Machine</a>. This was a portable virtual machine that allowed programs written in UCSD Pascal to run on many different microcomputers, including even the Apple II following the release of Apple Pascal in August of 1979.</li>
</ul>
<p>In fact, it was that idea of the P-Machine that became a major influence on Infocom&#8217;s own virtual machine.</p>
<p>In a virtual memory system, the crucial point is that each program doesn&#8217;t have a view of the host computer&#8217;s <em>actual</em> physical memory. Instead the program has available to it an idealized memory map. This view, being idealized, may have very little to do with the actual layout of its host computer&#8217;s physical memory. When the program reads from and writes to pieces of this map, it&#8217;s the job of the host machine to automatically translate the virtual addresses into real addresses inside of its physical memory.</p>
<p>But what does this all actually mean?</p>
<h2>Memory is Numbers</h2>
<p>The specification says:</p>
<blockquote><p>
In the Z-machine, numbers are usually stored in 2¬†bytes (in the form most-significant-byte first, then least-significant) and hold any value in the range <strong>$0000</strong> to <strong>$ffff</strong> (0¬†to 65535 decimal).
</p></blockquote>
<p>The specification uses a convention where a <code>$</code> indicates hex values. In most computer languages, you&#8217;ll see those prefixed instead with <code>0x</code>.</p>
<p>At any given time, the Z-Machine typically has a total addressable space of 64K (65,536 bytes), which corresponds to the maximum addressable memory within the Z-Machine&#8217;s execution environment. That seems pretty limited, right? Of course, you have to keep in mind the 8-bit machines that the Z-Machine was designed to run on. This being said, consider that the specification also says this:</p>
<blockquote>
<p>
The maximum permitted length of a story file depends on the Version, as follows:</p>
<p>Versions 1-3  128<br>
Versions 4-5  256<br>
Versions 6-8  512
</p>
</blockquote>
<p>The specification gives no units but those do refer to kilobytes. So how do those values reconcile with the maximum 64K address space?</p>
<p>The Z-Machine could manage and use <em>multiple</em> 64K batches or memory groups, allowing for storage that exceeded the 64K limit. This was achieved through memory management techniques known as paging or swapping. The Z-Machine interpreter could then divide the available memory into smaller chunks or &#8220;pages,&#8221; each containing 64K of addressable space. These pages could be dynamically loaded or swapped in and out of memory as needed, enabling the Z-Machine to effectively access and utilize a larger overall storage capacity.</p>
<p>So the idea here was that the Z-Machine could address up to 64K of memory at any given time, but the total memory required by a given program might be much larger than this. In fact, the memory state of a zcode program was typically more than would fit into an 8-bit machine like the TRS-80, Commodore 64 or the Apple II as the specification was indicating above.</p>
<p>I&#8217;m going to describe how the Z-Machine handled all this but I&#8217;m going to preface this by saying that just about all of these memory considerations are entirely meaningless if you&#8217;re executing your Z-Machine implementation on modern hardware. Some people, however, do write implementations for older hardware or emulators of older hardware.</p>
<p>Consider <a href="https://github.com/johanberntsson/ozmoo">Ozmoo</a> which provides an interpreter that can run on a Commodore 64. Another interesting example is <a href="https://github.com/nmosier/zemu">zemu</a>, a Z-Machine emulator for TI-84+ CE calculators. Or consider <a href="https://github.com/thwill1000/zmim">Z-MIM</a>, a Z-Machine emulator written in MMBasic, for the Colour Maximite 2. Another interesting example is the <a href="https://github.com/ZContent/A2Z_Machine">A2Z Machine</a>, which is an Arduino port. Yet another interesting example is <a href="https://github.com/charcole/Z3">Z3</a>, which is a Z-Machine emulator written in Verilog, allowing it to run on a Field Programmable Gate Array (FPGA).</p>
<h2>Memory Windows and Switching</h2>
<p>To accommodate the memory constraints, the Z-Machine implemented a system of &#8220;memory windows.&#8221; These were essentially smaller sections of memory that could be swapped in and out of the 64K address space as needed. The memory windows were typically used to hold the zcode program&#8217;s code, data, and stack, as well as any additional data structures required by the program.</p>
<p>Thus Infocom&#8217;s Z-Machine interpreters typically used a technique called &#8220;bank switching.&#8221; When the Z-Machine needed to access a part of memory that wasn&#8217;t currently in the active bank, it would &#8220;switch&#8221; to the appropriate bank by copying the contents of the current bank&#8217;s memory window to disk, loading the new bank&#8217;s memory window from disk, and then continuing execution.</p>
<h2>Addressing the Memory</h2>
<p>With memory available it was, of course, necessary to be able to access it. In the context of the Z-Machine, a 16-bit pointer was used to address memory locations in a program&#8217;s virtual memory space.</p>
<p>In the case of Java, by way of counter-example, the JVM typically uses a 32-bit or 64-bit address space, depending on the JVM implementation and the architecture of the system it runs on. This means that the pointer size in Java can be 32 bits or 64 bits, respectively. The specific pointer size affects the maximum amount of memory that can be addressed by the JVM.</p>
<p>That pointer size wouldn&#8217;t work back in the late 1970s and early 1980s, where you had 8-bit systems for the home use. Many home computers and early microcomputers of this era, such as the Commodore 64, ZX Spectrum, and Apple II, had 8-bit processors. These systems commonly used 16-bit addressing, which means they had 16-bit pointers. The mid to late 1980s saw the rise of 16-bit systems, including the IBM PC/AT with the Intel 80286 processor and the Commodore Amiga. These systems also generally used 16-bit addressing.</p>
<p>However, given the above discussion of memory, you might see an issue here.</p>
<p>The issue is that the Z-Machine&#8217;s memory state size can be larger than can be addressed with a 16-bit pointer. To address this, the Z-Machine used a segmented memory model and this is where memory was divided into those smaller chunks called &#8220;pages&#8221; I mentioned before. The interpreter kept track of which page a particular memory address belonged to, and used a separate pointer to index into the current page. This allowed the interpreter to access a much larger memory space than would be possible with a single 16-bit pointer.</p>
<p>Here&#8217;s a visual representation to illustrate this concept:</p>
<pre><code>
+----------------------------------+   +----------------------------------+
|         Memory Page 1            |   |           Memory Page 2          |
+----------------------------------+   +----------------------------------+
| 16-bit Pointer (0x0000 - 0xFFFF) |   | 16-bit Pointer (0x0000 - 0xFFFF) |
|                                  |   |                                  |
|      Addressable Range           |   |      Addressable Range           |
|   0x0000 - 0xFFFF (64K Bytes)    |   |   0x0000 - 0xFFFF (64K Bytes)    |
+----------------------------------+   +----------------------------------+
</code></pre>
<p>In the above visual, each memory page represents a separate region of memory with its own addressable range. The 16-bit pointer can access the entire addressable range within each page, covering the range from <code>0x0000</code> to <code>0xFFFF</code> (64K bytes).</p>
<p>If the memory space required by a Z-Machine program exceeded the capacity of a single memory page, additional pages could be used. As stated above, the Z-Machine employed memory banking or paging techniques to switch between these pages and access different regions of memory. Hopefully the above visual helps you conceptualize what that would have looked like.</p>
<h2>Memory Regions</h2>
<p>The specification, referring to the memory map, says:</p>
<blockquote><p>
This is divided into three regions: ‚Äúdynamic‚Äù, ‚Äústatic‚Äù and ‚Äúhigh‚Äù.
</p></blockquote>
<p>The concepts of &#8220;pages&#8221; and &#8220;banks&#8221; are related to the memory regions of the Z-Machine. In particular, the memory management scheme of the Z-Machine involved dividing the memory into different regions, each with its own characteristics and limitations.</p>
<p>Let&#8217;s first look at some of Grue&#8217;s code that gets these regions. This is very similar to what I showed you earlier:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f3e352c8db559141260" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Python</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
class Memory:
    def __init__(self, data: bytes) -&gt; None:
        ...
        self.dynamic: int = 0
        self.static: int = self.read_word(0x0E)
        self.high: int = self.read_word(0x04)
        ...</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8db559141260-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8db559141260-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8db559141260-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8db559141260-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8db559141260-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8db559141260-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8db559141260-7">7</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8db559141260-1">
<span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Memory</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8db559141260-2">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">bytes</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8db559141260-3">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8db559141260-4">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">dynamic</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8db559141260-5">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">static</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">read_word</span><span class="crayon-sy">(</span><span class="crayon-cn">0x0E</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8db559141260-6">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">high</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">read_word</span><span class="crayon-sy">(</span><span class="crayon-cn">0x04</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8db559141260-7">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p>
<p>But how did I know to read those particular addresses? That&#8217;s from the specification:</p>
<blockquote><p>
Dynamic memory begins from byte address $00000 and runs up to the byte before the byte address stored in the word at $0e in the header.
</p></blockquote>
<p>And:</p>
<blockquote><p>
High memory begins at the ‚Äúhigh memory mark‚Äù (the byte address stored in the word at $04 in the header) &#8230;
</p></blockquote>
<p>The &#8220;static&#8221; memory region is where the read-only data of the program file is stored, including the program&#8217;s text strings, which, not surprisingly, made up the bulk of <em>text</em> adventures. The &#8220;dynamic&#8221; memory region, on the other hand, is used for the runtime state of the program, essentially involving mutable data. In the context of a text adventure game, this would be things like the player&#8217;s current location, inventory items, and so on.</p>
<p>Dynamic memory is allocated using those 16-bit pointers talked about earlier and can be accessed directly. However, as it turns out, certain parts of static memory may have required 17-bit pointers to address all the necessary data. To access these parts of memory, the Z-Machine used indirect addressing, where a 16-bit pointer points to a table. And that table contains 17-bit pointers to the actual data. The Z-Machine interpreter then used bank switching to manage the different regions of memory and handle that indirect addressing.</p>
<p>It&#8217;s worth noting that the least significant bit of a 17-bit pointer is always 0 in this context. This is because the Z-Machine memory is divided into 2-byte units, which means that every address in memory is an even number. By setting the least significant bit of a 17-bit pointer to 0, the Z-Machine ensured that all addresses accessed with 17-bit pointers were aligned to these 2-byte units. This alignment was very important for efficient memory access since unaligned memory accesses could be slower and less efficient and that meant quite a bit when dealing with the 8-bit machines of the time.</p>
<p>Because the Z-Machine used 2-byte units for addressing memory, every address had to be divisible by 2. So to access anything beyond the first 64K of memory, the Z-Machine used those 17-bit addresses with the bottom bit set to 0, allowing for the address to be represented as a 2-byte value. This introduced a constraint that all memory addresses beyond 64K had to start on an even boundary.</p>
<h2>Packing Addresses</h2>
<p>This takes us into the idea of address packing, which I briefly mentioned earlier when I showed you the <code>read_packed()</code> helper method. The term &#8220;packed address&#8221; in the context of the Z-Machine refers to the fact that addresses in memory are stored using a variable-length encoding scheme that packs multiple address bits into a single byte or word. This was done in order to save memory space. The packed address encoding scheme allowed the Z-Machine to use a smaller memory footprint without sacrificing addressability.</p>
<p>That term of &#8220;packed address&#8221; refers specifically to the 17-bit addresses used for accessing memory beyond 64K, and the fact that they are stored as 2-byte units with the bottom bit of the first byte always set to 0. Packed addresses are <em>not</em> relevant to the 16-bit addresses used for memory within the first 64K of the Z-Machine memory.</p>
<p>Now when I just said that certain addresses above 64K are stored using &#8220;a variable-length encoding scheme,&#8221; let&#8217;s be clear on what I mean by that. This means that the actual number of bytes used to store the address may vary depending on the value of the address being stored. In other words, some addresses may require more bytes to be stored than others. For example, if the address being stored is less than <code>0x10000</code> (i.e., less than 64K), it can be stored in 2 bytes using a standard 16-bit pointer. However, if the address is greater than or equal to <code>0x10000</code>, then it can&#8217;t be stored in 2 bytes and a variable-length encoding scheme must be used.</p>
<p>One common encoding scheme was to use &#8230; you may have guessed it! &#8230; a 17-bit value with the low bit set to 0 to indicate that it&#8217;s a packed address. Exactly what I just described earlier. If the 17-bit value is less than <code>0x1F000</code>, then the packed address is just the 17-bit value shifted left by 1 bit. However, if the 17-bit value is greater than or equal to <code>0x1F000</code>, then it&#8217;s necessary to use more than one byte to store the packed address.</p>
<p>In that latter case, the packed address consists of the high 5 bits of the 17-bit value in the first byte and the low 8 bits of the 17-bit value in the second byte. And thus a variable-length encoding scheme is used to store addresses that are greater than or equal to <code>0x10000</code> and the encoding scheme used depends on the value of the address being stored.</p>
<p>You might wonder why I used the value <code>0x1F000</code> as my example. I did that specifically to illustrate how an address above 64K can be stored using a variable-length encoding scheme. In this scheme, the high-order bit of the 16-bit address field is set to 1 to indicate that the address is encoded using two bytes. The remaining 15 bits of the address field are used to store the 15 least significant bits of the actual address. The remaining 2 bits of the actual address are stored in the next byte, which is then referred to as the &#8220;packed address byte.&#8221;</p>
<p>So for the example of <code>0x1F000</code>, the high-order bit of the 16-bit address field would be set to 1 to indicate that the address is encoded using two bytes. The remaining 15 bits would store the 15 least significant bits of the actual address, which in this case is <code>0x0F000</code>. The remaining 2 bits (<code>0x10</code>) would be stored in the packed address byte, resulting in a packed address of <code>0x1F080</code>.</p>
<p>Yikes!</p>
<p>Yeah, all of the above can be quite a bit to take in but it&#8217;s central to understanding how the Z-Machine was constructed given the range of limited resource computing platforms it had to be capable of operating on.</p>
<h2>Addressing Memory Regions</h2>
<p>How all this worked with a Z-Machine interpreter was that the dynamic memory of a zcode program would be kept in physical memory, while the static memory was paged in and out as needed. Consistent with the above description, the static memory was divided into &#8220;pages,&#8221; and each page was loaded from the zcode program into memory when it was needed. When the Z-Machine needed to access data on a page that wasn&#8217;t currently loaded, it would trigger a page fault, which would cause the interpreter to load the necessary page from the zcode program into memory, and then continue execution of the program.</p>
<p>Again, consistent with all of the above material, the Z-Machine stores <em>all</em> data &mdash; including instructions, strings, numbers, and addresses &mdash; as 2-byte units or &#8220;words.&#8221; In cases where only one byte is needed to store data, a whole 2-byte word would still be used to store that data, with the other byte left unused. However, when accessing the memory, the Z-Machine would only need to reference the single byte that contains the actual data, and ignore the other byte.</p>
<p>You might wonder: isn&#8217;t that potentially wasteful?</p>
<p>Indeed, this could result in some memory wastage if there were many instances where only one byte is needed but two bytes were used. This is especially true if the program required a lot of memory for its data. However, using a uniform word size simplified memory management and access, which was clearly a trade-off deemed to be worth making. Additionally, some Z-Machine story files use compression techniques to reduce the size of the file, which mitigated the memory usage impact of using 2-byte words.</p>
<p>From the practical side of things in terms of implementing a Z-Machine, it&#8217;s necessary to know that a word is stored as two bytes in big-endian byte order, meaning the most significant byte (MSB) is stored first, followed by the least significant byte (LSB). For example, if the word <code>0xABCD</code> is stored in memory, it would be stored as two bytes <code>0xAB</code> followed by <code>0xCD</code>. Thus when you read a word from memory, you need to combine these two bytes to form the original word.</p>
<h2>Addressing Memory Regions</h2>
<p>In your Z-Machine implementation, it&#8217;s important to note that the first 64K of static memory can be accessed using 16-bit pointers, just like the dynamic memory.</p>
<p>The high memory that the specification mentions is essentially a contiguous block of memory that is a subset of the static memory, and its start is indicated by the &#8220;high memory mark.&#8221; It&#8217;s a special part of the static memory because it can only be accessed using 17-bit pointers due to its location beyond the 64K address range that can be addressed with 16-bit pointers.</p>
<p>One other thing that&#8217;s interesting is that the specification says the following:</p>
<blockquote><p>
Note that the total of dynamic plus static memory must not exceed 64K. (In fact, 64K minus 2 bytes.) This is the most serious limitation on the Z-machine.
</p></blockquote>
<p>The reason for subtracting 2 bytes from the maximum memory size is because of the way that memory addressing works in the Z-Machine. As discussed many times now, the Z-Machine uses 16-bit addresses to refer to memory locations, which means that the maximum addressable memory space is 2<sup>16</sup> = 64K. However, the Z-Machine also uses the top bit of each address to indicate whether the address refers to static or dynamic memory.</p>
<p>What this means is that the actual maximum addressable space for static and dynamic memory separately is 2<sup>15</sup> = 32K. To ensure that the total memory size does not exceed the 64K limit, the Z-Machine subtracts 2 bytes from the maximum size. This leaves a total of 64K &#8211; 2 = 65534 bytes of addressable memory space.</p>
<p>But you also read that the maximum permitted length of a story file for versions 1 to 3 is 128K. So is the above saying that 64K (or 64K minus 2) is the only addressable space? Thus is it the case that the remaining 64K, if it&#8217;s used, would be paged in and out of memory?</p>
<p>The answer is yes!</p>
<p>The maximum permitted size of a story file for versions 1 to 3 is indeed 128K. However, due to the addressing limitations of these versions of the Z-Machine, only 64K (or 64K minus 2) of memory can be directly addressed at any given time. If more than 64K of memory is needed, the story file can be paged in and out of memory, typically by using special instructions provided by the interpreter. This allows the program to use more than 64K of memory, but requires additional overhead to manage the paging of data in and out of memory.</p>
<p>What I just said here in this section is restating some of what I said above but showing you this in context of the memory regions. So I hope this draws some of the distinctions I made here a bit clearer when you read the specification.</p>
<h2>Implementing Checks</h2>
<p>What all of this leads to are some various checks you can consider making around the zcode program you are loading up. For example, you can check if the zcode version is one of the allowed versions (which would be from 1 through 8):</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f3e352c8df402825725" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Python</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
def _version_check(self) -&gt; None:
    if self.version not in range(1, 9):
        raise RuntimeError(f"unsupported Z-Machine version of {self.version} found")</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8df402825725-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8df402825725-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8df402825725-3">3</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8df402825725-1">
<span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">_version_check</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8df402825725-2">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">version </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-k ">range</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">9</span><span class="crayon-sy">)</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8df402825725-3">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">raise</span><span class="crayon-h"> </span><span class="crayon-k ">RuntimeError</span><span class="crayon-sy">(</span><span class="crayon-i">f</span><span class="crayon-s">"unsupported Z-Machine version of {self.version} found"</span><span class="crayon-sy">)</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p></p>
<p>Here&#8217;s another one for checks on the memory that the specification mentions:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f3e352c8e1881105221" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Python</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
def _memory_checks(self) -&gt; None:
    header_size: int = 64

    # There is a minimum size to a zcode program in that it must be able
    # to accommodate a 64 byte header.

    if len(self.data) &lt; header_size:
        raise RuntimeError("dynamic memory is below required 64 bytes")

    # The specification indicates that dynamic memory must contain at
    # least 64 bytes to accommodate the header.

    if self.static &lt; header_size:
        raise RuntimeError("static memory begins before byte 64")

    # The specification indicates that the total of dynamic plus static
    # memory must not exceed 64K minus 2 bytes.

    dynamic_size: int = self.static - 1 - self.dynamic + 1

    if (dynamic_size + self.static) &gt; 65534:
        raise RuntimeError("memory exceeds addressable memory space")</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-14">14</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-15">15</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-16">16</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-17">17</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-18">18</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-19">19</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-20">20</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-21">21</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e1881105221-22">22</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-1">
<span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">_memory_checks</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-2">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">header_size</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">64</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-3">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-4">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c"># There is a minimum size to a zcode program in that it must be able</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-5">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c"># to accommodate a 64 byte header.</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-6">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-7">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">header_size</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-8">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">raise</span><span class="crayon-h"> </span><span class="crayon-k ">RuntimeError</span><span class="crayon-sy">(</span><span class="crayon-s">"dynamic memory is below required 64 bytes"</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-9">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-10">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c"># The specification indicates that dynamic memory must contain at</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-11">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c"># least 64 bytes to accommodate the header.</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-12">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-13">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">static</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">header_size</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-14">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">raise</span><span class="crayon-h"> </span><span class="crayon-k ">RuntimeError</span><span class="crayon-sy">(</span><span class="crayon-s">"static memory begins before byte 64"</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-15">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-16">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c"># The specification indicates that the total of dynamic plus static</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-17">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c"># memory must not exceed 64K minus 2 bytes.</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-18">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-19">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">dynamic_size</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">static</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">dynamic</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-20">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-21">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">dynamic_size</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">static</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">65534</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e1881105221-22">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">raise</span><span class="crayon-h"> </span><span class="crayon-k ">RuntimeError</span><span class="crayon-sy">(</span><span class="crayon-s">"memory exceeds addressable memory space"</span><span class="crayon-sy">)</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p></p>
<p>Here&#8217;s yet another one for checking on the valid maximum size of the zcode programs based on version, as mentioned in the specification:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f3e352c8e2044318054" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Python</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
def _zcode_size_checks(self) -&gt; None:
    size_limits = {
        1: 128,
        2: 128,
        3: 128,
        4: 256,
        5: 256,
        6: 512,
        7: 512,
        8: 512,
        9: 512,
    }

    total_size: int = len(self.data)
    size_limit: int = size_limits[self.version]

    if total_size &gt; size_limit * 1024:
        raise RuntimeError(
            f"program exceeds size limit of {size_limit}KB for version {self.version}"
        )</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-14">14</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-15">15</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-16">16</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-17">17</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-18">18</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-19">19</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f3e352c8e2044318054-20">20</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-1">
<span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">_zcode_size_checks</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-2">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">size_limits</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-3">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">128</span><span class="crayon-sy">,</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-4">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">2</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">128</span><span class="crayon-sy">,</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-5">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">3</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">128</span><span class="crayon-sy">,</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-6">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">4</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">256</span><span class="crayon-sy">,</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-7">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">5</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">256</span><span class="crayon-sy">,</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-8">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">6</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">512</span><span class="crayon-sy">,</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-9">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">7</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">512</span><span class="crayon-sy">,</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-10">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">8</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">512</span><span class="crayon-sy">,</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-11">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">9</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">512</span><span class="crayon-sy">,</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-12">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-13">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-14">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">total_size</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">data</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-15">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">size_limit</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">size_limits</span><span class="crayon-sy">[</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">version</span><span class="crayon-sy">]</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-16">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-17">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">total_size</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">size_limit</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">1024</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-18">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">raise</span><span class="crayon-h"> </span><span class="crayon-k ">RuntimeError</span><span class="crayon-sy">(</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-19">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">f</span><span class="crayon-s">"program exceeds size limit of {size_limit}KB for version {self.version}"</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f3e352c8e2044318054-20">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p></p>
<h2>This Was a Lot!</h2>
<p>All of what I describe above is important because it means that when you read the Z-Machine specification, you have to understand how the Z-Machine interpreters &mdash; the ZIPs &mdash; were created and worked <em>back then</em> but also translate that to what is needed, or practical, <em>today</em>.</p>
<p>For example, as the most obvious thing to consider, today we&#8217;re generally not dealing with games on disks at all, much less multiple disks. Thus paging systems and segment tables are not something you&#8217;ll be worrying about.</p>
<p>As another example, perhaps less obvious, there really is no need to make a distinction between dynamic (mutable) and static (immutable) memory in a modern implementation. And while that&#8217;s technically true, it&#8217;s still considered a good idea to do so. One of the main reasons being that doing so helps ensure that static memory is never written to. Also if the interpreter restarts a story file (or saves and restores the state of one), it&#8217;s necessary to be able to provide the original state of the dynamic memory. That&#8217;s a lot easier if you have a clear separation of what &#8220;dynamic memory&#8221; is.</p>
<p>Yet another good example of this has to do with the concept of the stacks that were mentioned above. Whether the call stack and the evaluation stack are separate structures or just one structure is really up to the author of the interpreter. A &#8220;stack&#8221; is nothing more than a data structure that&#8217;s a wrapper around some numbers.</p>
<p>So what matters is that the story file being executed can only directly access the data structure (&#8220;stack&#8221;) of the current routine. But the story file has no way to know whether you have one large stack that just sits in memory or separate call stacks (one for each routine called) that in turn each have their own evaluation stack.</p>
<p>The point here is: there&#8217;s a lot to learn about how things <em>worked</em>; now you have to figure out how you want to make things <em>work</em>.</p>
<div class="addtoany_share_save_container addtoany_content addtoany_content_bottom"><div class="a2a_kit a2a_kit_size_16 addtoany_list" data-a2a-url="https://testerstories.com/2023/05/reading-memory-in-grue/" data-a2a-title="Reading Memory in Grue">
<a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=%2F2023%2F05%2Freading-memory-in-grue%2F&amp;linkname=Reading%20Memory%20in%20Grue" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=%2F2023%2F05%2Freading-memory-in-grue%2F&amp;linkname=Reading%20Memory%20in%20Grue" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=%2F2023%2F05%2Freading-memory-in-grue%2F&amp;linkname=Reading%20Memory%20in%20Grue" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_print" href="https://www.addtoany.com/add_to/print?linkurl=%2F2023%2F05%2Freading-memory-in-grue%2F&amp;linkname=Reading%20Memory%20in%20Grue" title="Print" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share"><img src="https://static.addtoany.com/buttons/favicon.png" alt="Share"></a>
</div></div>      
	</div>
<!-- .entry-content -->
	<footer class="entry-footer">       
		<p class="written-by">This article was written by <a href="/author/administrator/">Jeff Nyman</a></p>
<div class="author-bio">
		
	<h3><a href="/author/administrator/" rel="author">About  Jeff Nyman</a></h3>		
	<img alt="" src="https://secure.gravatar.com/avatar/a3b6c2d0b2bafdb9ad9cdf782873204d?s=72&#038;d=mm&#038;r=pg" srcset="https://secure.gravatar.com/avatar/a3b6c2d0b2bafdb9ad9cdf782873204d?s=144&#038;d=mm&#038;r=pg 2x" class="avatar avatar-72 photo" height="72" width="72" decoding="async"><p class="author-description">Anything I put here is an approximation of the truth. You're getting a particular view of myself ... and it's the view I'm choosing to present to you. If you've never met me before in person, please realize I'm not the same in person as I am in writing. That's because I can only put part of myself down into words.

If you have met me before in person then I'd ask you to consider that the view you've formed that way and the view you come to by reading what I say here may, in fact, both be true. I'd advise that you not automatically discard either viewpoint when they conflict or accept either as truth when they agree.</p>		
</div>
<!-- .author-bio -->
	</footer><!-- .entry-footer -->

	<nav class="navigation post-navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links">
<div class="nav-previous"><a href="/2023/05/memory-and-state-in-grue/" rel="prev"><span class="genericon genericon-previous" aria-hidden="true"></span> <span class="screen-reader-text">Previous post:</span> <span class="post-title">Memory and State in Grue</span></a></div>
<div class="nav-next"><a href="/2023/06/processing-in-grue/" rel="next"><span class="post-title">Processing in Grue</span><span class="screen-reader-text">Next post:</span> <span class="genericon genericon-next" aria-hidden="true"></span> </a></div>
</div>
	</nav>
<div id="comments" class="comments-area">


		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2023/05/reading-memory-in-grue/#respond" style="display:none;">Cancel reply</a></small>
</h3>
<form action="https://testerstories.com/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> <span class="required-field-message">Required fields are marked <span class="required">*</span></span></p>
<p class="comment-form-comment"><label for="comment">Comment <span class="required">*</span></label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required></textarea></p>
<p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" autocomplete="name" required></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" autocomplete="email" required></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" autocomplete="url"></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="4814" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p>
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="f5955e3410"></p>
<p style="display: none !important;"><label>&#916;<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js_1" name="ak_js" value="249"><script>document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );</script></p>
</form>	</div>
<!-- #respond -->
	<p class="akismet_comment_form_privacy_notice">This site uses Akismet to reduce spam. <a href="https://akismet.com/privacy/" target="_blank" rel="nofollow noopener">Learn how your comment data is processed</a>.</p>
</div>
<!-- #comments -->
</article><!-- #post-## -->
</main><!--/main-content-->
	<aside id="sidebar-widget-area" class="sidebar-widget-area" role="complementary">
		<a class="screen-reader-text skip-link" href="#page-footer">Skip to footer</a>

		<section id="sidebar" class="widget-area sidebar">
			<div id="text-6" class="widget widget_text">			<div class="textwidget">
<p><a href="https://www.linkedin.com/pub/jeff-nyman/12/b32/16a"><br>
<img decoding="async" src="https://static.licdn.com/scds/common/u/img/webpromo/btn_myprofile_160x33.png" alt="View Jeff Nyman's profile on LinkedIn" width="160" height="33" border="0"></a></p>
</div>
		</div>
<div id="categories-5" class="widget widget_categories">
<h2 class="widget-title">Topics</h2>
			<ul>
					<li class="cat-item cat-item-58">
<a href="/category/agile/">Agile</a> (2)
</li>
	<li class="cat-item cat-item-49">
<a href="/category/ai/">AI</a> (24)
<ul class="children">
	<li class="cat-item cat-item-50">
<a href="/category/ai/machine-learning/">Machine Learning</a> (12)
	<ul class="children">
	<li class="cat-item cat-item-55">
<a href="/category/ai/machine-learning/ml-series-1/">ML Series 1</a> (2)
</li>
	<li class="cat-item cat-item-56">
<a href="/category/ai/machine-learning/ml-series-2/">ML Series 2</a> (4)
</li>
	<li class="cat-item cat-item-57">
<a href="/category/ai/machine-learning/ml-series-3/">ML Series 3</a> (6)
</li>
	</ul>
</li>
</ul>
</li>
	<li class="cat-item cat-item-11">
<a href="/category/automation/">Automation</a> (68)
<ul class="children">
	<li class="cat-item cat-item-41">
<a href="/category/automation/c/">C#</a> (2)
</li>
	<li class="cat-item cat-item-8">
<a href="/category/automation/capybara/">Capybara</a> (11)
</li>
	<li class="cat-item cat-item-9">
<a href="/category/automation/cucumber/">Cucumber</a> (10)
</li>
	<li class="cat-item cat-item-31">
<a href="/category/automation/cucumber-jvm/">Cucumber-JVM</a> (6)
</li>
	<li class="cat-item cat-item-42">
<a href="/category/automation/groovy/">Groovy</a> (1)
</li>
	<li class="cat-item cat-item-40">
<a href="/category/automation/java/">Java</a> (9)
</li>
	<li class="cat-item cat-item-10">
<a href="/category/automation/qtp/">QTP</a> (6)
</li>
	<li class="cat-item cat-item-5">
<a href="/category/automation/rspec/">RSpec</a> (4)
</li>
	<li class="cat-item cat-item-7">
<a href="/category/automation/selenium/">Selenium</a> (17)
</li>
	<li class="cat-item cat-item-39">
<a href="/category/automation/serenity/">Serenity</a> (8)
</li>
	<li class="cat-item cat-item-30">
<a href="/category/automation/symbiont/">Symbiont</a> (11)
</li>
	<li class="cat-item cat-item-51">
<a href="/category/automation/tapestry/">Tapestry</a> (6)
</li>
	<li class="cat-item cat-item-6">
<a href="/category/automation/watir/">Watir</a> (4)
</li>
</ul>
</li>
	<li class="cat-item cat-item-13">
<a href="/category/bdd/">BDD</a> (24)
<ul class="children">
	<li class="cat-item cat-item-23">
<a href="/category/bdd/tdl/">TDL</a> (17)
</li>
</ul>
</li>
	<li class="cat-item cat-item-25">
<a href="/category/career/">Career</a> (33)
<ul class="children">
	<li class="cat-item cat-item-53">
<a href="/category/career/interview/">Interview</a> (10)
</li>
</ul>
</li>
	<li class="cat-item cat-item-15">
<a href="/category/communication/">Communication</a> (16)
</li>
	<li class="cat-item cat-item-65">
<a href="/category/crime-scene/">Crime Scene</a> (4)
</li>
	<li class="cat-item cat-item-52">
<a href="/category/data-science/">Data Science</a> (4)
</li>
	<li class="cat-item cat-item-61">
<a href="/category/development/">Development</a> (39)
<ul class="children">
	<li class="cat-item cat-item-36">
<a href="/category/development/chef/">Chef</a> (2)
</li>
	<li class="cat-item cat-item-32">
<a href="/category/development/inform-7/">Inform 7</a> (3)
</li>
	<li class="cat-item cat-item-38">
<a href="/category/development/javascript-test-solutions/">JavaScript</a> (6)
</li>
	<li class="cat-item cat-item-19">
<a href="/category/development/language-building/">Language Building</a> (9)
	<ul class="children">
	<li class="cat-item cat-item-20">
<a href="/category/development/language-building/rex-and-racc/">Rex and Racc</a> (3)
</li>
	</ul>
</li>
	<li class="cat-item cat-item-48">
<a href="/category/development/python/">Python</a> (4)
</li>
	<li class="cat-item cat-item-29">
<a href="/category/development/rails/">Rails</a> (4)
</li>
	<li class="cat-item cat-item-21">
<a href="/category/development/web-development/">Web Development</a> (11)
	<ul class="children">
	<li class="cat-item cat-item-34">
<a href="/category/development/web-development/node-js/">Node.js</a> (5)
</li>
	<li class="cat-item cat-item-22">
<a href="/category/development/web-development/sinatra/">Sinatra</a> (6)
</li>
	</ul>
</li>
</ul>
</li>
	<li class="cat-item cat-item-28">
<a href="/category/dialect/">Dialect</a> (6)
</li>
	<li class="cat-item cat-item-45">
<a href="/category/exploration/">Exploration</a> (14)
<ul class="children">
	<li class="cat-item cat-item-46">
<a href="/category/exploration/interactive/">Interactive</a> (6)
</li>
</ul>
</li>
	<li class="cat-item cat-item-44">
<a href="/category/indefinito/">Indefinito</a> (11)
</li>
	<li class="cat-item cat-item-17">
<a href="/category/learning/">Learning</a> (11)
</li>
	<li class="cat-item cat-item-24">
<a href="/category/lucid/">Lucid</a> (11)
</li>
	<li class="cat-item cat-item-62">
<a href="/category/product-development/">Product Development</a> (7)
</li>
	<li class="cat-item cat-item-64">
<a href="/category/product-management/">Product Management</a> (3)
</li>
	<li class="cat-item cat-item-3">
<a href="/category/quality/">Quality</a> (7)
</li>
	<li class="cat-item cat-item-14">
<a href="/category/quality-assurance/">Quality Assurance</a> (5)
</li>
	<li class="cat-item cat-item-35">
<a href="/category/specify/">Specify</a> (2)
</li>
	<li class="cat-item cat-item-16">
<a href="/category/symbiont-pg/">Symbiont-PG</a> (4)
</li>
	<li class="cat-item cat-item-27">
<a href="/category/test-solutions/">Test Solutions</a> (11)
</li>
	<li class="cat-item cat-item-4">
<a href="/category/testing/">Testing</a> (167)
<ul class="children">
	<li class="cat-item cat-item-59">
<a href="/category/testing/contracts/">Contracts</a> (2)
</li>
	<li class="cat-item cat-item-63">
<a href="/category/testing/epistemology/">Epistemology</a> (1)
</li>
	<li class="cat-item cat-item-67">
<a href="/category/testing/games/">Games</a> (8)
</li>
	<li class="cat-item cat-item-68">
<a href="/category/testing/history-and-science/">History and Science</a> (5)
</li>
	<li class="cat-item cat-item-43">
<a href="/category/testing/modern-testing/">Modern Testing</a> (15)
</li>
	<li class="cat-item cat-item-54">
<a href="/category/testing/testability/">Testability</a> (9)
</li>
</ul>
</li>
	<li class="cat-item cat-item-12">
<a href="/category/thinking/">Thinking</a> (22)
</li>
	<li class="cat-item cat-item-47">
<a href="/category/what-if/">What If</a> (1)
</li>
	<li class="cat-item cat-item-69">
<a href="/category/zmachine/">Z-Machine</a> (7)
</li>
			</ul>

			</div>
<div id="archives-5" class="widget widget_archive">
<h2 class="widget-title">Archives</h2>		<label class="screen-reader-text" for="archives-dropdown-5">Archives</label>
		<select id="archives-dropdown-5" name="archive-dropdown">
			
			<option value="">Select Month</option>
				<option value="https://testerstories.com/2023/06/"> June 2023 </option>
	<option value="https://testerstories.com/2023/05/"> May 2023 </option>
	<option value="https://testerstories.com/2023/04/"> April 2023 </option>
	<option value="https://testerstories.com/2023/03/"> March 2023 </option>
	<option value="https://testerstories.com/2023/02/"> February 2023 </option>
	<option value="https://testerstories.com/2023/01/"> January 2023 </option>
	<option value="https://testerstories.com/2022/12/"> December 2022 </option>
	<option value="https://testerstories.com/2022/11/"> November 2022 </option>
	<option value="https://testerstories.com/2022/10/"> October 2022 </option>
	<option value="https://testerstories.com/2022/07/"> July 2022 </option>
	<option value="https://testerstories.com/2022/06/"> June 2022 </option>
	<option value="https://testerstories.com/2022/05/"> May 2022 </option>
	<option value="https://testerstories.com/2022/03/"> March 2022 </option>
	<option value="https://testerstories.com/2022/02/"> February 2022 </option>
	<option value="https://testerstories.com/2022/01/"> January 2022 </option>
	<option value="https://testerstories.com/2021/12/"> December 2021 </option>
	<option value="https://testerstories.com/2021/10/"> October 2021 </option>
	<option value="https://testerstories.com/2021/08/"> August 2021 </option>
	<option value="https://testerstories.com/2021/07/"> July 2021 </option>
	<option value="https://testerstories.com/2021/06/"> June 2021 </option>
	<option value="https://testerstories.com/2021/05/"> May 2021 </option>
	<option value="https://testerstories.com/2021/04/"> April 2021 </option>
	<option value="https://testerstories.com/2021/03/"> March 2021 </option>
	<option value="https://testerstories.com/2021/02/"> February 2021 </option>
	<option value="https://testerstories.com/2021/01/"> January 2021 </option>
	<option value="https://testerstories.com/2020/11/"> November 2020 </option>
	<option value="https://testerstories.com/2020/10/"> October 2020 </option>
	<option value="https://testerstories.com/2020/09/"> September 2020 </option>
	<option value="https://testerstories.com/2020/07/"> July 2020 </option>
	<option value="https://testerstories.com/2020/06/"> June 2020 </option>
	<option value="https://testerstories.com/2020/05/"> May 2020 </option>
	<option value="https://testerstories.com/2020/02/"> February 2020 </option>
	<option value="https://testerstories.com/2020/01/"> January 2020 </option>
	<option value="https://testerstories.com/2019/12/"> December 2019 </option>
	<option value="https://testerstories.com/2019/11/"> November 2019 </option>
	<option value="https://testerstories.com/2019/10/"> October 2019 </option>
	<option value="https://testerstories.com/2019/09/"> September 2019 </option>
	<option value="https://testerstories.com/2019/08/"> August 2019 </option>
	<option value="https://testerstories.com/2019/07/"> July 2019 </option>
	<option value="https://testerstories.com/2019/06/"> June 2019 </option>
	<option value="https://testerstories.com/2019/05/"> May 2019 </option>
	<option value="https://testerstories.com/2019/04/"> April 2019 </option>
	<option value="https://testerstories.com/2019/03/"> March 2019 </option>
	<option value="https://testerstories.com/2019/02/"> February 2019 </option>
	<option value="https://testerstories.com/2019/01/"> January 2019 </option>
	<option value="https://testerstories.com/2018/12/"> December 2018 </option>
	<option value="https://testerstories.com/2018/11/"> November 2018 </option>
	<option value="https://testerstories.com/2018/10/"> October 2018 </option>
	<option value="https://testerstories.com/2018/09/"> September 2018 </option>
	<option value="https://testerstories.com/2018/08/"> August 2018 </option>
	<option value="https://testerstories.com/2018/07/"> July 2018 </option>
	<option value="https://testerstories.com/2018/06/"> June 2018 </option>
	<option value="https://testerstories.com/2018/05/"> May 2018 </option>
	<option value="https://testerstories.com/2018/04/"> April 2018 </option>
	<option value="https://testerstories.com/2018/03/"> March 2018 </option>
	<option value="https://testerstories.com/2018/02/"> February 2018 </option>
	<option value="https://testerstories.com/2018/01/"> January 2018 </option>
	<option value="https://testerstories.com/2017/12/"> December 2017 </option>
	<option value="https://testerstories.com/2017/11/"> November 2017 </option>
	<option value="https://testerstories.com/2017/10/"> October 2017 </option>
	<option value="https://testerstories.com/2017/09/"> September 2017 </option>
	<option value="https://testerstories.com/2017/08/"> August 2017 </option>
	<option value="https://testerstories.com/2017/07/"> July 2017 </option>
	<option value="https://testerstories.com/2017/06/"> June 2017 </option>
	<option value="https://testerstories.com/2017/05/"> May 2017 </option>
	<option value="https://testerstories.com/2017/04/"> April 2017 </option>
	<option value="https://testerstories.com/2017/03/"> March 2017 </option>
	<option value="https://testerstories.com/2017/02/"> February 2017 </option>
	<option value="https://testerstories.com/2017/01/"> January 2017 </option>
	<option value="https://testerstories.com/2016/12/"> December 2016 </option>
	<option value="https://testerstories.com/2016/11/"> November 2016 </option>
	<option value="https://testerstories.com/2016/10/"> October 2016 </option>
	<option value="https://testerstories.com/2016/09/"> September 2016 </option>
	<option value="https://testerstories.com/2016/08/"> August 2016 </option>
	<option value="https://testerstories.com/2016/07/"> July 2016 </option>
	<option value="https://testerstories.com/2016/06/"> June 2016 </option>
	<option value="https://testerstories.com/2016/04/"> April 2016 </option>
	<option value="https://testerstories.com/2016/03/"> March 2016 </option>
	<option value="https://testerstories.com/2016/02/"> February 2016 </option>
	<option value="https://testerstories.com/2016/01/"> January 2016 </option>
	<option value="https://testerstories.com/2015/12/"> December 2015 </option>
	<option value="https://testerstories.com/2015/11/"> November 2015 </option>
	<option value="https://testerstories.com/2015/10/"> October 2015 </option>
	<option value="https://testerstories.com/2015/09/"> September 2015 </option>
	<option value="https://testerstories.com/2015/08/"> August 2015 </option>
	<option value="https://testerstories.com/2015/07/"> July 2015 </option>
	<option value="https://testerstories.com/2015/06/"> June 2015 </option>
	<option value="https://testerstories.com/2015/05/"> May 2015 </option>
	<option value="https://testerstories.com/2015/04/"> April 2015 </option>
	<option value="https://testerstories.com/2015/03/"> March 2015 </option>
	<option value="https://testerstories.com/2015/02/"> February 2015 </option>
	<option value="https://testerstories.com/2014/12/"> December 2014 </option>
	<option value="https://testerstories.com/2014/11/"> November 2014 </option>
	<option value="https://testerstories.com/2014/10/"> October 2014 </option>
	<option value="https://testerstories.com/2014/09/"> September 2014 </option>
	<option value="https://testerstories.com/2014/08/"> August 2014 </option>
	<option value="https://testerstories.com/2014/07/"> July 2014 </option>
	<option value="https://testerstories.com/2014/06/"> June 2014 </option>
	<option value="https://testerstories.com/2014/05/"> May 2014 </option>
	<option value="https://testerstories.com/2014/04/"> April 2014 </option>
	<option value="https://testerstories.com/2014/03/"> March 2014 </option>
	<option value="https://testerstories.com/2014/01/"> January 2014 </option>
	<option value="https://testerstories.com/2013/12/"> December 2013 </option>
	<option value="https://testerstories.com/2013/09/"> September 2013 </option>
	<option value="https://testerstories.com/2013/08/"> August 2013 </option>
	<option value="https://testerstories.com/2013/07/"> July 2013 </option>
	<option value="https://testerstories.com/2013/06/"> June 2013 </option>
	<option value="https://testerstories.com/2013/05/"> May 2013 </option>
	<option value="https://testerstories.com/2013/03/"> March 2013 </option>
	<option value="https://testerstories.com/2013/01/"> January 2013 </option>
	<option value="https://testerstories.com/2012/12/"> December 2012 </option>
	<option value="https://testerstories.com/2012/10/"> October 2012 </option>
	<option value="https://testerstories.com/2012/09/"> September 2012 </option>
	<option value="https://testerstories.com/2012/08/"> August 2012 </option>
	<option value="https://testerstories.com/2012/07/"> July 2012 </option>
	<option value="https://testerstories.com/2012/06/"> June 2012 </option>
	<option value="https://testerstories.com/2012/05/"> May 2012 </option>
	<option value="https://testerstories.com/2012/04/"> April 2012 </option>
	<option value="https://testerstories.com/2012/03/"> March 2012 </option>
	<option value="https://testerstories.com/2012/02/"> February 2012 </option>
	<option value="https://testerstories.com/2012/01/"> January 2012 </option>
	<option value="https://testerstories.com/2011/12/"> December 2011 </option>
	<option value="https://testerstories.com/2011/11/"> November 2011 </option>
	<option value="https://testerstories.com/2011/10/"> October 2011 </option>
	<option value="https://testerstories.com/2011/09/"> September 2011 </option>
	<option value="https://testerstories.com/2011/08/"> August 2011 </option>

		</select>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dropdown = document.getElementById( "archives-dropdown-5" );
	function onSelectChange() {
		if ( dropdown.options[ dropdown.selectedIndex ].value !== '' ) {
			document.location.href = this.options[ this.selectedIndex ].value;
		}
	}
	dropdown.onchange = onSelectChange;
})();
/* ]]> */
</script>
			</div>
<div id="meta-5" class="widget widget_meta">
<h2 class="widget-title">Site</h2>
		<ul>
						<li><a href="/wp-login.php">Log in</a></li>
			<li><a href="/feed/">Entries feed</a></li>
			<li><a href="/comments/feed/">Comments feed</a></li>

			<li><a href="https://wordpress.org/">WordPress.org</a></li>
		</ul>

		</div>
<div id="text-4" class="widget widget_text">			<div class="textwidget"><a href="https://www.linkedin.com/pub/jeff-nyman/12/b32/16a">
          <img src="https://static.licdn.com/scds/common/u/img/webpromo/btn_myprofile_160x33.png" width="160" height="33" border="0" alt="View Jeff Nyman's profile on LinkedIn"></a></div>
		</div>
<div id="search-3" class="widget widget_search">
<form role="search" method="get" class="search-form" action="https://testerstories.com/">
	<label>
		<span class="screen-reader-text">Search for:</span>
		<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:">
	</label>
	<button type="submit" class="search-submit"><span class="genericon genericon-search" aria-hidden="true"></span><span class="screen-reader-text">Search</span></button>
</form>
</div>		</section><!-- #sidebar .widget-area -->

	</aside>

  

<footer id="page-footer" role="contentinfo">
	<div id="site-info" class="site-info">
		<span class="footer-site-title"><a href="/" rel="home">Stories from a Software Tester</a></span>
		<a href="https://wordpress.org/">Proudly powered by WordPress</a>
	</div>
<!--/site-info-->
</footer> <!--/footer-->
</div>
<!-- #container -->
            
            <style type="text/css" class="darkmysite_inline_css">#darkmysite_switch_1077814156 {
        --darkmysite_switch_apple_width_height: 60px;
        --darkmysite_switch_apple_border_radius: 7px;
        --darkmysite_switch_apple_icon_width: 30px;
        --darkmysite_switch_apple_light_mode_bg: #121116;
        --darkmysite_switch_apple_dark_mode_bg: #ffffff;
        --darkmysite_switch_apple_light_mode_icon_color: #ffffff;
        --darkmysite_switch_apple_dark_mode_icon_color: #121116;
        }

    #darkmysite_switch_1077814156 {
        --darkmysite_switch_margin_from_top: 40px;
        --darkmysite_switch_margin_from_bottom: 40px;
        --darkmysite_switch_margin_from_left: 40px;
        --darkmysite_switch_margin_from_right: 40px;
        }</style>




    <div id="darkmysite_switch_1077814156" class="darkmysite_switch  darkmysite_bottom_right   darkmysite_switch_apple" onclick="darkmysite_switch_trigger()">
        <span class="darkmysite_switch_icon"></span>
            </div>

            
    <script type="text/javascript" class="darkmysite_inline_js">document.addEventListener("DOMContentLoaded", function(event) {
            darkmysite_init_alternative_dark_mode_switch();
        });</script>


<script type="text/javascript" id="acuarela-script-js-extra">
/* <![CDATA[ */
var acuarelaScreenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/themes/acuarela/js/functions.js?ver=20190802" id="acuarela-script-js"></script>
<script type="text/javascript" src="/wp-includes/js/comment-reply.min.js?ver=6.2.2" id="comment-reply-js"></script>
<script defer type="text/javascript" src="/wp-content/plugins/akismet/_inc/akismet-frontend.js?ver=1680871091" id="akismet-frontend-js"></script>
</body>
</html>