<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="profile" href="http://gmpg.org/xfn/11">
				<link rel="pingback" href="/xmlrpc.php">
				<title>Learning Capybara, Part 2 &#8211; Stories from a Software Tester</title>
<meta name="robots" content="max-image-preview:large">
 <style type="text/css" class="darkmysite_inline_css">:root { --darkmysite_dark_mode_bg: #0f0f0f; --darkmysite_dark_mode_secondary_bg: #171717; --darkmysite_dark_mode_text_color: #bebebe; --darkmysite_dark_mode_link_color: #ffffff; --darkmysite_dark_mode_link_hover_color: #cccccc; --darkmysite_dark_mode_input_bg: #2d2d2d; --darkmysite_dark_mode_input_text_color: #bebebe; --darkmysite_dark_mode_input_placeholder_color: #989898; --darkmysite_dark_mode_border_color: #4a4a4a; --darkmysite_dark_mode_btn_bg: #2d2d2d; --darkmysite_dark_mode_btn_text_color: #bebebe; }</style> <style type="text/css" class="darkmysite_inline_css">.darkmysite_dark_mode_enabled::-webkit-scrollbar { background: #29292a !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-track { background: #29292a !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-thumb { background-color: #52565a !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-corner { background-color: #52565a !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-button { background-color: transparent !important; background-repeat: no-repeat !important; background-size: contain !important; background-position: center !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-button:start { background-image: url(/wp-content/plugins/darkmysite/assets/img/others/scroll_arrow_up.svg) !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-button:end { background-image: url(/wp-content/plugins/darkmysite/assets/img/others/scroll_arrow_down.svg) !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-button:start:horizontal { background-image: url(/wp-content/plugins/darkmysite/assets/img/others/scroll_arrow_left.svg) !important; } .darkmysite_dark_mode_enabled::-webkit-scrollbar-button:end:horizontal { background-image: url(/wp-content/plugins/darkmysite/assets/img/others/scroll_arrow_right.svg) !important; }</style> <script type="text/javascript" class="darkmysite_inline_js">var darkmysite_switch_unique_id = "906767975"; var darkmysite_is_this_admin_panel = "0"; var darkmysite_enable_default_dark_mode = "0"; var darkmysite_enable_os_aware = "1"; var darkmysite_enable_keyboard_shortcut = "1"; var darkmysite_enable_time_based_dark = "0"; var darkmysite_time_based_dark_start = "19:00"; var darkmysite_time_based_dark_stop = "07:00"; var darkmysite_alternative_dark_mode_switch = ""; var darkmysite_enable_low_image_brightness = "1"; var darkmysite_image_brightness_to = "80"; var darkmysite_enable_image_grayscale = "0"; var darkmysite_image_grayscale_to = "80"; var darkmysite_enable_bg_image_darken = "1"; var darkmysite_bg_image_darken_to = "60"; var darkmysite_enable_invert_inline_svg = "0"; var darkmysite_enable_low_video_brightness = "1"; var darkmysite_video_brightness_to = "80"; var darkmysite_enable_video_grayscale = "0"; var darkmysite_video_grayscale_to = "80"; var darkmysite_disallowed_elements = ".darkmysite_ignore, .darkmysite_ignore *, .darkmysite_switch, .darkmysite_switch *, .wp-block-button__link, .wp-block-button__link *";</script><link rel="dns-prefetch" href="//static.addtoany.com">
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="alternate" type="application/rss+xml" title="Stories from a Software Tester &raquo; Feed" href="/feed/">
<link rel="alternate" type="application/rss+xml" title="Stories from a Software Tester &raquo; Comments Feed" href="/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Stories from a Software Tester &raquo; Learning Capybara, Part 2 Comments Feed" href="/2014/08/learning-capybara-part-2/feed/">
<script type="text/javascript">
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.2.2"}};
/*! This file is auto-generated */
!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){p.clearRect(0,0,i.width,i.height),p.fillText(e,0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(t,0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(p&&p.fillText)switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s("ðŸ³ï¸â€âš§ï¸","ðŸ³ï¸â€‹âš§ï¸")?!1:!s("ðŸ‡ºðŸ‡³","ðŸ‡ºâ€‹ðŸ‡³")&&!s("ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿","ðŸ´â€‹ó §â€‹ó ¢â€‹ó ¥â€‹ó ®â€‹ó §â€‹ó ¿");case"emoji":return!s("ðŸ«±ðŸ»â€ðŸ«²ðŸ¿","ðŸ«±ðŸ»â€‹ðŸ«²ðŸ¿")}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(e=t.source||{}).concatemoji?c(e.concatemoji):e.wpemoji&&e.twemoji&&(c(e.twemoji),c(e.wpemoji)))}(window,document,window._wpemojiSettings);
</script>
<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}</style>
	<link rel="stylesheet" id="urvanov_syntax_highlighter-css" href="/wp-content/plugins/urvanov-syntax-highlighter/css/min/urvanov_syntax_highlighter.min.css?ver=2.8.33" type="text/css" media="all">
<link rel="stylesheet" id="crayon-theme-classic-css" href="/wp-content/plugins/urvanov-syntax-highlighter/themes/classic/classic.css?ver=2.8.33" type="text/css" media="all">
<link rel="stylesheet" id="crayon-font-monaco-css" href="/wp-content/plugins/urvanov-syntax-highlighter/fonts/monaco.css?ver=2.8.33" type="text/css" media="all">
<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css?ver=6.2.2" type="text/css" media="all">
<style id="wp-block-library-theme-inline-css" type="text/css">.wp-block-audio figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-audio figcaption{color:hsla(0,0%,100%,.65)}.wp-block-audio{margin:0 0 1em}.wp-block-code{border:1px solid #ccc;border-radius:4px;font-family:Menlo,Consolas,monaco,monospace;padding:.8em 1em}.wp-block-embed figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-embed figcaption{color:hsla(0,0%,100%,.65)}.wp-block-embed{margin:0 0 1em}.blocks-gallery-caption{color:#555;font-size:13px;text-align:center}.is-dark-theme .blocks-gallery-caption{color:hsla(0,0%,100%,.65)}.wp-block-image figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-image figcaption{color:hsla(0,0%,100%,.65)}.wp-block-image{margin:0 0 1em}.wp-block-pullquote{border-bottom:4px solid;border-top:4px solid;color:currentColor;margin-bottom:1.75em}.wp-block-pullquote cite,.wp-block-pullquote footer,.wp-block-pullquote__citation{color:currentColor;font-size:.8125em;font-style:normal;text-transform:uppercase}.wp-block-quote{border-left:.25em solid;margin:0 0 1.75em;padding-left:1em}.wp-block-quote cite,.wp-block-quote footer{color:currentColor;font-size:.8125em;font-style:normal;position:relative}.wp-block-quote.has-text-align-right{border-left:none;border-right:.25em solid;padding-left:0;padding-right:1em}.wp-block-quote.has-text-align-center{border:none;padding-left:0}.wp-block-quote.is-large,.wp-block-quote.is-style-large,.wp-block-quote.is-style-plain{border:none}.wp-block-search .wp-block-search__label{font-weight:700}.wp-block-search__button{border:1px solid #ccc;padding:.375em .625em}:where(.wp-block-group.has-background){padding:1.25em 2.375em}.wp-block-separator.has-css-opacity{opacity:.4}.wp-block-separator{border:none;border-bottom:2px solid;margin-left:auto;margin-right:auto}.wp-block-separator.has-alpha-channel-opacity{opacity:1}.wp-block-separator:not(.is-style-wide):not(.is-style-dots){width:100px}.wp-block-separator.has-background:not(.is-style-dots){border-bottom:none;height:1px}.wp-block-separator.has-background:not(.is-style-wide):not(.is-style-dots){height:2px}.wp-block-table{margin:0 0 1em}.wp-block-table td,.wp-block-table th{word-break:normal}.wp-block-table figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-table figcaption{color:hsla(0,0%,100%,.65)}.wp-block-video figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-video figcaption{color:hsla(0,0%,100%,.65)}.wp-block-video{margin:0 0 1em}.wp-block-template-part.has-background{margin-bottom:0;margin-top:0;padding:1.25em 2.375em}</style>
<link rel="stylesheet" id="classic-theme-styles-css" href="/wp-includes/css/classic-themes.min.css?ver=6.2.2" type="text/css" media="all">
<style id="global-styles-inline-css" type="text/css">body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}</style>
<link rel="stylesheet" id="darkmysite-client-main-css" href="/wp-content/plugins/darkmysite/assets/css/client_main.css?ver=1.2.6" type="text/css" media="all">
<link rel="stylesheet" id="plyr-css-css" href="/wp-content/plugins/easy-video-player/lib/plyr.css?ver=6.2.2" type="text/css" media="all">
<link rel="stylesheet" id="acuarela-fonts-css" href="https://fonts.googleapis.com/css?family=Lato%3A300italic%2C400italic%2C700italic%2C300%2C400%2C700%7CArima+Madurai%3A700%2C800%7CInconsolata%3A400%2C700&#038;subset=latin%2Clatin-ext&#038;ver=20190802" type="text/css" media="all">
<link rel="stylesheet" id="genericons-css" href="/wp-content/themes/acuarela/genericons/genericons.css?ver=3.4.1" type="text/css" media="all">
<link rel="stylesheet" id="animate-css" href="/wp-content/themes/acuarela/css/animate.css?ver=3.7.2" type="text/css" media="all">
<link rel="stylesheet" id="acuarela-style-css" href="/wp-content/themes/acuarela/style.css?ver=6.2.2" type="text/css" media="all">
<link rel="stylesheet" id="addtoany-css" href="/wp-content/plugins/add-to-any/addtoany.min.css?ver=1.16" type="text/css" media="all">
<script type="text/javascript" src="/wp-includes/js/jquery/jquery.min.js?ver=3.6.4" id="jquery-core-js"></script>
<script type="text/javascript" src="/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.4.0" id="jquery-migrate-js"></script>
<script type="text/javascript" id="urvanov_syntax_highlighter_js-js-extra">
/* <![CDATA[ */
var UrvanovSyntaxHighlighterSyntaxSettings = {"version":"2.8.33","is_admin":"0","ajaxurl":"\/wp-admin\/admin-ajax.php","prefix":"urvanov-syntax-highlighter-","setting":"urvanov-syntax-highlighter-setting","selected":"urvanov-syntax-highlighter-setting-selected","changed":"urvanov-syntax-highlighter-setting-changed","special":"urvanov-syntax-highlighter-setting-special","orig_value":"data-orig-value","debug":""};
var UrvanovSyntaxHighlighterSyntaxStrings = {"copy":"Copied to the clipboard","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/plugins/urvanov-syntax-highlighter/js/min/urvanov_syntax_highlighter.min.js?ver=2.8.33" id="urvanov_syntax_highlighter_js-js"></script>
<script type="text/javascript" id="addtoany-core-js-before">window.a2a_config=window.a2a_config||{};a2a_config.callbacks=[];a2a_config.overlays=[];a2a_config.templates={};</script>
<script type="text/javascript" async src="https://static.addtoany.com/menu/page.js" id="addtoany-core-js"></script>
<script type="text/javascript" async src="/wp-content/plugins/add-to-any/addtoany.min.js?ver=1.1" id="addtoany-jquery-js"></script>
<script type="text/javascript" src="/wp-content/plugins/darkmysite/assets/js/client_main.js?ver=1.2.6" id="darkmysite-client-main-js"></script>
<script type="text/javascript" id="plyr-js-js-extra">
/* <![CDATA[ */
var easy_video_player = {"plyr_iconUrl":"\/wp-content\/plugins\/easy-video-player\/lib\/plyr.svg","plyr_blankVideo":"\/wp-content\/plugins\/easy-video-player\/lib\/blank.mp4"};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/plugins/easy-video-player/lib/plyr.js?ver=6.2.2" id="plyr-js-js"></script>
<link rel="https://api.w.org/" href="/wp-json/">
<link rel="alternate" type="application/json" href="/wp-json/wp/v2/posts/1800">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml">
<meta name="generator" content="WordPress 6.2.2">
<link rel="canonical" href="/2014/08/learning-capybara-part-2/">
<link rel="shortlink" href="/?p=1800">
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2F%2F2014%2F08%2Flearning-capybara-part-2%2F">
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2F%2F2014%2F08%2Flearning-capybara-part-2%2F#038;format=xml">
<link type="text/css" rel="stylesheet" href="/wp-content/plugins/category-specific-rss-feed-menu/wp_cat_rss_style.css">
<!--Custom Styling-->
<style media="screen" type="text/css">.site-description { color: #222222}
.site-title, .entry-title, .post-title, .widget-title, .posts-navigation .nav-links { font-family: Arima Madurai}
 body { font-family: Lato}</style>
	<style id="acuarela-header-css" type="text/css"></style>
<style type="text/css" id="custom-background-css">body.custom-background { background-image: url("/wp-content/uploads/2020/10/low_contrast_linen.png"); background-position: left top; background-size: cover; background-repeat: no-repeat; background-attachment: fixed; }</style>
			<style type="text/css" id="wp-custom-css">@font-face {
  font-family: "Open Sans";
  font-weight: 400;
  font-style: normal;
  src: local("Open Sans Regular"), local("OpenSans-Regular"), url("/fonts/OpenSans-Regular.woff") format("woff");
}

@font-face {
  font-family: "Open Sans Bold";
  font-weight: 700;
  font-style: normal;
  src: local("Open Sans Bold"), local("OpenSans-Bold"), url("/fonts/OpenSans-Bold.woff") format("woff");
}

@font-face {
  font-family: "Open Sans Italic";
  font-weight: 400;
  font-style: normal;
  src: local("Open Sans Italic"), local("OpenSans-Italic"), url("/fonts/OpenSans-Italic.woff") format("woff");
}

:root{
	--primary: #01408e;
	--secondary: #3c5d5c;
	--initialLine: #ad2271;
	--drop: #903;
	--paraIndent: 1.25em;
	--note: #4d5b7c;
	--bq-color: #555555;
	--bq-back: #ededed;
	--sans: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
	--mono: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
    "Courier New", monospace;
}
/* For the top menu bar. */
.site-navigation a {
	padding: 0.9em 1.5em;
}

:where(html, body) {
	overscroll-behavior-y: none;
	cursor: url("/cursors/default.cur"), auto;
}

:where(p, h1, h2, h3, h4, h5, h6, blockquote, figcaption) {
	cursor: url("/cursors/text-select.cur"), auto;
}

:where(ul, ol) {
	margin: 1em 1em;
	text-align: justify;
	text-justify: inter-word;
	cursor: url("/cursors/text-select.cur"), auto;
}

:where(aside, article) a {
	cursor: url("/cursors/link-select.cur"), auto;
}

select, button, input,
.wp-element-button,
.darkmysite_switch,
.site-title,
.site-description {
	cursor: url("/cursors/link-select.cur"), auto;
}

::selection {
  color: #fff;
  background: rgba(0, 0, 0, 0.99);
}

main,
header {
	font-size: 1rem;
}

main {
	/*From here: https://fluidtypography.com/#app-get-started*/
	/* Settings: 414-1280; 16-20; 1.6-1.3*/
	font-size: clamp(1rem, 0.462vw + 0.88rem, 1.25rem);
line-height: clamp(1.6rem, 0.046vw + 1.588rem, 1.625rem);
}

article {
	font-family: var(--sans);
	line-height: 1.6;
  word-spacing: 0.16em;
}

h1:not(.site-title) {
  font-size: 2.5em;
  margin: 0.67em 0;
  text-align: center;
}

:where(h1, h2, h3, h4) {
	text-rendering: optimizeLegibility;
	line-height: 1.4em;
}

article :where(h2, h3) {
	margin-bottom: 0.7em;
}

p {
	font-size: 1.2em;
	text-align: justify;
	text-justify: inter-word;
}

p:first-of-type:first-line {
	color: var(--initialLine);
}

li {
  margin-bottom: 0.5em;
}

/* This makes sure the first line of blockquotes are not colored since in Wordpress, a blockquote content has a paragraph tag applied to it. */
:where(blockquote, footer, .comments-area) p:first-of-type:first-line {
	color: inherit;
}
:where(p, blockquote, img, pre, ul, ol) + p:not(.note) {
  text-indent: var(--paraIndent);
}
section > h3 + p::first-letter,
section > h2 + p::first-letter,
div.entry-content > p:not(.nostyle):first-child::first-letter {
	color: var(--drop);
  border-left: 2px solid var(--drop);
  border-top: 2px solid var(--drop);
  float: left;
  font-family: Georgia;
  font-size: 65px;
  line-height: 60px;
  padding-top: 4px;
  padding-right: 12px;
  padding-left: 3px;
}

:where(aside, article) a {
	color: var(--primary);
	text-underline-position: under;
	text-decoration: underline 2px;
	transition: all 0.3s linear;
  background: linear-gradient(to right, #00d1b1 0%, #278fc6 98%);
  background-size: 0px 2px;
  background-repeat: no-repeat;
  background-position: left 10%;
  text-shadow: 0;
}

article a:hover {
  background-size: 100% 2px;
  color: var(--secondary);
}

article a:focus {
  color: var(--secondary);
}

/* Handling external links to show an icon after them, but excluding links that are part of the TesterStories site. */

a[href*="http"]::after,
a[href*="https"]::after {
  content: "";
  width: 16px;
  height: 16px;
  margin-left: 4px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z'/%3E%3Cpath fill-rule='evenodd' d='M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z'/%3E%3C/svg%3E");
  background-position: center;
  background-repeat: no-repeat;
  background-size: contain;
  display: inline-block;
}

a[href^="https://www.linkedin.com/"]::after {
  content: none;
}

a[href^="https://testerstories.com/"]::after {
  display: none !important;
}

img.framed {
  --b: 10px;
  margin: 0 auto;
  padding: var(--b);
  border: calc(2 * var(--b)) solid #0000;
  border-radius: 25px;
  outline: 1px solid #000;
  outline-offset: calc(-1 * var(--b));
  background: conic-gradient(from 90deg at 1px 1px, #0000 90deg, #000 0);
}

img.backframed {
  margin: 0 auto;
  border: 3px solid black;
  box-shadow: -50px -50px 0 -40px #555555, 50px 50px 0 -40px #555555;
}

.note {
  border: 1px solid rgb(107, 113, 177);
  color: var(--note);
  border-radius: 16px;
  padding: 0.5em 0.8em;
  margin: 1.9em;
}

.post {
	background-color: white;
}

.entry-content li {
	font-size: 1.2em;
}

.simplequote {
	background: #fff url(/2014/08/learning-capybara-part-2/images/box_quote.png) no-repeat;
	padding: 5px;
	margin-top: 20px; margin-bottom: 20px;
	margin-left: 50px; margin-right: 50px;
	border: 3px solid #cecece;
	text-indent: 25px;
}

p.example {
	padding: 1ex;
	margin-right: 50px; margin-left: 50px;
	border: .5ex solid #808080;
	color: #000000;
	line-height: 1.2;
	text-indent: 0em;
}

#headquote blockquote {
	text-align: left;
	margin: 0 auto 20px auto;
	color: #555;
	background: #eee url(/2014/08/learning-capybara-part-2/images/quote_top.gif) no-repeat top left;
}

#headquote blockquote {
	width: 370px;
	font-size: 110%;
	letter-spacing: -1px;
	line-height: 1.2em;
}

#headquote #quote {
	margin-left: 40px;
	padding: 20px 20px 10px 20px;
	background: url(/2014/08/learning-capybara-part-2/images/quote_bottom.gif) no-repeat right bottom;
}

#headquote #author {
	margin: 0;
	text-align: center;
	padding: 0 0 10px 0;
	color: #999;
	font-size: 95%;
}

#headquote blockquote strong {
	color: #000;
	font-weight: normal;
}

/* Center images. */

img {
	display: block;
  margin: 0 auto;
}

img.smaller {
  width: 200px;
}

img.even-smaller {
  width: 100px;
}

table td.code {
  font-family: "Courier New", courier, monospace;
  font-size: 11.5px;
}

p.box {
	font-family: Georgia, "Times New Roman", Times, serif;
	text-align: justify;
	padding-top: 25px;
	margin: 0;
	line-height: 1.2;
}

pre.box {
	white-space: pre-wrap;
	background-color: white;
	border: 1px solid;
}

p.tip {
	padding-bottom: 10px; padding-top: 10px;
	padding-right: 10px; padding-left: 10px;
	border: 1px solid;
}

div.aside {
	padding-bottom: 10px; padding-top: 10px;
	padding-right: 10px; padding-left: 10px;
	margin-right: 50px; margin-left: 50px;
	border: 1px dotted;
}

div.aside pre {
	white-space: pre-wrap;
}

pre.view {
	font-family: "Courier New", Courier, monospace;
        //font-size: 16px;
	padding-bottom: 10px; padding-top: 10px;
	padding-right: 10px; padding-left: 10px;
	white-space: pre-wrap;
	background: rgb(255,255,255); /* Old browsers */
	background: -moz-linear-gradient(top,  rgba(255,255,255,1) 0%, rgba(229,229,229,1) 100%); /* FF3.6+ */
	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(100%,rgba(229,229,229,1))); /* Chrome,Safari4+ */
	background: -webkit-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(229,229,229,1) 100%); /* Chrome10+,Safari5.1+ */
	background: -o-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(229,229,229,1) 100%); /* Opera 11.10+ */
	background: -ms-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(229,229,229,1) 100%); /* IE10+ */
	background: linear-gradient(to bottom,  rgba(255,255,255,1) 0%,rgba(229,229,229,1) 100%); /* W3C */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e5e5e5',GradientType=0 ); /* IE6-9 */
	border: 1px solid;
	text-align: justify;
}

pre.view .string {
	color: #3366CC;
}

pre.view .sub {
        color: #8333FF;
}

pre.view .comment {
	color: #009900;
}

pre.view .highlight {
	background-color: #FFFF00;
	border: 1px solid;
	border-style: dotted;
}

pre.output .highlight {
	background-color: rgb(255,255,255);
	color: red;
	border: 1px solid;
	border-style: dotted;
}

pre.output {
	font-family: "Courier New", Courier, monospace;
        //font-size: 16px;
	padding-bottom: 10px; padding-top: 10px;
	padding-right: 10px; padding-left: 10px;
	white-space: pre-wrap;
	background: black;
	color: white;
}

blockquote {
  position: relative;
  width: 80%;
  margin: 50px auto;
  padding: 1.2em 30px 1.2em 55px;
  color: var(--bq-color);
  background-color: var(--bq-back);
  border-left: 8px solid #78c0a8;
  text-align: justify;
}

blockquote::before {
  position: absolute;
	left: 5px;
	top: -10px;
	/* Line height needed here to avoid the quote appearing out of place due to calculated line heights for the article. */
	line-height: 1.6;
	content: "\201C";
	color: #78c0a8;
	font-size: 4em;
}

blockquote::after {
	content: "";
}

blockquote span {
	display: block;
	color: #333333;
	font-style: normal;
  font-weight: bold;
  margin-top: 1em;
}

img.frame {
  --b: 10px;
  padding: var(--b);
  border: calc(2 * var(--b)) solid #0000;
  outline: 1px solid #000;
  outline-offset: calc(-1 * var(--b));
  border-radius: 25px;
  background: conic-gradient(from 90deg at 1px 1px, #0000 90deg, #000 0);
  display: block;
  margin: auto;
  margin-bottom: 1rem;
}

code {
  font-size: 0.9em;
  padding: 0.0625rem 0.5rem;
  border-radius: 0.125rem;
  border: 1px solid #d33a2c;
  box-shadow: 1px 1px #d33a2c, 2px 2px #d33a2c;
  margin: 0 0.25rem;
  color: #d33a2c;
  font-family: monospace;
}

pre {
  font-family: var(--mono);
  max-width: 100%;
	padding: 0;
}

pre code {
  word-spacing: normal;
  letter-spacing: normal;
  font-family: var(--mono);
  padding-left: 10px;
  color: #e9e9f4;
  background: #282936;
  display: block;
  max-width: 100%;
  overflow-x: scroll;
  /*font-size: 0.8em;*/

  border: 1px solid #282936;
  border-radius: 10px;
  box-shadow: 1px 1px #282936, 2px 2px #282936;
}

pre code::-webkit-scrollbar {
  -webkit-appearance: none;
  appearance: none;
}

pre code::-webkit-scrollbar:vertical {
  width: 11px;
}

pre code::-webkit-scrollbar:horizontal {
  height: 11px;
}

pre code::-webkit-scrollbar-thumb {
  border-radius: 8px;
  border: 2px solid white;
  background-color: rgba(0, 0, 0, 0.5);
}

/* The div part is only needed for long-form content that is pre-formatted. */

pre code div {
	line-height: 1.5em;
}

/* This would be for prefromatted material that is not literally from a game or simulation but is meant to indicate something about the details of the game or simulation. */

pre p {
  border: 2px solid grey;
  border-radius: 5px;
  padding: 0.8em;
	padding-top: 0;
	margin: 0;
}</style>
			</head>
	<body class="post-template-default single single-post postid-1800 single-format-standard custom-background wp-embed-responsive custom-background-image">
		<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-dark-grayscale"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0 0.49803921568627"></fefuncr><fefuncg type="table" tablevalues="0 0.49803921568627"></fefuncg><fefuncb type="table" tablevalues="0 0.49803921568627"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-grayscale"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0 1"></fefuncr><fefuncg type="table" tablevalues="0 1"></fefuncg><fefuncb type="table" tablevalues="0 1"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-purple-yellow"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0.54901960784314 0.98823529411765"></fefuncr><fefuncg type="table" tablevalues="0 1"></fefuncg><fefuncb type="table" tablevalues="0.71764705882353 0.25490196078431"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-blue-red"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0 1"></fefuncr><fefuncg type="table" tablevalues="0 0.27843137254902"></fefuncg><fefuncb type="table" tablevalues="0.5921568627451 0.27843137254902"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-midnight"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0 0"></fefuncr><fefuncg type="table" tablevalues="0 0.64705882352941"></fefuncg><fefuncb type="table" tablevalues="0 1"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-magenta-yellow"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0.78039215686275 1"></fefuncr><fefuncg type="table" tablevalues="0 0.94901960784314"></fefuncg><fefuncb type="table" tablevalues="0.35294117647059 0.47058823529412"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-purple-green"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0.65098039215686 0.40392156862745"></fefuncr><fefuncg type="table" tablevalues="0 1"></fefuncg><fefuncb type="table" tablevalues="0.44705882352941 0.4"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-blue-orange"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0.098039215686275 1"></fefuncr><fefuncg type="table" tablevalues="0 0.66274509803922"></fefuncg><fefuncb type="table" tablevalues="0.84705882352941 0.41960784313725"></fefuncb><fefunca type="table" tablevalues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg>		<div id="container" class="site container">
	<header id="masthead" class="site-header animated fadeInDown" role="banner">

	<a class="screen-reader-text skip-link" href="#main-content">Skip to content</a>
	<a class="screen-reader-text skip-link" href="#sidebar-widget-area">Skip to sidebar</a>
	<a class="screen-reader-text skip-link" href="#page-footer">Skip to footer</a>
	<div id="site-identity" class="site-identity">
		<a href="/" class="home-link animated fadeIn" title="Stories from a Software Tester" rel="home">
			<div class="title-description">
				<h1 class="site-title">Stories from a Software Tester</h1>
				<h2 class="site-description">Twice upon a time, in another space, no distance in any direction from here &#8230;</h2>
			</div>
		</a> 

	</div>
<!--/site-identity-->

	<nav id="nav-menu" class="site-navigation main-navigation" role="navigation" aria-label="Main Navigation">
		<button id="nav-button" class="menu-toggle" role="button">
			<span class="screen-reader-text">Menu</span>
			<span class="genericon" aria-hidden="true"></span>
		</button>
		<ul id="primary-menu" class="primary-menu">
<li id="menu-item-3923" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-3923"><a href="/">Home</a></li>
<li id="menu-item-2051" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2051"><a href="/about-tester-stories/">About Tester Stories</a></li>
<li id="menu-item-2050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2050"><a href="/who-am-i/">Who Am I</a></li>
<li id="menu-item-2048" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2048"><a href="/just-for-fun/">Just For Fun</a></li>
</ul>	</nav><!--/navigation-->


<form role="search" method="get" class="search-form" action="https://testerstories.com/">
	<label>
		<span class="screen-reader-text">Search for:</span>
		<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:">
	</label>
	<button type="submit" class="search-submit"><span class="genericon genericon-search" aria-hidden="true"></span><span class="screen-reader-text">Search</span></button>
</form>
</header><!--/header-->

<main id="main-content" class="main-content" role="main">
<article id="post-1800" class="post-1800 post type-post status-publish format-standard hentry category-automation category-capybara">
<header class="entry-header">
	<span class="entry-meta"><span class="cat-links"><span class="screen-reader-text">Published in</span><span class="genericon genericon-category" aria-hidden="true"></span><a href="/category/automation/" rel="category tag">Automation</a><span aria-hidden="true">, </span><a href="/category/automation/capybara/" rel="category tag">Capybara</a></span></span><h1 class="entry-title">Learning Capybara, Part 2</h1>	<span class="byline">
	Written by <a href="/author/administrator/" class="entry-author" rel="author">Jeff Nyman</a>	</span><!-- .byline -->
	<span class="entry-meta">
	<span class="genericon genericon-time" aria-hidden="true"></span><a href="/2014/08/22/" rel="bookmark" class="entry-date"><time datetime="2014-08-22T08:19:17-05:00">22 August 2014</time></a>		<span class="comments-link">
			<span class="genericon genericon-comment" aria-hidden="true"></span>
			<a href="/2014/08/learning-capybara-part-2/#respond">Leave a comment</a>		</span>
		</span><!-- .entry-meta -->
</header><!-- .entry-header -->

	<div class="entry-content">
		<p>In the previous post in this series, I showed you how you can execute Capybara via its own session object, which means you did not have to incorporate any of the Capybara DSL into your own logic. Here I&#8217;ll do the exact opposite of that by showing you how to incorporate Capybara into your own particular logic. Then I&#8217;ll show how that segues nicely into fitting Capybara within different test runners.</p>
<p><span id="more-1800"></span></p>
<p>To get started, create a script called <strong>capy-module.rb</strong>. Let&#8217;s first create the basis for our script:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c9816d122837874" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'capybara/dsl'
require 'rspec/expectations'

Capybara.default_driver = :selenium

module WeightPage
end

class TestRunner
  include WeightPage

  def mercury_test
  end
end

TestRunner.new.mercury_test</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-14">14</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-15">15</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9816d122837874-16">16</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'capybara/dsl'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-2">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'rspec/expectations'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-3">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-4">
<span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">default_driver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">selenium</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-5">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-6">
<span class="crayon-r">module</span><span class="crayon-h"> </span><span class="crayon-i">WeightPage</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-7"><span class="crayon-st">end</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-8">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-9">
<span class="crayon-r">class</span><span class="crayon-h"> </span><span class="crayon-i">TestRunner</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-10">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-i">WeightPage</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-11">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-12">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-v">mercury</span><span class="crayon-sy">_</span>test</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-13">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-14"><span class="crayon-st">end</span></div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-15">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9816d122837874-16">
<span class="crayon-v">TestRunner</span><span class="crayon-sy">.</span><span class="crayon-v">new</span><span class="crayon-sy">.</span><span class="crayon-v">mercury_test</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p></p>
<p>Here I have a TestRunner class that includes the WeightPage module. The TestRunner has its mecury_test() method executed although nothing is actually happening yet. Do note that, unlike the script from the first post, I&#8217;m requiring the Capybara DSL file (<code>require 'capybara/dsl'</code>) rather than just Capybara itself (<code>require 'capybara'</code>). I&#8217;m doing this because the &#8216;dsl&#8217; file contains all the Capybara methods that need to be &#8220;mixed in&#8221;.</p>
<h2>Mixing in Capybara</h2>
<p>So let&#8217;s handle that mix in process. Change the script accordingly:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c98172975802512" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'capybara/dsl'
require 'rspec/expectations'

Capybara.default_driver = :selenium

module WeightPage
  include Capybara::DSL
  include RSpec::Matchers
end

class TestRunner
  include WeightPage

  def mercury_test
  end
end

TestRunner.new.mercury_test</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-6">6</div>
<div class="crayon-num crayon-marked-num crayon-top" data-line="urvanov-syntax-highlighter-647f426c98172975802512-7">7</div>
<div class="crayon-num crayon-marked-num crayon-bottom crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-14">14</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-15">15</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-16">16</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-17">17</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98172975802512-18">18</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98172975802512-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'capybara/dsl'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98172975802512-2">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'rspec/expectations'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98172975802512-3">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98172975802512-4">
<span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">default_driver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">selenium</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98172975802512-5">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98172975802512-6">
<span class="crayon-r">module</span><span class="crayon-h"> </span><span class="crayon-i">WeightPage</span>
</div>
<div class="crayon-line crayon-marked-line crayon-top" id="urvanov-syntax-highlighter-647f426c98172975802512-7">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-v">Capybara</span><span class="crayon-o">::</span><span class="crayon-i">DSL</span>
</div>
<div class="crayon-line crayon-marked-line crayon-bottom crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98172975802512-8">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-v">RSpec</span><span class="crayon-o">::</span><span class="crayon-i">Matchers</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98172975802512-9"><span class="crayon-st">end</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98172975802512-10">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98172975802512-11">
<span class="crayon-r">class</span><span class="crayon-h"> </span><span class="crayon-i">TestRunner</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98172975802512-12">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-i">WeightPage</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98172975802512-13">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98172975802512-14">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-v">mercury</span><span class="crayon-sy">_</span>test</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98172975802512-15">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98172975802512-16"><span class="crayon-st">end</span></div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98172975802512-17">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98172975802512-18">
<span class="crayon-v">TestRunner</span><span class="crayon-sy">.</span><span class="crayon-v">new</span><span class="crayon-sy">.</span><span class="crayon-v">mercury_test</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p></p>
<p>You see here that you can include the Capybara DSL modules into your own modules or classes. Thus in my WeightPage, Capybara::DSL is included. This means I&#8217;m going to be able to use Capybara&#8217;s DSL methods that you saw in the first post &#8212; like visit(), click_on(), etc &#8212; as if I had defined them in my own logic. Notice that this approach is no different than how you would include anything else, such as RSpec&#8217;s matchers. If you follow this pattern in your own code, you can now mix in &#8212; and thus use &#8212; any of the standard Capybara methods into your own module or class methods.</p>
<p>You&#8217;ll notice that this script is using something called the <code>default_driver</code>. As mentioned in the first post, Capybara defaults to assuming you are testing against a Rack-based application. That means that behind the scenes the Capybara.default_driver that I used above is set to :rack_test. That would mean the driver being used is Rack::Test as opposed to Selenium WebDriver. Thus, upon execution, no browser would open and no HTTP requests would be made. With the session object, I just passed the driver I wanted to the session. However, here I&#8217;m not using a session object any more. So here I set the default_driver to be :selenium so that Capybara knows what driver and library to apply.</p>
<p>First, let&#8217;s check that the DSL part works. Let&#8217;s use the visit() method.</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c98174821112817" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'capybara/dsl'
require 'rspec/expectations'

Capybara.default_driver = :selenium

module WeightPage
  include Capybara::DSL
  include RSpec::Matchers

  def url
    'http://localhost:9292/weight'
  end
end

class TestRunner
  include WeightPage

  def mercury_test
    visit url
  end
end

TestRunner.new.mercury_test</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-9">9</div>
<div class="crayon-num crayon-marked-num crayon-top crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-10">10</div>
<div class="crayon-num crayon-marked-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-11">11</div>
<div class="crayon-num crayon-marked-num crayon-bottom crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-14">14</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-15">15</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-16">16</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-17">17</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-18">18</div>
<div class="crayon-num crayon-marked-num crayon-top crayon-bottom" data-line="urvanov-syntax-highlighter-647f426c98174821112817-19">19</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-20">20</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-21">21</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-22">22</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98174821112817-23">23</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98174821112817-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'capybara/dsl'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98174821112817-2">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'rspec/expectations'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98174821112817-3">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98174821112817-4">
<span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">default_driver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">selenium</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98174821112817-5">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98174821112817-6">
<span class="crayon-r">module</span><span class="crayon-h"> </span><span class="crayon-i">WeightPage</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98174821112817-7">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-v">Capybara</span><span class="crayon-o">::</span><span class="crayon-i">DSL</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98174821112817-8">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-v">RSpec</span><span class="crayon-o">::</span><span class="crayon-i">Matchers</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98174821112817-9">&nbsp;</div>
<div class="crayon-line crayon-marked-line crayon-top crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98174821112817-10">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-i">url</span>
</div>
<div class="crayon-line crayon-marked-line" id="urvanov-syntax-highlighter-647f426c98174821112817-11">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'http://localhost:9292/weight'</span>
</div>
<div class="crayon-line crayon-marked-line crayon-bottom crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98174821112817-12">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98174821112817-13"><span class="crayon-st">end</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98174821112817-14">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98174821112817-15">
<span class="crayon-r">class</span><span class="crayon-h"> </span><span class="crayon-i">TestRunner</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98174821112817-16">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-i">WeightPage</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98174821112817-17">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98174821112817-18">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-v">mercury</span><span class="crayon-sy">_</span>test</div>
<div class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="urvanov-syntax-highlighter-647f426c98174821112817-19">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">visit</span><span class="crayon-h"> </span><span class="crayon-i">url</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98174821112817-20">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98174821112817-21"><span class="crayon-st">end</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98174821112817-22">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98174821112817-23">
<span class="crayon-v">TestRunner</span><span class="crayon-sy">.</span><span class="crayon-v">new</span><span class="crayon-sy">.</span><span class="crayon-v">mercury_test</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p>
<p>If you run this, you&#8217;ll find that the weight page is visited in the browser. Note that I&#8217;m calling the Capybara visit() method directly in mercury_test(). That&#8217;s because the TestRunner is including WeightPage and WeightPage is including the Capybara DSL.</p>
<p>Now, let&#8217;s fill out the mercury_test() method in the TestRunner class and provide stub methods in the WeightPage module:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c98176765629666" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'capybara/dsl'
require 'rspec/expectations'

Capybara.default_driver = :selenium

module WeightPage
  include Capybara::DSL
  include RSpec::Matchers

  def url
    'http://localhost:9292/weight'
  end

  def convert_weight_for_mercury(value)
  end

  def expect_exact_weight(merc_weight)
  end

  def expect_approximate_weight(merc_weight)
  end
end

class TestRunner
  include WeightPage

  def mercury_test
    visit url
    convert_weight_for_mercury(200)
    expect_exact_weight(75.6)
    expect_approximate_weight(75)
  end
end

TestRunner.new.mercury_test</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-13">13</div>
<div class="crayon-num crayon-marked-num crayon-top crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-14">14</div>
<div class="crayon-num crayon-marked-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-15">15</div>
<div class="crayon-num crayon-marked-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-16">16</div>
<div class="crayon-num crayon-marked-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-17">17</div>
<div class="crayon-num crayon-marked-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-18">18</div>
<div class="crayon-num crayon-marked-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-19">19</div>
<div class="crayon-num crayon-marked-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-20">20</div>
<div class="crayon-num crayon-marked-num crayon-bottom" data-line="urvanov-syntax-highlighter-647f426c98176765629666-21">21</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-22">22</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-23">23</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-24">24</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-25">25</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-26">26</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-27">27</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-28">28</div>
<div class="crayon-num crayon-marked-num crayon-top" data-line="urvanov-syntax-highlighter-647f426c98176765629666-29">29</div>
<div class="crayon-num crayon-marked-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-30">30</div>
<div class="crayon-num crayon-marked-num crayon-bottom" data-line="urvanov-syntax-highlighter-647f426c98176765629666-31">31</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-32">32</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-33">33</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-34">34</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98176765629666-35">35</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98176765629666-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'capybara/dsl'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-2">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'rspec/expectations'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98176765629666-3">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-4">
<span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">default_driver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">selenium</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98176765629666-5">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-6">
<span class="crayon-r">module</span><span class="crayon-h"> </span><span class="crayon-i">WeightPage</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98176765629666-7">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-v">Capybara</span><span class="crayon-o">::</span><span class="crayon-i">DSL</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-8">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-v">RSpec</span><span class="crayon-o">::</span><span class="crayon-i">Matchers</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98176765629666-9">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-10">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-i">url</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98176765629666-11">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'http://localhost:9292/weight'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-12">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98176765629666-13">&nbsp;</div>
<div class="crayon-line crayon-marked-line crayon-top crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-14">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">convert_weight_for_mercury</span><span class="crayon-sy">(</span><span class="crayon-v">value</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-marked-line" id="urvanov-syntax-highlighter-647f426c98176765629666-15">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line crayon-marked-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-16">&nbsp;</div>
<div class="crayon-line crayon-marked-line" id="urvanov-syntax-highlighter-647f426c98176765629666-17">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">expect_exact_weight</span><span class="crayon-sy">(</span><span class="crayon-v">merc_weight</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-marked-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-18">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line crayon-marked-line" id="urvanov-syntax-highlighter-647f426c98176765629666-19">&nbsp;</div>
<div class="crayon-line crayon-marked-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-20">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">expect_approximate_weight</span><span class="crayon-sy">(</span><span class="crayon-v">merc_weight</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-marked-line crayon-bottom" id="urvanov-syntax-highlighter-647f426c98176765629666-21">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-22"><span class="crayon-st">end</span></div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98176765629666-23">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-24">
<span class="crayon-r">class</span><span class="crayon-h"> </span><span class="crayon-i">TestRunner</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98176765629666-25">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-i">WeightPage</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-26">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98176765629666-27">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-v">mercury</span><span class="crayon-sy">_</span>test</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-28">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">visit</span><span class="crayon-h"> </span><span class="crayon-i">url</span>
</div>
<div class="crayon-line crayon-marked-line crayon-top" id="urvanov-syntax-highlighter-647f426c98176765629666-29">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">convert_weight_for_mercury</span><span class="crayon-sy">(</span><span class="crayon-cn">200</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-marked-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-30">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect_exact_weight</span><span class="crayon-sy">(</span><span class="crayon-cn">75.6</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-marked-line crayon-bottom" id="urvanov-syntax-highlighter-647f426c98176765629666-31">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect_approximate_weight</span><span class="crayon-sy">(</span><span class="crayon-cn">75</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-32">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98176765629666-33"><span class="crayon-st">end</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98176765629666-34">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98176765629666-35">
<span class="crayon-v">TestRunner</span><span class="crayon-sy">.</span><span class="crayon-v">new</span><span class="crayon-sy">.</span><span class="crayon-v">mercury_test</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p></p>
<p>Notice here that I&#8217;m calling a series of methods within mercury_test() and those are being called against the WeightPage module, which is included in the TestRunner. What this is doing is allowing me to treat WeightPage as a page object, of sorts. It&#8217;s not quite the same thing as a page object since I&#8217;m not instantiating WeightPage at all but, conceptually, the same pattern applies.</p>
<p>The <a href="https://code.google.com/p/selenium/wiki/PageObjects">Page Object</a> pattern is a simple way of structuring your test framework if you are dealing with browser-based applications. You simply model each page &#8212; or even each major UI component &#8212; as an object. Aspects such as CSS selectors can be stored as properties on the page object and you can implement methods to manipulate the page.</p>
<p>Now let&#8217;s fill in the logic for the methods in WeightPage:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c98177149948246" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'capybara/dsl'
require 'rspec/expectations'

Capybara.default_driver = :selenium

module WeightPage
  include Capybara::DSL
  include RSpec::Matchers

  def url
    'http://localhost:9292/weight'
  end

  def convert_weight_for_mercury(value)
    fill_in 'wt', with: value
    click_on 'calculate'
  end

  def expect_exact_weight(merc_weight)
    expect(mercury_value.to_f).to eq(merc_weight)
  end

  def expect_approximate_weight(merc_weight)
    expect(mercury_value.to_i).to be_within(0.9).of(merc_weight.to_f)
  end

  private

  def mercury_value
    page.find_field('outputmrc').value
  end
end

class TestRunner
  include WeightPage

  def mercury_test
    visit url
    convert_weight_for_mercury(200)
    expect_exact_weight(75.6)
    expect_approximate_weight(75)
  end
end

TestRunner.new.mercury_test</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-14">14</div>
<div class="crayon-num crayon-marked-num crayon-top" data-line="urvanov-syntax-highlighter-647f426c98177149948246-15">15</div>
<div class="crayon-num crayon-marked-num crayon-bottom crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-16">16</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-17">17</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-18">18</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-19">19</div>
<div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-20">20</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-21">21</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-22">22</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-23">23</div>
<div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-24">24</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-25">25</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-26">26</div>
<div class="crayon-num crayon-marked-num crayon-top" data-line="urvanov-syntax-highlighter-647f426c98177149948246-27">27</div>
<div class="crayon-num crayon-marked-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-28">28</div>
<div class="crayon-num crayon-marked-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-29">29</div>
<div class="crayon-num crayon-marked-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-30">30</div>
<div class="crayon-num crayon-marked-num crayon-bottom" data-line="urvanov-syntax-highlighter-647f426c98177149948246-31">31</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-32">32</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-33">33</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-34">34</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-35">35</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-36">36</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-37">37</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-38">38</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-39">39</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-40">40</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-41">41</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-42">42</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-43">43</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-44">44</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98177149948246-45">45</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'capybara/dsl'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-2">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'rspec/expectations'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-3">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-4">
<span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">default_driver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">selenium</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-5">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-6">
<span class="crayon-r">module</span><span class="crayon-h"> </span><span class="crayon-i">WeightPage</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-7">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-v">Capybara</span><span class="crayon-o">::</span><span class="crayon-i">DSL</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-8">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-v">RSpec</span><span class="crayon-o">::</span><span class="crayon-i">Matchers</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-9">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-10">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-i">url</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-11">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'http://localhost:9292/weight'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-12">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-13">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-14">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">convert_weight_for_mercury</span><span class="crayon-sy">(</span><span class="crayon-v">value</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-marked-line crayon-top" id="urvanov-syntax-highlighter-647f426c98177149948246-15">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">fill</span><span class="crayon-sy">_</span>in<span class="crayon-h"> </span><span class="crayon-s">'wt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">with</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">value</span>
</div>
<div class="crayon-line crayon-marked-line crayon-bottom crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-16">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">click</span><span class="crayon-sy">_</span>on<span class="crayon-h"> </span><span class="crayon-s">'calculate'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-17">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-18">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-19">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">expect_exact_weight</span><span class="crayon-sy">(</span><span class="crayon-v">merc_weight</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-20">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">mercury_value</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-e">eq</span><span class="crayon-sy">(</span><span class="crayon-v">merc_weight</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-21">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-22">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-23">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">expect_approximate_weight</span><span class="crayon-sy">(</span><span class="crayon-v">merc_weight</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-24">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">mercury_value</span><span class="crayon-sy">.</span><span class="crayon-v">to_i</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-e">be_within</span><span class="crayon-sy">(</span><span class="crayon-cn">0.9</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">of</span><span class="crayon-sy">(</span><span class="crayon-v">merc_weight</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-25">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-26">&nbsp;</div>
<div class="crayon-line crayon-marked-line crayon-top" id="urvanov-syntax-highlighter-647f426c98177149948246-27">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-m">private</span>
</div>
<div class="crayon-line crayon-marked-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-28">&nbsp;</div>
<div class="crayon-line crayon-marked-line" id="urvanov-syntax-highlighter-647f426c98177149948246-29">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-v">mercury</span><span class="crayon-sy">_</span>value</div>
<div class="crayon-line crayon-marked-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-30">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">page</span><span class="crayon-sy">.</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">value</span>
</div>
<div class="crayon-line crayon-marked-line crayon-bottom" id="urvanov-syntax-highlighter-647f426c98177149948246-31">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-32"><span class="crayon-st">end</span></div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-33">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-34">
<span class="crayon-r">class</span><span class="crayon-h"> </span><span class="crayon-i">TestRunner</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-35">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-i">WeightPage</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-36">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-37">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-v">mercury</span><span class="crayon-sy">_</span>test</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-38">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">visit</span><span class="crayon-h"> </span><span class="crayon-i">url</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-39">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">convert_weight_for_mercury</span><span class="crayon-sy">(</span><span class="crayon-cn">200</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-40">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect_exact_weight</span><span class="crayon-sy">(</span><span class="crayon-cn">75.6</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-41">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect_approximate_weight</span><span class="crayon-sy">(</span><span class="crayon-cn">75</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-42">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-43"><span class="crayon-st">end</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98177149948246-44">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98177149948246-45">
<span class="crayon-v">TestRunner</span><span class="crayon-sy">.</span><span class="crayon-v">new</span><span class="crayon-sy">.</span><span class="crayon-v">mercury_test</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p></p>
<p>I&#8217;m not saying that the particular coding practices I applied here are necessarily stellar but they should give you an idea of what&#8217;s possible when you include the Capybara DSL into your own logic. As just one example, you saw how this allowed you to use the page object pattern fairly effectively.</p>
<h2>Using an Actual Test Runner with Capybara</h2>
<p>You might want to use Ruby&#8217;s basic unit test library (Test::Unit) and have your Capybara-based tests run in the context of that. To try this out, create a file called <strong>capy-test-unit.rb</strong>. Let&#8217;s first get the structure in place:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c9817b857692562" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'capybara'
require 'minitest/autorun'

class CapybaraTest &lt; Minitest::Test
  include Capybara::DSL
  
  def teardown
    Capybara.reset_sessions!
    Capybara.use_default_driver
  end
end

class GUITest &lt; CapybaraTest
  def setup
    Capybara.current_driver = :selenium
  end
end

class MercuryWeightTest &lt; GUITest
  def test_weight_on_mercury
  end
end</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-14">14</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-15">15</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-16">16</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-17">17</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-18">18</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-19">19</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-20">20</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-21">21</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9817b857692562-22">22</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'capybara'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-2">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'minitest/autorun'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-3">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-4">
<span class="crayon-r">class</span><span class="crayon-h"> </span><span class="crayon-v">CapybaraTest</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">Minitest</span><span class="crayon-o">::</span><span class="crayon-i">Test</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-5">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-v">Capybara</span><span class="crayon-o">::</span><span class="crayon-i">DSL</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-6"><span class="crayon-h">&nbsp;&nbsp;</span></div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-7">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-i">teardown</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-8">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">reset_sessions</span><span class="crayon-o">!</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-9">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">use_default</span><span class="crayon-sy">_</span>driver</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-10">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-11"><span class="crayon-st">end</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-12">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-13">
<span class="crayon-r">class</span><span class="crayon-h"> </span><span class="crayon-v">GUITest</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-i">CapybaraTest</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-14">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-i">setup</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-15">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">current_driver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">selenium</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-16">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-17"><span class="crayon-st">end</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-18">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-19">
<span class="crayon-r">class</span><span class="crayon-h"> </span><span class="crayon-v">MercuryWeightTest</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-i">GUITest</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-20">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-v">test_weight_on</span><span class="crayon-sy">_</span>mercury</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-21">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9817b857692562-22"><span class="crayon-st">end</span></div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p>
<p>To be clear, here I&#8217;m using Minitest rather than Test::Unit directly. Ruby 1.9 included an updatd version of Test::Unit and called this new version MiniTest. There are many ways to structure your test logic. Above I have my MercuryWeightTest which inherits from GUITest. I do this because perhaps I might also have an APITest that I can run the same test logic against. You can see I have a test_weight_on_mercury() method. The GUITest derives from the CapybaraTest class.</p>
<p>You can see that in the CapybaraTest class I&#8217;m mixing in the Capybara DSL. The inheritance chain you just saw is what&#8217;s going to allow me to use Capybara&#8217;s API in my tests. Apart from setting the default driver in the setup() block, you see that I also use a teardown block. This makes a call to something referred to as <code>reset_sessions!</code> and you might wonder what that is. This call invokes some code in the underlying driver. I say &#8220;some code&#8221; because that code will differ depending on the driver. In the case of Selenium, for example, this call deletes all cookies to ensure that you start each scenario with no leakage from the previous one. Different drivers will provide their own implementation for reset_sessions.</p>
<p>All that&#8217;s needed here is to use the logic we have been using and populate the test method:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c98181760696457" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'capybara'
require 'minitest/autorun'

class CapybaraTest &lt; Minitest::Test
  include Capybara::DSL
  
  def teardown
    Capybara.reset_sessions!
    Capybara.use_default_driver
  end
end

class GUITest &lt; CapybaraTest
  def setup
    Capybara.current_driver = :selenium
  end
end

class MercuryWeightTest &lt; GUITest
  def test_weight_on_mercury
    visit 'http://localhost:9292/weight'
    assert page.has_content? 'Your Weight On Astronomical Bodies'
    
    fill_in 'wt', with: '200'
    click_on 'calculate'
    
    assert page.find_field('outputmrc').value == '75.6'
    assert_in_delta 75, page.find_field('outputmrc').value.to_f, 0.9
  end
end</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-14">14</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-15">15</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-16">16</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-17">17</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-18">18</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-19">19</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-20">20</div>
<div class="crayon-num crayon-marked-num crayon-top" data-line="urvanov-syntax-highlighter-647f426c98181760696457-21">21</div>
<div class="crayon-num crayon-marked-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-22">22</div>
<div class="crayon-num crayon-marked-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-23">23</div>
<div class="crayon-num crayon-marked-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-24">24</div>
<div class="crayon-num crayon-marked-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-25">25</div>
<div class="crayon-num crayon-marked-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-26">26</div>
<div class="crayon-num crayon-marked-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-27">27</div>
<div class="crayon-num crayon-marked-num crayon-bottom crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-28">28</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-29">29</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98181760696457-30">30</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98181760696457-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'capybara'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-2">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'minitest/autorun'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98181760696457-3">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-4">
<span class="crayon-r">class</span><span class="crayon-h"> </span><span class="crayon-v">CapybaraTest</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">Minitest</span><span class="crayon-o">::</span><span class="crayon-i">Test</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98181760696457-5">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">include</span><span class="crayon-h"> </span><span class="crayon-v">Capybara</span><span class="crayon-o">::</span><span class="crayon-i">DSL</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-6"><span class="crayon-h">&nbsp;&nbsp;</span></div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98181760696457-7">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-i">teardown</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-8">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">reset_sessions</span><span class="crayon-o">!</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98181760696457-9">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">use_default</span><span class="crayon-sy">_</span>driver</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-10">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98181760696457-11"><span class="crayon-st">end</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-12">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98181760696457-13">
<span class="crayon-r">class</span><span class="crayon-h"> </span><span class="crayon-v">GUITest</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-i">CapybaraTest</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-14">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-i">setup</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98181760696457-15">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">current_driver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">selenium</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-16">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98181760696457-17"><span class="crayon-st">end</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-18">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98181760696457-19">
<span class="crayon-r">class</span><span class="crayon-h"> </span><span class="crayon-v">MercuryWeightTest</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-i">GUITest</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-20">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-v">test_weight_on</span><span class="crayon-sy">_</span>mercury</div>
<div class="crayon-line crayon-marked-line crayon-top" id="urvanov-syntax-highlighter-647f426c98181760696457-21">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">visit</span><span class="crayon-h"> </span><span class="crayon-s">'http://localhost:9292/weight'</span>
</div>
<div class="crayon-line crayon-marked-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-22">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">assert</span><span class="crayon-h"> </span><span class="crayon-v">page</span><span class="crayon-sy">.</span><span class="crayon-v">has_content</span><span class="crayon-sy">?</span><span class="crayon-h"> </span><span class="crayon-s">'Your Weight On Astronomical Bodies'</span>
</div>
<div class="crayon-line crayon-marked-line" id="urvanov-syntax-highlighter-647f426c98181760696457-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line crayon-marked-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-24">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">fill</span><span class="crayon-sy">_</span>in<span class="crayon-h"> </span><span class="crayon-s">'wt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">with</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'200'</span>
</div>
<div class="crayon-line crayon-marked-line" id="urvanov-syntax-highlighter-647f426c98181760696457-25">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">click</span><span class="crayon-sy">_</span>on<span class="crayon-h"> </span><span class="crayon-s">'calculate'</span>
</div>
<div class="crayon-line crayon-marked-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line crayon-marked-line" id="urvanov-syntax-highlighter-647f426c98181760696457-27">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">assert</span><span class="crayon-h"> </span><span class="crayon-v">page</span><span class="crayon-sy">.</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">value</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">'75.6'</span>
</div>
<div class="crayon-line crayon-marked-line crayon-bottom crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-28">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">assert_in</span><span class="crayon-sy">_</span>delta<span class="crayon-h"> </span><span class="crayon-cn">75</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">page</span><span class="crayon-sy">.</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">value</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0.9</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98181760696457-29">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98181760696457-30"><span class="crayon-st">end</span></div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p></p>
<p>The output from running this file should be something like this:</p>
<pre>
Run options: --seed 46617

# Running:

.

Finished in 10.128993s, 0.0987 runs/s, 0.2962 assertions/s.

1 runs, 3 assertions, 0 failures, 0 errors, 0 skips
</pre>
<p>I won&#8217;t go into too much detail here since really it&#8217;s just another example of fitting in the DSL to a specific test framework rather than a home-grown one like the TestRunner example. What this shows you however is that rather than using your own custom test runner, as we did in capy-module.rb, you can hook Capybara into existing test solutions.</p>
<h2>Using RSpec with Capybara</h2>
<p>Continuing the theme, let&#8217;s look at hooking Capybara into RSpec. RSpec is without doubt one of the most popular Ruby test frameworks. Here I&#8217;ll show you the minimum to get the above example working in RSpec. I don&#8217;t intend to teach too much about RSpec here since that&#8217;s an entire topic unto itself, so it will help if you&#8217;ve had some exposure to it. First, in some project directory, create a directory called <strong>spec</strong>. Within that directory create a file called <strong>spec_helper.rb</strong>. This is going to be a small bit of logic:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c98184591015163" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'capybara/rspec'

Capybara.default_driver = :selenium</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98184591015163-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98184591015163-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98184591015163-3">3</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98184591015163-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'capybara/rspec'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98184591015163-2">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98184591015163-3">
<span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">default_driver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-v">selenium</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
<p></p>
<p>Notice here how I&#8217;m not using <code>require 'capybara'</code> as in the first post or even <code>require 'capybara/dsl'</code> as above. Instead I&#8217;m loading some RSpec support that Capybara provides by requiring &#8216;capybara/rspec&#8217;. This essentially lets you mix in the DSL to your specs.</p>
<p>Now, in that /spec directory, create a file called <strong>weight_on_mercury_spec.rb</strong> and put the following in it:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c98185578416992" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'spec_helper'

describe "weight", :type =&gt; :feature do

  it "will be calculated for Mercury" do
    visit 'http://localhost:9292/weight'
    expect(page).to have_content 'Your Weight On Astronomical Bodies'
    
    fill_in 'wt', with: '200'
    click_on 'calculate'
    
    expect(page.find_field('outputmrc').value).to eq('75.6')
    expect(page.find_field('outputmrc').value.to_f).to be_within(0.9).of('75'.to_f)
  end
end</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-14">14</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98185578416992-15">15</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98185578416992-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'spec_helper'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98185578416992-2">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98185578416992-3">
<span class="crayon-i">describe</span><span class="crayon-h"> </span><span class="crayon-s">"weight"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-v">type</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">feature</span><span class="crayon-h"> </span><span class="crayon-st">do</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98185578416992-4">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98185578416992-5">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">it</span><span class="crayon-h"> </span><span class="crayon-s">"will be calculated for Mercury"</span><span class="crayon-h"> </span><span class="crayon-st">do</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98185578416992-6">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">visit</span><span class="crayon-h"> </span><span class="crayon-s">'http://localhost:9292/weight'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98185578416992-7">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-v">have</span><span class="crayon-sy">_</span>content<span class="crayon-h"> </span><span class="crayon-s">'Your Weight On Astronomical Bodies'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98185578416992-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98185578416992-9">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">fill</span><span class="crayon-sy">_</span>in<span class="crayon-h"> </span><span class="crayon-s">'wt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">with</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'200'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98185578416992-10">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">click</span><span class="crayon-sy">_</span>on<span class="crayon-h"> </span><span class="crayon-s">'calculate'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98185578416992-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98185578416992-12">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">.</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">value</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-e">eq</span><span class="crayon-sy">(</span><span class="crayon-s">'75.6'</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98185578416992-13">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">.</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">value</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-e">be_within</span><span class="crayon-sy">(</span><span class="crayon-cn">0.9</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">of</span><span class="crayon-sy">(</span><span class="crayon-s">'75'</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98185578416992-14">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98185578416992-15"><span class="crayon-st">end</span></div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p></p>
<p>If from your project directory (the one that contains the /spec directory), you run the command <code>rspec</code>, your output from that should be something like this:</p>
<pre>
.

Finished in 10.57 seconds (files took 1.25 seconds to load)
1 example, 0 failures
</pre>
<p>In RSpec the describe() block is an example group. It contains a series of it() blocks that execute tests. Something to note above is that I &#8220;tagged&#8221; the example group with <code>:type => :feature</code>. This is necessary so that RSpec incorporates the Capybara DSL into the context for each RSpec block.</p>
<p>All of this runs through an actual browser, just as we&#8217;ve been doing, but now let&#8217;s consider some special aspects of headless execution. Most testers want a headless browser with good JavaScript support. A headless browser is one that runs without a UI. Headless browsers typically run tests faster than opening a real browser and make it easy to run in continuous integration environments, where it&#8217;s often the case that a windowing environment &#8212; whether Microsoft Windows or X11 on Linux &#8212; is not available. Capybara provides a couple of options here. <a href="https://github.com/thoughtbot/capybara-webkit">Capybara-WebKit</a> is a driver that wraps <a href="http://trac.webkit.org/wiki/QtWebKit">QtWebKit</a>. It provides a WebKit browser implementation that works well for headless implementations. However, one logistical difficulty is that you will need to install the Qt system libraries separately. Further, there is still a reliance on X11 being present on Linux distributions despite the browser being headless.</p>
<p><a href="https://github.com/teampoltergeist/poltergeist">Poltergeist</a> is another driver, which, in the background, will use QtWebKit. The difference here is that it wraps <a href="http://phantomjs.org/">PhantomJS</a>, which can be a little less difficult to work with than Capybara-WebKit. You will still need to install PhantomJS as a system dependency, but the PhantomJS project has tackled some of the issues around making QtWebKit purely headless. Specifically, you will not need X11 and you will not need to install the entire Qt framework, because PhantomJS bundles all this for you.</p>
<p>So let&#8217;s test this out by using Poltergeist. You will need the Poltergeist gem and the PhantomJS driver installed. See the respective links above to handle that. Once you&#8217;ve done that, change your spec_helper.rb file to look like this:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c98186260530420" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'capybara/rspec'
require 'capybara/poltergeist'

Capybara.default_driver = :selenium
Capybara.javascript_driver = :poltergeist</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98186260530420-1">1</div>
<div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98186260530420-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98186260530420-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98186260530420-4">4</div>
<div class="crayon-num crayon-marked-num crayon-top crayon-bottom" data-line="urvanov-syntax-highlighter-647f426c98186260530420-5">5</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98186260530420-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'capybara/rspec'</span>
</div>
<div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98186260530420-2">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'capybara/poltergeist'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98186260530420-3">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98186260530420-4">
<span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">default_driver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">selenium</span>
</div>
<div class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="urvanov-syntax-highlighter-647f426c98186260530420-5">
<span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">javascript_driver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-v">poltergeist</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
<p></p>
<p>So now in order to get a test to run headlessly using Capybara, you can use <code>:js => true</code> tag to switch to the Capybara.javascript_driver. This driver will be :selenium by default. However you can provide a specific driver option to switch to one specific driver, which you can see I did above. Now add a new test to weight_on_mercury_spec.rb:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c98189373032599" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'spec_helper'

describe "weight", :type =&gt; :feature do

  it "will be calculated for Mercury" do
    visit 'http://localhost:9292/weight'
    expect(page).to have_content 'Your Weight On Astronomical Bodies'
    
    fill_in 'wt', with: '200'
    click_on 'calculate'
    
    expect(page.find_field('outputmrc').value).to eq('75.6')
    expect(page.find_field('outputmrc').value.to_f).to be_within(0.9).of('75'.to_f)
  end

  it "will be calculated for Mercury headlessly", :js =&gt; true do
    visit 'http://localhost:9292/weight'
    expect(page).to have_content 'Your Weight On Astronomical Bodies'
    
    fill_in 'wt', with: '200'
    click_on 'calculate'
    
    expect(page.find_field('outputmrc').value).to eq('75.6')
    expect(page.find_field('outputmrc').value.to_f).to be_within(0.9).of('75'.to_f)
  end
end</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-14">14</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-15">15</div>
<div class="crayon-num crayon-marked-num crayon-top crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-16">16</div>
<div class="crayon-num crayon-marked-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-17">17</div>
<div class="crayon-num crayon-marked-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-18">18</div>
<div class="crayon-num crayon-marked-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-19">19</div>
<div class="crayon-num crayon-marked-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-20">20</div>
<div class="crayon-num crayon-marked-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-21">21</div>
<div class="crayon-num crayon-marked-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-22">22</div>
<div class="crayon-num crayon-marked-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-23">23</div>
<div class="crayon-num crayon-marked-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-24">24</div>
<div class="crayon-num crayon-marked-num crayon-bottom" data-line="urvanov-syntax-highlighter-647f426c98189373032599-25">25</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98189373032599-26">26</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98189373032599-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'spec_helper'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98189373032599-2">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98189373032599-3">
<span class="crayon-i">describe</span><span class="crayon-h"> </span><span class="crayon-s">"weight"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-v">type</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">feature</span><span class="crayon-h"> </span><span class="crayon-st">do</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98189373032599-4">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98189373032599-5">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">it</span><span class="crayon-h"> </span><span class="crayon-s">"will be calculated for Mercury"</span><span class="crayon-h"> </span><span class="crayon-st">do</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98189373032599-6">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">visit</span><span class="crayon-h"> </span><span class="crayon-s">'http://localhost:9292/weight'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98189373032599-7">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-v">have</span><span class="crayon-sy">_</span>content<span class="crayon-h"> </span><span class="crayon-s">'Your Weight On Astronomical Bodies'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98189373032599-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98189373032599-9">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">fill</span><span class="crayon-sy">_</span>in<span class="crayon-h"> </span><span class="crayon-s">'wt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">with</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'200'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98189373032599-10">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">click</span><span class="crayon-sy">_</span>on<span class="crayon-h"> </span><span class="crayon-s">'calculate'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98189373032599-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98189373032599-12">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">.</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">value</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-e">eq</span><span class="crayon-sy">(</span><span class="crayon-s">'75.6'</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98189373032599-13">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">.</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">value</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-e">be_within</span><span class="crayon-sy">(</span><span class="crayon-cn">0.9</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">of</span><span class="crayon-sy">(</span><span class="crayon-s">'75'</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98189373032599-14">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98189373032599-15">&nbsp;</div>
<div class="crayon-line crayon-marked-line crayon-top crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98189373032599-16">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">it</span><span class="crayon-h"> </span><span class="crayon-s">"will be calculated for Mercury headlessly"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-v">js</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-r">true</span><span class="crayon-h"> </span><span class="crayon-st">do</span>
</div>
<div class="crayon-line crayon-marked-line" id="urvanov-syntax-highlighter-647f426c98189373032599-17">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">visit</span><span class="crayon-h"> </span><span class="crayon-s">'http://localhost:9292/weight'</span>
</div>
<div class="crayon-line crayon-marked-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98189373032599-18">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-v">have</span><span class="crayon-sy">_</span>content<span class="crayon-h"> </span><span class="crayon-s">'Your Weight On Astronomical Bodies'</span>
</div>
<div class="crayon-line crayon-marked-line" id="urvanov-syntax-highlighter-647f426c98189373032599-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line crayon-marked-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98189373032599-20">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">fill</span><span class="crayon-sy">_</span>in<span class="crayon-h"> </span><span class="crayon-s">'wt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">with</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'200'</span>
</div>
<div class="crayon-line crayon-marked-line" id="urvanov-syntax-highlighter-647f426c98189373032599-21">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">click</span><span class="crayon-sy">_</span>on<span class="crayon-h"> </span><span class="crayon-s">'calculate'</span>
</div>
<div class="crayon-line crayon-marked-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98189373032599-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line crayon-marked-line" id="urvanov-syntax-highlighter-647f426c98189373032599-23">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">.</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">value</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-e">eq</span><span class="crayon-sy">(</span><span class="crayon-s">'75.6'</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-marked-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98189373032599-24">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">.</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">value</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-e">be_within</span><span class="crayon-sy">(</span><span class="crayon-cn">0.9</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">of</span><span class="crayon-sy">(</span><span class="crayon-s">'75'</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-marked-line crayon-bottom" id="urvanov-syntax-highlighter-647f426c98189373032599-25">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98189373032599-26"><span class="crayon-st">end</span></div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0008 seconds] -->
<p></p>
<p>Now when you run this, you will see the first test call up the browser as normal. The second test, however, will run without a browser appearing.</p>
<p>Finally, Capybara does add a DSL for writing descriptive &#8220;feature style&#8221; acceptance tests using RSpec. You can change the previous script to this:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c9818a581058149" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'spec_helper'

feature "weight" do
  scenario "will be calculated for Mercury" do
    visit 'http://localhost:9292/weight'
    expect(page).to have_content 'Your Weight On Astronomical Bodies'
    
    fill_in 'wt', with: '200'
    click_on 'calculate'
    
    expect(page.find_field('outputmrc').value).to eq('75.6')
    expect(page.find_field('outputmrc').value.to_f).to be_within(0.9).of('75'.to_f)
  end

  scenario "will be calculated for Mercury headlessly", :js =&gt; true do
    visit 'http://localhost:9292/weight'
    expect(page).to have_content 'Your Weight On Astronomical Bodies'
    
    fill_in 'wt', with: '200'
    click_on 'calculate'
    
    expect(page.find_field('outputmrc').value).to eq('75.6')
    expect(page.find_field('outputmrc').value.to_f).to be_within(0.9).of('75'.to_f)
  end
end</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-2">2</div>
<div class="crayon-num crayon-marked-num crayon-top" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-3">3</div>
<div class="crayon-num crayon-marked-num crayon-bottom crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-14">14</div>
<div class="crayon-num crayon-marked-num crayon-top crayon-bottom" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-15">15</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-16">16</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-17">17</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-18">18</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-19">19</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-20">20</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-21">21</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-22">22</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-23">23</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-24">24</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818a581058149-25">25</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'spec_helper'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-2">&nbsp;</div>
<div class="crayon-line crayon-marked-line crayon-top" id="urvanov-syntax-highlighter-647f426c9818a581058149-3">
<span class="crayon-i">feature</span><span class="crayon-h"> </span><span class="crayon-s">"weight"</span><span class="crayon-h"> </span><span class="crayon-st">do</span>
</div>
<div class="crayon-line crayon-marked-line crayon-bottom crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-4">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">scenario</span><span class="crayon-h"> </span><span class="crayon-s">"will be calculated for Mercury"</span><span class="crayon-h"> </span><span class="crayon-st">do</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-5">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">visit</span><span class="crayon-h"> </span><span class="crayon-s">'http://localhost:9292/weight'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-6">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-v">have</span><span class="crayon-sy">_</span>content<span class="crayon-h"> </span><span class="crayon-s">'Your Weight On Astronomical Bodies'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-8">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">fill</span><span class="crayon-sy">_</span>in<span class="crayon-h"> </span><span class="crayon-s">'wt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">with</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'200'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-9">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">click</span><span class="crayon-sy">_</span>on<span class="crayon-h"> </span><span class="crayon-s">'calculate'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-11">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">.</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">value</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-e">eq</span><span class="crayon-sy">(</span><span class="crayon-s">'75.6'</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-12">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">.</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">value</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-e">be_within</span><span class="crayon-sy">(</span><span class="crayon-cn">0.9</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">of</span><span class="crayon-sy">(</span><span class="crayon-s">'75'</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-13">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-14">&nbsp;</div>
<div class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="urvanov-syntax-highlighter-647f426c9818a581058149-15">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">scenario</span><span class="crayon-h"> </span><span class="crayon-s">"will be calculated for Mercury headlessly"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-v">js</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-r">true</span><span class="crayon-h"> </span><span class="crayon-st">do</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-16">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">visit</span><span class="crayon-h"> </span><span class="crayon-s">'http://localhost:9292/weight'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-17">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-v">have</span><span class="crayon-sy">_</span>content<span class="crayon-h"> </span><span class="crayon-s">'Your Weight On Astronomical Bodies'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-19">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">fill</span><span class="crayon-sy">_</span>in<span class="crayon-h"> </span><span class="crayon-s">'wt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">with</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'200'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-20">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">click</span><span class="crayon-sy">_</span>on<span class="crayon-h"> </span><span class="crayon-s">'calculate'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-22">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">.</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">value</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-e">eq</span><span class="crayon-sy">(</span><span class="crayon-s">'75.6'</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-23">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">.</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">value</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-e">be_within</span><span class="crayon-sy">(</span><span class="crayon-cn">0.9</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">of</span><span class="crayon-sy">(</span><span class="crayon-s">'75'</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-24">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818a581058149-25"><span class="crayon-st">end</span></div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p></p>
<p>Here <code>feature</code> is an alias for <code>describe ..., :type => :feature</code> and <code>scenario</code> is an alias for <code>it</code>. Again, it&#8217;s important to understand that this works because of how Capybara is integrating itself into RSpec.</p>
<h2>Using Cucumber with Capybara</h2>
<p>Finally, let&#8217;s make sure you see how to apply Capybara in a simple Cucumber project. As with RSpec, my goal here isn&#8217;t to teach Cucumber but rather just to show you how to integrate Capybara into it in the easiest way possible. Create a directory called <strong>features</strong>. Within that directory, create two more directories: <strong>support</strong> and <strong>steps</strong>.</p>
<p>In the features directory, create a file called <strong>weight.feature</strong> and put the following in it:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c9818b225784456" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
Ability: Calculate Weight on Other Planets

  Scenario: Mercury
    Given the weight page
    When  the weight calculated is "200"
    Then  the weight on Mercury will be exactly "75.6"
    And   the weight on Mercury will be roughly "75"</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818b225784456-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818b225784456-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818b225784456-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818b225784456-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818b225784456-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818b225784456-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818b225784456-7">7</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818b225784456-1">
<span class="crayon-v">Ability</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">Calculate </span><span class="crayon-e">Weight </span><span class="crayon-e">on </span><span class="crayon-e">Other </span><span class="crayon-e">Planets</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818b225784456-2">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818b225784456-3">
<span class="crayon-e">&nbsp;&nbsp;</span><span class="crayon-v">Scenario</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">Mercury</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818b225784456-4">
<span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Given </span><span class="crayon-e">the </span><span class="crayon-e">weight </span><span class="crayon-e">page</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818b225784456-5">
<span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">When&nbsp;&nbsp;</span><span class="crayon-e">the </span><span class="crayon-e">weight </span><span class="crayon-e">calculated </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-s">"200"</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818b225784456-6">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">Then</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">the </span><span class="crayon-e">weight </span><span class="crayon-e">on </span><span class="crayon-e">Mercury </span><span class="crayon-e">will </span><span class="crayon-e">be </span><span class="crayon-i">exactly</span><span class="crayon-h"> </span><span class="crayon-s">"75.6"</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818b225784456-7">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">And</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-e">the </span><span class="crayon-e">weight </span><span class="crayon-e">on </span><span class="crayon-e">Mercury </span><span class="crayon-e">will </span><span class="crayon-e">be </span><span class="crayon-i">roughly</span><span class="crayon-h"> </span><span class="crayon-s">"75"</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p></p>
<p>In features/support create a file called <strong>env.rb</strong> and put the following in it:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c9818e881326887" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'capybara'

Capybara.default_driver = :selenium

Before do
  Capybara.reset_sessions!
end

World(Capybara::DSL)</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818e881326887-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818e881326887-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818e881326887-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818e881326887-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818e881326887-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818e881326887-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818e881326887-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818e881326887-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818e881326887-9">9</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818e881326887-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'capybara'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818e881326887-2">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818e881326887-3">
<span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">default_driver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">selenium</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818e881326887-4">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818e881326887-5">
<span class="crayon-i">Before</span><span class="crayon-h"> </span><span class="crayon-st">do</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818e881326887-6">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">reset_sessions</span><span class="crayon-o">!</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818e881326887-7"><span class="crayon-st">end</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818e881326887-8">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818e881326887-9">
<span class="crayon-e">World</span><span class="crayon-sy">(</span><span class="crayon-v">Capybara</span><span class="crayon-o">::</span><span class="crayon-v">DSL</span><span class="crayon-sy">)</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p></p>
<p>Here Capybara is required and then the DSL is placed into Cucumber&#8217;s context by passing it World(). Note that a Before hook is used to reset the sessions before each scenario is run. This matches conceptually what we did earlier with the Test::Unit example.</p>
<p>Finally, in the features/steps directory create a file called <strong>weight_steps.rb</strong> and put the following in it:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c9818f804018721" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
Given(/^the weight page$/) do
  visit 'http://localhost:9292/weight'
  expect(page).to have_content 'Your Weight On Astronomical Bodies'
end

When(/^the weight calculated is "(.*?)"$/) do |value|
  fill_in 'wt', with: value
  click_on 'calculate'
end

Then(/^the weight on Mercury will be exactly "(.*?)"$/) do |value|
  expect(find_field('outputmrc').value).to eq(value)
end

Then(/^the weight on Mercury will be roughly "(.*?)"$/) do |value|
  expect(find_field('outputmrc').value.to_f).to be_within(0.9).of(value.to_f)
end</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-14">14</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-15">15</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-16">16</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c9818f804018721-17">17</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-1">
<span class="crayon-e">Given</span><span class="crayon-sy">(</span><span class="crayon-o">/</span><span class="crayon-o">^</span><span class="crayon-i">the</span><span class="crayon-h"> </span><span class="crayon-i">weight</span><span class="crayon-h"> </span><span class="crayon-v">page</span><span class="crayon-sy">$</span><span class="crayon-o">/</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">do</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-2">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">visit</span><span class="crayon-h"> </span><span class="crayon-s">'http://localhost:9292/weight'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-3">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-v">have</span><span class="crayon-sy">_</span>content<span class="crayon-h"> </span><span class="crayon-s">'Your Weight On Astronomical Bodies'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-4"><span class="crayon-st">end</span></div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-5">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-6">
<span class="crayon-st">When</span><span class="crayon-sy">(</span><span class="crayon-o">/</span><span class="crayon-o">^</span><span class="crayon-i">the</span><span class="crayon-h"> </span><span class="crayon-i">weight</span><span class="crayon-h"> </span><span class="crayon-i">calculated</span><span class="crayon-h"> </span><span class="crayon-i">is</span><span class="crayon-h"> </span><span class="crayon-s">"(.*?)"</span><span class="crayon-sy">$</span><span class="crayon-o">/</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">do</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-v">value</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-7">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">fill</span><span class="crayon-sy">_</span>in<span class="crayon-h"> </span><span class="crayon-s">'wt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">with</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">value</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-8">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">click</span><span class="crayon-sy">_</span>on<span class="crayon-h"> </span><span class="crayon-s">'calculate'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-9"><span class="crayon-st">end</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-10">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-11">
<span class="crayon-st">Then</span><span class="crayon-sy">(</span><span class="crayon-o">/</span><span class="crayon-o">^</span><span class="crayon-i">the</span><span class="crayon-h"> </span><span class="crayon-i">weight</span><span class="crayon-h"> </span><span class="crayon-i">on</span><span class="crayon-h"> </span><span class="crayon-i">Mercury</span><span class="crayon-h"> </span><span class="crayon-i">will</span><span class="crayon-h"> </span><span class="crayon-i">be</span><span class="crayon-h"> </span><span class="crayon-i">exactly</span><span class="crayon-h"> </span><span class="crayon-s">"(.*?)"</span><span class="crayon-sy">$</span><span class="crayon-o">/</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">do</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-v">value</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-12">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">value</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-e">eq</span><span class="crayon-sy">(</span><span class="crayon-v">value</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-13"><span class="crayon-st">end</span></div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-14">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-15">
<span class="crayon-st">Then</span><span class="crayon-sy">(</span><span class="crayon-o">/</span><span class="crayon-o">^</span><span class="crayon-i">the</span><span class="crayon-h"> </span><span class="crayon-i">weight</span><span class="crayon-h"> </span><span class="crayon-i">on</span><span class="crayon-h"> </span><span class="crayon-i">Mercury</span><span class="crayon-h"> </span><span class="crayon-i">will</span><span class="crayon-h"> </span><span class="crayon-i">be</span><span class="crayon-h"> </span><span class="crayon-i">roughly</span><span class="crayon-h"> </span><span class="crayon-s">"(.*?)"</span><span class="crayon-sy">$</span><span class="crayon-o">/</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">do</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-v">value</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-16">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">expect</span><span class="crayon-sy">(</span><span class="crayon-e">find_field</span><span class="crayon-sy">(</span><span class="crayon-s">'outputmrc'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">value</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-i">to</span><span class="crayon-h"> </span><span class="crayon-e">be_within</span><span class="crayon-sy">(</span><span class="crayon-cn">0.9</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">of</span><span class="crayon-sy">(</span><span class="crayon-v">value</span><span class="crayon-sy">.</span><span class="crayon-v">to_f</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c9818f804018721-17"><span class="crayon-st">end</span></div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p></p>
<p>Your output from this should be something like this:</p>
<pre>
Ability: Calculate Weight on Other Planets

  Scenario: Mercury                                   # features\weight.feature:3
    Given the weight page                             # features/steps/weight_steps.rb:1
    When the weight calculated is "200"               # features/steps/weight_steps.rb:6
    Then the weight on Mercury will be exactly "75.6" # features/steps/weight_steps.rb:11
    And the weight on Mercury will be roughly "75"    # features/steps/weight_steps.rb:15

1 scenario (1 passed)
4 steps (4 passed)
0m4.474s
</pre>
<p>As a note, you can incorporate the Capybara DLS directly into Cucumber just as you did with RSpec in a slightly simpler way. Change your env.rb file to this:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c98190265047420" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'capybara/cucumber'

Capybara.default_driver = :selenium

Before do
  Capybara.reset_sessions!
end</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98190265047420-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98190265047420-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98190265047420-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98190265047420-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98190265047420-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98190265047420-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98190265047420-7">7</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98190265047420-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'capybara/cucumber'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98190265047420-2">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98190265047420-3">
<span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">default_driver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">selenium</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98190265047420-4">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98190265047420-5">
<span class="crayon-i">Before</span><span class="crayon-h"> </span><span class="crayon-st">do</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98190265047420-6">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">reset_sessions</span><span class="crayon-o">!</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98190265047420-7"><span class="crayon-st">end</span></div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
<p></p>
<p>Finally, let&#8217;s try to run a headless example like we did with RSpec. As before you&#8217;ll have to set up a JavaScript driver. Change env.rb to this:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c98191619702572" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<span class="crayon-language">Ruby</span>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
require 'capybara/cucumber'
require 'capybara/poltergeist'

Capybara.default_driver = :selenium
Capybara.javascript_driver = :poltergeist

Before do
  Capybara.reset_sessions!
end</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98191619702572-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98191619702572-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98191619702572-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98191619702572-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98191619702572-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98191619702572-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98191619702572-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98191619702572-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98191619702572-9">9</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98191619702572-1">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'capybara/cucumber'</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98191619702572-2">
<span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'capybara/poltergeist'</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98191619702572-3">&nbsp;</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98191619702572-4">
<span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">default_driver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">selenium</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98191619702572-5">
<span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">javascript_driver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">poltergeist</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98191619702572-6">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98191619702572-7">
<span class="crayon-i">Before</span><span class="crayon-h"> </span><span class="crayon-st">do</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98191619702572-8">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">Capybara</span><span class="crayon-sy">.</span><span class="crayon-v">reset_sessions</span><span class="crayon-o">!</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98191619702572-9"><span class="crayon-st">end</span></div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
<p></p>
<p>Now add a headless scenario to your feature file:</p>
<p></p>
<!-- Urvanov Syntax Highlighter v2.8.33 -->

		<div id="urvanov-syntax-highlighter-647f426c98194924114486" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button urvanov-syntax-highlighter-nums-button" title="Toggle Line Numbers"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-plain-button" title="Toggle Plain Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-wrap-button" title="Toggle Line Wrap"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-expand-button" title="Expand Code"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-copy-button" title="Copy"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
<div class="crayon-button urvanov-syntax-highlighter-popup-button" title="Open Code In New Window"><div class="urvanov-syntax-highlighter-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea wrap="soft" class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
Ability: Calculate Weight on Other Planets

  Scenario: Mercury
    Given the weight page
    When  the weight calculated is "200"
    Then  the weight on Mercury will be exactly "75.6"
    And   the weight on Mercury will be roughly "75"

  @javascript
  Scenario: Mercury (Headless)
    Given the weight page
    When  the weight calculated is "200"
    Then  the weight on Mercury will be exactly "75.6"
    And   the weight on Mercury will be roughly "75"</textarea></div>
			<div class="urvanov-syntax-highlighter-main">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98194924114486-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98194924114486-2">2</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98194924114486-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98194924114486-4">4</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98194924114486-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98194924114486-6">6</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98194924114486-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98194924114486-8">8</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98194924114486-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98194924114486-10">10</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98194924114486-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98194924114486-12">12</div>
<div class="crayon-num" data-line="urvanov-syntax-highlighter-647f426c98194924114486-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-647f426c98194924114486-14">14</div>
</div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98194924114486-1">
<span class="crayon-v">Ability</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">Calculate </span><span class="crayon-e">Weight </span><span class="crayon-e">on </span><span class="crayon-e">Other </span><span class="crayon-e">Planets</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98194924114486-2">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98194924114486-3">
<span class="crayon-e">&nbsp;&nbsp;</span><span class="crayon-v">Scenario</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">Mercury</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98194924114486-4">
<span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Given </span><span class="crayon-e">the </span><span class="crayon-e">weight </span><span class="crayon-e">page</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98194924114486-5">
<span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">When&nbsp;&nbsp;</span><span class="crayon-e">the </span><span class="crayon-e">weight </span><span class="crayon-e">calculated </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-s">"200"</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98194924114486-6">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">Then</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">the </span><span class="crayon-e">weight </span><span class="crayon-e">on </span><span class="crayon-e">Mercury </span><span class="crayon-e">will </span><span class="crayon-e">be </span><span class="crayon-i">exactly</span><span class="crayon-h"> </span><span class="crayon-s">"75.6"</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98194924114486-7">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">And</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-e">the </span><span class="crayon-e">weight </span><span class="crayon-e">on </span><span class="crayon-e">Mercury </span><span class="crayon-e">will </span><span class="crayon-e">be </span><span class="crayon-i">roughly</span><span class="crayon-h"> </span><span class="crayon-s">"75"</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98194924114486-8">&nbsp;</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98194924114486-9">
<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">javascript</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98194924114486-10">
<span class="crayon-e">&nbsp;&nbsp;</span><span class="crayon-v">Scenario</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">Mercury</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Headless</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98194924114486-11">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Given </span><span class="crayon-e">the </span><span class="crayon-e">weight </span><span class="crayon-e">page</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98194924114486-12">
<span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">When&nbsp;&nbsp;</span><span class="crayon-e">the </span><span class="crayon-e">weight </span><span class="crayon-e">calculated </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-s">"200"</span>
</div>
<div class="crayon-line" id="urvanov-syntax-highlighter-647f426c98194924114486-13">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">Then</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">the </span><span class="crayon-e">weight </span><span class="crayon-e">on </span><span class="crayon-e">Mercury </span><span class="crayon-e">will </span><span class="crayon-e">be </span><span class="crayon-i">exactly</span><span class="crayon-h"> </span><span class="crayon-s">"75.6"</span>
</div>
<div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-647f426c98194924114486-14">
<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">And</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-e">the </span><span class="crayon-e">weight </span><span class="crayon-e">on </span><span class="crayon-e">Mercury </span><span class="crayon-e">will </span><span class="crayon-e">be </span><span class="crayon-i">roughly</span><span class="crayon-h"> </span><span class="crayon-s">"75"</span>
</div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p>
<p>What you see here is that Capybara also hooks into any Cucumber scenarios you have tagged with @javascript and automatically switches you to the driver you have set up to handle JavaScript.</p>
<p>As with RSpec, you&#8217;ll see the above runs the first scenario through a browser and runs the second scenario headlessly.</p>
<p>So what you&#8217;ve seen here is that you can use Capybara in various contexts, including your own custom test runners, as well as leveraging the wider ecosystem of Ruby-based test solutions. The fact that you can incorporate the Capybara DSL allows you to write your own custom frameworks. Many people have done just this, such as with <a href="https://github.com/appfolio/ae_page_objects">AE Page Objects</a>, <a href="https://github.com/collectiveidea/capybara-ui">Capybara UI</a>, <a href="https://github.com/natritmeyer/site_prism">SitePrism</a> and <a href="https://github.com/jwilger/kookaburra">Kookaburra</a>.</p>
<div class="addtoany_share_save_container addtoany_content addtoany_content_bottom"><div class="a2a_kit a2a_kit_size_16 addtoany_list" data-a2a-url="https://testerstories.com/2014/08/learning-capybara-part-2/" data-a2a-title="Learning Capybara, Part 2">
<a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=%2F2014%2F08%2Flearning-capybara-part-2%2F&amp;linkname=Learning%20Capybara%2C%20Part%202" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=%2F2014%2F08%2Flearning-capybara-part-2%2F&amp;linkname=Learning%20Capybara%2C%20Part%202" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=%2F2014%2F08%2Flearning-capybara-part-2%2F&amp;linkname=Learning%20Capybara%2C%20Part%202" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_print" href="https://www.addtoany.com/add_to/print?linkurl=%2F2014%2F08%2Flearning-capybara-part-2%2F&amp;linkname=Learning%20Capybara%2C%20Part%202" title="Print" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share"><img src="https://static.addtoany.com/buttons/favicon.png" alt="Share"></a>
</div></div>      
	</div>
<!-- .entry-content -->
	<footer class="entry-footer">       
		<p class="written-by">This article was written by <a href="/author/administrator/">Jeff Nyman</a></p>
<div class="author-bio">
		
	<h3><a href="/author/administrator/" rel="author">About  Jeff Nyman</a></h3>		
	<img alt="" src="https://secure.gravatar.com/avatar/a3b6c2d0b2bafdb9ad9cdf782873204d?s=72&#038;d=mm&#038;r=pg" srcset="https://secure.gravatar.com/avatar/a3b6c2d0b2bafdb9ad9cdf782873204d?s=144&#038;d=mm&#038;r=pg 2x" class="avatar avatar-72 photo" height="72" width="72" decoding="async"><p class="author-description">Anything I put here is an approximation of the truth. You're getting a particular view of myself ... and it's the view I'm choosing to present to you. If you've never met me before in person, please realize I'm not the same in person as I am in writing. That's because I can only put part of myself down into words.

If you have met me before in person then I'd ask you to consider that the view you've formed that way and the view you come to by reading what I say here may, in fact, both be true. I'd advise that you not automatically discard either viewpoint when they conflict or accept either as truth when they agree.</p>		
</div>
<!-- .author-bio -->
	</footer><!-- .entry-footer -->

	<nav class="navigation post-navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links">
<div class="nav-previous"><a href="/2014/08/learning-capybara-part-1/" rel="prev"><span class="genericon genericon-previous" aria-hidden="true"></span> <span class="screen-reader-text">Previous post:</span> <span class="post-title">Learning Capybara, Part 1</span></a></div>
<div class="nav-next"><a href="/2014/09/combination-testing-making-it-manageable/" rel="next"><span class="post-title">Combination Testing: Making it Manageable</span><span class="screen-reader-text">Next post:</span> <span class="genericon genericon-next" aria-hidden="true"></span> </a></div>
</div>
	</nav>
<div id="comments" class="comments-area">


		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2014/08/learning-capybara-part-2/#respond" style="display:none;">Cancel reply</a></small>
</h3>
<form action="https://testerstories.com/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> <span class="required-field-message">Required fields are marked <span class="required">*</span></span></p>
<p class="comment-form-comment"><label for="comment">Comment <span class="required">*</span></label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required></textarea></p>
<p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" autocomplete="name" required></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" autocomplete="email" required></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" autocomplete="url"></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="1800" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p>
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="f99a1389ed"></p>
<p style="display: none !important;"><label>&#916;<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js_1" name="ak_js" value="50"><script>document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );</script></p>
</form>	</div>
<!-- #respond -->
	<p class="akismet_comment_form_privacy_notice">This site uses Akismet to reduce spam. <a href="https://akismet.com/privacy/" target="_blank" rel="nofollow noopener">Learn how your comment data is processed</a>.</p>
</div>
<!-- #comments -->
</article><!-- #post-## -->
</main><!--/main-content-->
	<aside id="sidebar-widget-area" class="sidebar-widget-area" role="complementary">
		<a class="screen-reader-text skip-link" href="#page-footer">Skip to footer</a>

		<section id="sidebar" class="widget-area sidebar">
			<div id="text-6" class="widget widget_text">			<div class="textwidget">
<p><a href="https://www.linkedin.com/pub/jeff-nyman/12/b32/16a"><br>
<img decoding="async" src="https://static.licdn.com/scds/common/u/img/webpromo/btn_myprofile_160x33.png" alt="View Jeff Nyman's profile on LinkedIn" width="160" height="33" border="0"></a></p>
</div>
		</div>
<div id="categories-5" class="widget widget_categories">
<h2 class="widget-title">Topics</h2>
			<ul>
					<li class="cat-item cat-item-58">
<a href="/category/agile/">Agile</a> (2)
</li>
	<li class="cat-item cat-item-49">
<a href="/category/ai/">AI</a> (24)
<ul class="children">
	<li class="cat-item cat-item-50">
<a href="/category/ai/machine-learning/">Machine Learning</a> (12)
	<ul class="children">
	<li class="cat-item cat-item-55">
<a href="/category/ai/machine-learning/ml-series-1/">ML Series 1</a> (2)
</li>
	<li class="cat-item cat-item-56">
<a href="/category/ai/machine-learning/ml-series-2/">ML Series 2</a> (4)
</li>
	<li class="cat-item cat-item-57">
<a href="/category/ai/machine-learning/ml-series-3/">ML Series 3</a> (6)
</li>
	</ul>
</li>
</ul>
</li>
	<li class="cat-item cat-item-11">
<a href="/category/automation/">Automation</a> (68)
<ul class="children">
	<li class="cat-item cat-item-41">
<a href="/category/automation/c/">C#</a> (2)
</li>
	<li class="cat-item cat-item-8">
<a href="/category/automation/capybara/">Capybara</a> (11)
</li>
	<li class="cat-item cat-item-9">
<a href="/category/automation/cucumber/">Cucumber</a> (10)
</li>
	<li class="cat-item cat-item-31">
<a href="/category/automation/cucumber-jvm/">Cucumber-JVM</a> (6)
</li>
	<li class="cat-item cat-item-42">
<a href="/category/automation/groovy/">Groovy</a> (1)
</li>
	<li class="cat-item cat-item-40">
<a href="/category/automation/java/">Java</a> (9)
</li>
	<li class="cat-item cat-item-10">
<a href="/category/automation/qtp/">QTP</a> (6)
</li>
	<li class="cat-item cat-item-5">
<a href="/category/automation/rspec/">RSpec</a> (4)
</li>
	<li class="cat-item cat-item-7">
<a href="/category/automation/selenium/">Selenium</a> (17)
</li>
	<li class="cat-item cat-item-39">
<a href="/category/automation/serenity/">Serenity</a> (8)
</li>
	<li class="cat-item cat-item-30">
<a href="/category/automation/symbiont/">Symbiont</a> (11)
</li>
	<li class="cat-item cat-item-51">
<a href="/category/automation/tapestry/">Tapestry</a> (6)
</li>
	<li class="cat-item cat-item-6">
<a href="/category/automation/watir/">Watir</a> (4)
</li>
</ul>
</li>
	<li class="cat-item cat-item-13">
<a href="/category/bdd/">BDD</a> (24)
<ul class="children">
	<li class="cat-item cat-item-23">
<a href="/category/bdd/tdl/">TDL</a> (17)
</li>
</ul>
</li>
	<li class="cat-item cat-item-25">
<a href="/category/career/">Career</a> (33)
<ul class="children">
	<li class="cat-item cat-item-53">
<a href="/category/career/interview/">Interview</a> (10)
</li>
</ul>
</li>
	<li class="cat-item cat-item-15">
<a href="/category/communication/">Communication</a> (16)
</li>
	<li class="cat-item cat-item-65">
<a href="/category/crime-scene/">Crime Scene</a> (4)
</li>
	<li class="cat-item cat-item-52">
<a href="/category/data-science/">Data Science</a> (4)
</li>
	<li class="cat-item cat-item-61">
<a href="/category/development/">Development</a> (39)
<ul class="children">
	<li class="cat-item cat-item-36">
<a href="/category/development/chef/">Chef</a> (2)
</li>
	<li class="cat-item cat-item-32">
<a href="/category/development/inform-7/">Inform 7</a> (3)
</li>
	<li class="cat-item cat-item-38">
<a href="/category/development/javascript-test-solutions/">JavaScript</a> (6)
</li>
	<li class="cat-item cat-item-19">
<a href="/category/development/language-building/">Language Building</a> (9)
	<ul class="children">
	<li class="cat-item cat-item-20">
<a href="/category/development/language-building/rex-and-racc/">Rex and Racc</a> (3)
</li>
	</ul>
</li>
	<li class="cat-item cat-item-48">
<a href="/category/development/python/">Python</a> (4)
</li>
	<li class="cat-item cat-item-29">
<a href="/category/development/rails/">Rails</a> (4)
</li>
	<li class="cat-item cat-item-21">
<a href="/category/development/web-development/">Web Development</a> (11)
	<ul class="children">
	<li class="cat-item cat-item-34">
<a href="/category/development/web-development/node-js/">Node.js</a> (5)
</li>
	<li class="cat-item cat-item-22">
<a href="/category/development/web-development/sinatra/">Sinatra</a> (6)
</li>
	</ul>
</li>
</ul>
</li>
	<li class="cat-item cat-item-28">
<a href="/category/dialect/">Dialect</a> (6)
</li>
	<li class="cat-item cat-item-45">
<a href="/category/exploration/">Exploration</a> (14)
<ul class="children">
	<li class="cat-item cat-item-46">
<a href="/category/exploration/interactive/">Interactive</a> (6)
</li>
</ul>
</li>
	<li class="cat-item cat-item-44">
<a href="/category/indefinito/">Indefinito</a> (11)
</li>
	<li class="cat-item cat-item-17">
<a href="/category/learning/">Learning</a> (11)
</li>
	<li class="cat-item cat-item-24">
<a href="/category/lucid/">Lucid</a> (11)
</li>
	<li class="cat-item cat-item-62">
<a href="/category/product-development/">Product Development</a> (7)
</li>
	<li class="cat-item cat-item-64">
<a href="/category/product-management/">Product Management</a> (3)
</li>
	<li class="cat-item cat-item-3">
<a href="/category/quality/">Quality</a> (7)
</li>
	<li class="cat-item cat-item-14">
<a href="/category/quality-assurance/">Quality Assurance</a> (5)
</li>
	<li class="cat-item cat-item-35">
<a href="/category/specify/">Specify</a> (2)
</li>
	<li class="cat-item cat-item-16">
<a href="/category/symbiont-pg/">Symbiont-PG</a> (4)
</li>
	<li class="cat-item cat-item-27">
<a href="/category/test-solutions/">Test Solutions</a> (11)
</li>
	<li class="cat-item cat-item-4">
<a href="/category/testing/">Testing</a> (167)
<ul class="children">
	<li class="cat-item cat-item-59">
<a href="/category/testing/contracts/">Contracts</a> (2)
</li>
	<li class="cat-item cat-item-63">
<a href="/category/testing/epistemology/">Epistemology</a> (1)
</li>
	<li class="cat-item cat-item-67">
<a href="/category/testing/games/">Games</a> (8)
</li>
	<li class="cat-item cat-item-68">
<a href="/category/testing/history-and-science/">History and Science</a> (5)
</li>
	<li class="cat-item cat-item-43">
<a href="/category/testing/modern-testing/">Modern Testing</a> (15)
</li>
	<li class="cat-item cat-item-54">
<a href="/category/testing/testability/">Testability</a> (9)
</li>
</ul>
</li>
	<li class="cat-item cat-item-12">
<a href="/category/thinking/">Thinking</a> (22)
</li>
	<li class="cat-item cat-item-47">
<a href="/category/what-if/">What If</a> (1)
</li>
	<li class="cat-item cat-item-69">
<a href="/category/zmachine/">Z-Machine</a> (7)
</li>
			</ul>

			</div>
<div id="archives-5" class="widget widget_archive">
<h2 class="widget-title">Archives</h2>		<label class="screen-reader-text" for="archives-dropdown-5">Archives</label>
		<select id="archives-dropdown-5" name="archive-dropdown">
			
			<option value="">Select Month</option>
				<option value="https://testerstories.com/2023/06/"> June 2023 </option>
	<option value="https://testerstories.com/2023/05/"> May 2023 </option>
	<option value="https://testerstories.com/2023/04/"> April 2023 </option>
	<option value="https://testerstories.com/2023/03/"> March 2023 </option>
	<option value="https://testerstories.com/2023/02/"> February 2023 </option>
	<option value="https://testerstories.com/2023/01/"> January 2023 </option>
	<option value="https://testerstories.com/2022/12/"> December 2022 </option>
	<option value="https://testerstories.com/2022/11/"> November 2022 </option>
	<option value="https://testerstories.com/2022/10/"> October 2022 </option>
	<option value="https://testerstories.com/2022/07/"> July 2022 </option>
	<option value="https://testerstories.com/2022/06/"> June 2022 </option>
	<option value="https://testerstories.com/2022/05/"> May 2022 </option>
	<option value="https://testerstories.com/2022/03/"> March 2022 </option>
	<option value="https://testerstories.com/2022/02/"> February 2022 </option>
	<option value="https://testerstories.com/2022/01/"> January 2022 </option>
	<option value="https://testerstories.com/2021/12/"> December 2021 </option>
	<option value="https://testerstories.com/2021/10/"> October 2021 </option>
	<option value="https://testerstories.com/2021/08/"> August 2021 </option>
	<option value="https://testerstories.com/2021/07/"> July 2021 </option>
	<option value="https://testerstories.com/2021/06/"> June 2021 </option>
	<option value="https://testerstories.com/2021/05/"> May 2021 </option>
	<option value="https://testerstories.com/2021/04/"> April 2021 </option>
	<option value="https://testerstories.com/2021/03/"> March 2021 </option>
	<option value="https://testerstories.com/2021/02/"> February 2021 </option>
	<option value="https://testerstories.com/2021/01/"> January 2021 </option>
	<option value="https://testerstories.com/2020/11/"> November 2020 </option>
	<option value="https://testerstories.com/2020/10/"> October 2020 </option>
	<option value="https://testerstories.com/2020/09/"> September 2020 </option>
	<option value="https://testerstories.com/2020/07/"> July 2020 </option>
	<option value="https://testerstories.com/2020/06/"> June 2020 </option>
	<option value="https://testerstories.com/2020/05/"> May 2020 </option>
	<option value="https://testerstories.com/2020/02/"> February 2020 </option>
	<option value="https://testerstories.com/2020/01/"> January 2020 </option>
	<option value="https://testerstories.com/2019/12/"> December 2019 </option>
	<option value="https://testerstories.com/2019/11/"> November 2019 </option>
	<option value="https://testerstories.com/2019/10/"> October 2019 </option>
	<option value="https://testerstories.com/2019/09/"> September 2019 </option>
	<option value="https://testerstories.com/2019/08/"> August 2019 </option>
	<option value="https://testerstories.com/2019/07/"> July 2019 </option>
	<option value="https://testerstories.com/2019/06/"> June 2019 </option>
	<option value="https://testerstories.com/2019/05/"> May 2019 </option>
	<option value="https://testerstories.com/2019/04/"> April 2019 </option>
	<option value="https://testerstories.com/2019/03/"> March 2019 </option>
	<option value="https://testerstories.com/2019/02/"> February 2019 </option>
	<option value="https://testerstories.com/2019/01/"> January 2019 </option>
	<option value="https://testerstories.com/2018/12/"> December 2018 </option>
	<option value="https://testerstories.com/2018/11/"> November 2018 </option>
	<option value="https://testerstories.com/2018/10/"> October 2018 </option>
	<option value="https://testerstories.com/2018/09/"> September 2018 </option>
	<option value="https://testerstories.com/2018/08/"> August 2018 </option>
	<option value="https://testerstories.com/2018/07/"> July 2018 </option>
	<option value="https://testerstories.com/2018/06/"> June 2018 </option>
	<option value="https://testerstories.com/2018/05/"> May 2018 </option>
	<option value="https://testerstories.com/2018/04/"> April 2018 </option>
	<option value="https://testerstories.com/2018/03/"> March 2018 </option>
	<option value="https://testerstories.com/2018/02/"> February 2018 </option>
	<option value="https://testerstories.com/2018/01/"> January 2018 </option>
	<option value="https://testerstories.com/2017/12/"> December 2017 </option>
	<option value="https://testerstories.com/2017/11/"> November 2017 </option>
	<option value="https://testerstories.com/2017/10/"> October 2017 </option>
	<option value="https://testerstories.com/2017/09/"> September 2017 </option>
	<option value="https://testerstories.com/2017/08/"> August 2017 </option>
	<option value="https://testerstories.com/2017/07/"> July 2017 </option>
	<option value="https://testerstories.com/2017/06/"> June 2017 </option>
	<option value="https://testerstories.com/2017/05/"> May 2017 </option>
	<option value="https://testerstories.com/2017/04/"> April 2017 </option>
	<option value="https://testerstories.com/2017/03/"> March 2017 </option>
	<option value="https://testerstories.com/2017/02/"> February 2017 </option>
	<option value="https://testerstories.com/2017/01/"> January 2017 </option>
	<option value="https://testerstories.com/2016/12/"> December 2016 </option>
	<option value="https://testerstories.com/2016/11/"> November 2016 </option>
	<option value="https://testerstories.com/2016/10/"> October 2016 </option>
	<option value="https://testerstories.com/2016/09/"> September 2016 </option>
	<option value="https://testerstories.com/2016/08/"> August 2016 </option>
	<option value="https://testerstories.com/2016/07/"> July 2016 </option>
	<option value="https://testerstories.com/2016/06/"> June 2016 </option>
	<option value="https://testerstories.com/2016/04/"> April 2016 </option>
	<option value="https://testerstories.com/2016/03/"> March 2016 </option>
	<option value="https://testerstories.com/2016/02/"> February 2016 </option>
	<option value="https://testerstories.com/2016/01/"> January 2016 </option>
	<option value="https://testerstories.com/2015/12/"> December 2015 </option>
	<option value="https://testerstories.com/2015/11/"> November 2015 </option>
	<option value="https://testerstories.com/2015/10/"> October 2015 </option>
	<option value="https://testerstories.com/2015/09/"> September 2015 </option>
	<option value="https://testerstories.com/2015/08/"> August 2015 </option>
	<option value="https://testerstories.com/2015/07/"> July 2015 </option>
	<option value="https://testerstories.com/2015/06/"> June 2015 </option>
	<option value="https://testerstories.com/2015/05/"> May 2015 </option>
	<option value="https://testerstories.com/2015/04/"> April 2015 </option>
	<option value="https://testerstories.com/2015/03/"> March 2015 </option>
	<option value="https://testerstories.com/2015/02/"> February 2015 </option>
	<option value="https://testerstories.com/2014/12/"> December 2014 </option>
	<option value="https://testerstories.com/2014/11/"> November 2014 </option>
	<option value="https://testerstories.com/2014/10/"> October 2014 </option>
	<option value="https://testerstories.com/2014/09/"> September 2014 </option>
	<option value="https://testerstories.com/2014/08/"> August 2014 </option>
	<option value="https://testerstories.com/2014/07/"> July 2014 </option>
	<option value="https://testerstories.com/2014/06/"> June 2014 </option>
	<option value="https://testerstories.com/2014/05/"> May 2014 </option>
	<option value="https://testerstories.com/2014/04/"> April 2014 </option>
	<option value="https://testerstories.com/2014/03/"> March 2014 </option>
	<option value="https://testerstories.com/2014/01/"> January 2014 </option>
	<option value="https://testerstories.com/2013/12/"> December 2013 </option>
	<option value="https://testerstories.com/2013/09/"> September 2013 </option>
	<option value="https://testerstories.com/2013/08/"> August 2013 </option>
	<option value="https://testerstories.com/2013/07/"> July 2013 </option>
	<option value="https://testerstories.com/2013/06/"> June 2013 </option>
	<option value="https://testerstories.com/2013/05/"> May 2013 </option>
	<option value="https://testerstories.com/2013/03/"> March 2013 </option>
	<option value="https://testerstories.com/2013/01/"> January 2013 </option>
	<option value="https://testerstories.com/2012/12/"> December 2012 </option>
	<option value="https://testerstories.com/2012/10/"> October 2012 </option>
	<option value="https://testerstories.com/2012/09/"> September 2012 </option>
	<option value="https://testerstories.com/2012/08/"> August 2012 </option>
	<option value="https://testerstories.com/2012/07/"> July 2012 </option>
	<option value="https://testerstories.com/2012/06/"> June 2012 </option>
	<option value="https://testerstories.com/2012/05/"> May 2012 </option>
	<option value="https://testerstories.com/2012/04/"> April 2012 </option>
	<option value="https://testerstories.com/2012/03/"> March 2012 </option>
	<option value="https://testerstories.com/2012/02/"> February 2012 </option>
	<option value="https://testerstories.com/2012/01/"> January 2012 </option>
	<option value="https://testerstories.com/2011/12/"> December 2011 </option>
	<option value="https://testerstories.com/2011/11/"> November 2011 </option>
	<option value="https://testerstories.com/2011/10/"> October 2011 </option>
	<option value="https://testerstories.com/2011/09/"> September 2011 </option>
	<option value="https://testerstories.com/2011/08/"> August 2011 </option>

		</select>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dropdown = document.getElementById( "archives-dropdown-5" );
	function onSelectChange() {
		if ( dropdown.options[ dropdown.selectedIndex ].value !== '' ) {
			document.location.href = this.options[ this.selectedIndex ].value;
		}
	}
	dropdown.onchange = onSelectChange;
})();
/* ]]> */
</script>
			</div>
<div id="meta-5" class="widget widget_meta">
<h2 class="widget-title">Site</h2>
		<ul>
						<li><a href="/wp-login.php">Log in</a></li>
			<li><a href="/feed/">Entries feed</a></li>
			<li><a href="/comments/feed/">Comments feed</a></li>

			<li><a href="https://wordpress.org/">WordPress.org</a></li>
		</ul>

		</div>
<div id="text-4" class="widget widget_text">			<div class="textwidget"><a href="https://www.linkedin.com/pub/jeff-nyman/12/b32/16a">
          <img src="https://static.licdn.com/scds/common/u/img/webpromo/btn_myprofile_160x33.png" width="160" height="33" border="0" alt="View Jeff Nyman's profile on LinkedIn"></a></div>
		</div>
<div id="search-3" class="widget widget_search">
<form role="search" method="get" class="search-form" action="https://testerstories.com/">
	<label>
		<span class="screen-reader-text">Search for:</span>
		<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:">
	</label>
	<button type="submit" class="search-submit"><span class="genericon genericon-search" aria-hidden="true"></span><span class="screen-reader-text">Search</span></button>
</form>
</div>		</section><!-- #sidebar .widget-area -->

	</aside>

  

<footer id="page-footer" role="contentinfo">
	<div id="site-info" class="site-info">
		<span class="footer-site-title"><a href="/" rel="home">Stories from a Software Tester</a></span>
		<a href="https://wordpress.org/">Proudly powered by WordPress</a>
	</div>
<!--/site-info-->
</footer> <!--/footer-->
</div>
<!-- #container -->
            
            <style type="text/css" class="darkmysite_inline_css">#darkmysite_switch_906767975 {
        --darkmysite_switch_apple_width_height: 60px;
        --darkmysite_switch_apple_border_radius: 7px;
        --darkmysite_switch_apple_icon_width: 30px;
        --darkmysite_switch_apple_light_mode_bg: #121116;
        --darkmysite_switch_apple_dark_mode_bg: #ffffff;
        --darkmysite_switch_apple_light_mode_icon_color: #ffffff;
        --darkmysite_switch_apple_dark_mode_icon_color: #121116;
        }

    #darkmysite_switch_906767975 {
        --darkmysite_switch_margin_from_top: 40px;
        --darkmysite_switch_margin_from_bottom: 40px;
        --darkmysite_switch_margin_from_left: 40px;
        --darkmysite_switch_margin_from_right: 40px;
        }</style>




    <div id="darkmysite_switch_906767975" class="darkmysite_switch  darkmysite_bottom_right   darkmysite_switch_apple" onclick="darkmysite_switch_trigger()">
        <span class="darkmysite_switch_icon"></span>
            </div>

            
    <script type="text/javascript" class="darkmysite_inline_js">document.addEventListener("DOMContentLoaded", function(event) {
            darkmysite_init_alternative_dark_mode_switch();
        });</script>


<script type="text/javascript" id="acuarela-script-js-extra">
/* <![CDATA[ */
var acuarelaScreenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/themes/acuarela/js/functions.js?ver=20190802" id="acuarela-script-js"></script>
<script type="text/javascript" src="/wp-includes/js/comment-reply.min.js?ver=6.2.2" id="comment-reply-js"></script>
<script defer type="text/javascript" src="/wp-content/plugins/akismet/_inc/akismet-frontend.js?ver=1680871091" id="akismet-frontend-js"></script>
</body>
</html>